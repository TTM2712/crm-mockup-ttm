{"version":3,"file":"static/js/808.fb1c27ca.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Email.js","../node_modules/@mui/material/esm/TableFooter/tableFooterClasses.js","../node_modules/@mui/material/esm/TableFooter/TableFooter.js","../node_modules/@mui/system/esm/Stack/createStack.js","../node_modules/@mui/material/esm/Stack/Stack.js","../node_modules/@mui/system/esm/styled/styled.js","../node_modules/@mui/icons-material/esm/NavigateNext.js","../node_modules/@mui/icons-material/esm/DragIndicator.js","../node_modules/@mui/icons-material/esm/Cancel.js","pages/QuotationManagement/components/FixedPriceTable/index.tsx","pages/QuotationManagement/components/TimeAndMaterialTable/index.tsx","pages/QuotationManagement/components/EstimationStep/index.tsx","pages/QuotationManagement/components/QuotationForm/index.tsx","pages/QuotationManagement/components/EstimationTable/index.tsx","pages/QuotationManagement/components/QuotationDetail/index.tsx","pages/QuotationManagement/components/QuotationPreview/index.tsx","pages/QuotationManagement/components/QuotationList/index.tsx","pages/QuotationManagement/components/EmailQuotationDialog/index.tsx","pages/QuotationManagement/components/QuotationTemplates/index.tsx","pages/QuotationManagement/components/UploadQuoteTemplate/index.tsx","pages/QuotationManagement/index.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z\"\n}), 'Email');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getTableFooterUtilityClass(slot) {\n  return generateUtilityClass('MuiTableFooter', slot);\n}\nconst tableFooterClasses = generateUtilityClasses('MuiTableFooter', ['root']);\nexport default tableFooterClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport Tablelvl2Context from \"../Table/Tablelvl2Context.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { getTableFooterUtilityClass } from \"./tableFooterClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getTableFooterUtilityClass, classes);\n};\nconst TableFooterRoot = styled('tfoot', {\n  name: 'MuiTableFooter',\n  slot: 'Root'\n})({\n  display: 'table-footer-group'\n});\nconst tablelvl2 = {\n  variant: 'footer'\n};\nconst defaultComponent = 'tfoot';\nconst TableFooter = /*#__PURE__*/React.forwardRef(function TableFooter(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiTableFooter'\n  });\n  const {\n    className,\n    component = defaultComponent,\n    ...other\n  } = props;\n  const ownerState = {\n    ...props,\n    component\n  };\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(Tablelvl2Context.Provider, {\n    value: tablelvl2,\n    children: /*#__PURE__*/_jsx(TableFooterRoot, {\n      as: component,\n      className: clsx(classes.root, className),\n      ref: ref,\n      role: component === defaultComponent ? null : 'rowgroup',\n      ownerState: ownerState,\n      ...other\n    })\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? TableFooter.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component, normally `TableRow`.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default TableFooter;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport deepmerge from '@mui/utils/deepmerge';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nimport composeClasses from '@mui/utils/composeClasses';\nimport systemStyled from \"../styled/index.js\";\nimport useThemePropsSystem from \"../useThemeProps/index.js\";\nimport { extendSxProp } from \"../styleFunctionSx/index.js\";\nimport createTheme from \"../createTheme/index.js\";\nimport { handleBreakpoints, mergeBreakpointsInOrder, resolveBreakpointValues } from \"../breakpoints/index.js\";\nimport { createUnarySpacing, getValue } from \"../spacing/index.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultTheme = createTheme();\n// widening Theme to any so that the consumer can own the theme structure.\nconst defaultCreateStyledComponent = systemStyled('div', {\n  name: 'MuiStack',\n  slot: 'Root'\n});\nfunction useThemePropsDefault(props) {\n  return useThemePropsSystem({\n    props,\n    name: 'MuiStack',\n    defaultTheme\n  });\n}\n\n/**\n * Return an array with the separator React element interspersed between\n * each React node of the input children.\n *\n * > joinChildren([1,2,3], 0)\n * [1,0,2,0,3]\n */\nfunction joinChildren(children, separator) {\n  const childrenArray = React.Children.toArray(children).filter(Boolean);\n  return childrenArray.reduce((output, child, index) => {\n    output.push(child);\n    if (index < childrenArray.length - 1) {\n      output.push(/*#__PURE__*/React.cloneElement(separator, {\n        key: `separator-${index}`\n      }));\n    }\n    return output;\n  }, []);\n}\nconst getSideFromDirection = direction => {\n  return {\n    row: 'Left',\n    'row-reverse': 'Right',\n    column: 'Top',\n    'column-reverse': 'Bottom'\n  }[direction];\n};\nexport const style = ({\n  ownerState,\n  theme\n}) => {\n  let styles = {\n    display: 'flex',\n    flexDirection: 'column',\n    ...handleBreakpoints({\n      theme\n    }, resolveBreakpointValues({\n      values: ownerState.direction,\n      breakpoints: theme.breakpoints.values\n    }), propValue => ({\n      flexDirection: propValue\n    }))\n  };\n  if (ownerState.spacing) {\n    const transformer = createUnarySpacing(theme);\n    const base = Object.keys(theme.breakpoints.values).reduce((acc, breakpoint) => {\n      if (typeof ownerState.spacing === 'object' && ownerState.spacing[breakpoint] != null || typeof ownerState.direction === 'object' && ownerState.direction[breakpoint] != null) {\n        acc[breakpoint] = true;\n      }\n      return acc;\n    }, {});\n    const directionValues = resolveBreakpointValues({\n      values: ownerState.direction,\n      base\n    });\n    const spacingValues = resolveBreakpointValues({\n      values: ownerState.spacing,\n      base\n    });\n    if (typeof directionValues === 'object') {\n      Object.keys(directionValues).forEach((breakpoint, index, breakpoints) => {\n        const directionValue = directionValues[breakpoint];\n        if (!directionValue) {\n          const previousDirectionValue = index > 0 ? directionValues[breakpoints[index - 1]] : 'column';\n          directionValues[breakpoint] = previousDirectionValue;\n        }\n      });\n    }\n    const styleFromPropValue = (propValue, breakpoint) => {\n      if (ownerState.useFlexGap) {\n        return {\n          gap: getValue(transformer, propValue)\n        };\n      }\n      return {\n        // The useFlexGap={false} implement relies on each child to give up control of the margin.\n        // We need to reset the margin to avoid double spacing.\n        '& > :not(style):not(style)': {\n          margin: 0\n        },\n        '& > :not(style) ~ :not(style)': {\n          [`margin${getSideFromDirection(breakpoint ? directionValues[breakpoint] : ownerState.direction)}`]: getValue(transformer, propValue)\n        }\n      };\n    };\n    styles = deepmerge(styles, handleBreakpoints({\n      theme\n    }, spacingValues, styleFromPropValue));\n  }\n  styles = mergeBreakpointsInOrder(theme.breakpoints, styles);\n  return styles;\n};\nexport default function createStack(options = {}) {\n  const {\n    // This will allow adding custom styled fn (for example for custom sx style function)\n    createStyledComponent = defaultCreateStyledComponent,\n    useThemeProps = useThemePropsDefault,\n    componentName = 'MuiStack'\n  } = options;\n  const useUtilityClasses = () => {\n    const slots = {\n      root: ['root']\n    };\n    return composeClasses(slots, slot => generateUtilityClass(componentName, slot), {});\n  };\n  const StackRoot = createStyledComponent(style);\n  const Stack = /*#__PURE__*/React.forwardRef(function Grid(inProps, ref) {\n    const themeProps = useThemeProps(inProps);\n    const props = extendSxProp(themeProps); // `color` type conflicts with html color attribute.\n    const {\n      component = 'div',\n      direction = 'column',\n      spacing = 0,\n      divider,\n      children,\n      className,\n      useFlexGap = false,\n      ...other\n    } = props;\n    const ownerState = {\n      direction,\n      spacing,\n      useFlexGap\n    };\n    const classes = useUtilityClasses();\n    return /*#__PURE__*/_jsx(StackRoot, {\n      as: component,\n      ownerState: ownerState,\n      ref: ref,\n      className: clsx(classes.root, className),\n      ...other,\n      children: divider ? joinChildren(children, divider) : children\n    });\n  });\n  process.env.NODE_ENV !== \"production\" ? Stack.propTypes /* remove-proptypes */ = {\n    children: PropTypes.node,\n    direction: PropTypes.oneOfType([PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row']), PropTypes.arrayOf(PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row'])), PropTypes.object]),\n    divider: PropTypes.node,\n    spacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n    sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n  } : void 0;\n  return Stack;\n}","'use client';\n\nimport PropTypes from 'prop-types';\nimport { createStack } from '@mui/system';\nimport styled from \"../styles/styled.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nconst Stack = createStack({\n  createStyledComponent: styled('div', {\n    name: 'MuiStack',\n    slot: 'Root'\n  }),\n  useThemeProps: inProps => useDefaultProps({\n    props: inProps,\n    name: 'MuiStack'\n  })\n});\nprocess.env.NODE_ENV !== \"production\" ? Stack.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * Defines the `flex-direction` style property.\n   * It is applied for all screen sizes.\n   * @default 'column'\n   */\n  direction: PropTypes.oneOfType([PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row']), PropTypes.arrayOf(PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row'])), PropTypes.object]),\n  /**\n   * Add an element between each child.\n   */\n  divider: PropTypes.node,\n  /**\n   * Defines the space between immediate children.\n   * @default 0\n   */\n  spacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n  /**\n   * The system prop, which allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * If `true`, the CSS flexbox `gap` is used instead of applying `margin` to children.\n   *\n   * While CSS `gap` removes the [known limitations](https://mui.com/joy-ui/react-stack/#limitations),\n   * it is not fully supported in some browsers. We recommend checking https://caniuse.com/?search=flex%20gap before using this flag.\n   *\n   * To enable this flag globally, follow the [theme's default props](https://mui.com/material-ui/customization/theme-components/#default-props) configuration.\n   * @default false\n   */\n  useFlexGap: PropTypes.bool\n} : void 0;\nexport default Stack;","import createStyled from \"../createStyled/index.js\";\nconst styled = createStyled();\nexport default styled;","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2\"\n}), 'DragIndicator');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z\"\n}), 'Cancel');","import React, { useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  TextField,\n  IconButton,\n  Button,\n  Box,\n  Typography,\n  Tooltip,\n  TableFooter,\n  TablePagination,\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  Save as SaveIcon,\n  Cancel as CancelIcon,\n  DragIndicator as DragHandleIcon,\n} from '@mui/icons-material';\nimport { EffortColumn, EstimationRow } from '../../types/quoteTemplate';\n\n// Các cột cố định không thể xóa\nconst FIXED_COLUMNS: Omit<EffortColumn, 'id' | 'key' | 'order'>[] = [\n  { name: 'Feature', isFixed: true },\n  { name: 'Detail', isFixed: true },\n  { name: 'Description', isFixed: true },\n  { name: 'Notes', isFixed: true },\n  { name: 'IT Req', isFixed: true, isEffort: true },\n  { name: 'UX/UI', isFixed: true, isEffort: true },\n];\n\ninterface FixedPriceTableProps {\n  rows: EstimationRow[];\n  effortColumns: EffortColumn[];\n  onRowsChange: (rows: EstimationRow[]) => void;\n  onColumnsChange: (columns: EffortColumn[]) => void;\n}\n\nconst FixedPriceTable: React.FC<FixedPriceTableProps> = ({\n  rows = [],\n  effortColumns = [],\n  onRowsChange,\n  onColumnsChange,\n}) => {\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [newColumnName, setNewColumnName] = useState('');\n  const [editingColumn, setEditingColumn] = useState<string | null>(null);\n  const [editColumnName, setEditColumnName] = useState('');\n\n  // Xử lý thay đổi trang\n  const handleChangePage = (event: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  // Xử lý thay đổi số dòng mỗi trang\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Thêm cột effort mới\n  const handleAddColumn = () => {\n    if (!newColumnName.trim()) return;\n    \n    // Đặt thứ tự của cột mới cao hơn các cột cố định nhưng thấp hơn cột hành động\n    // Cột hành động sẽ có thứ tự cao nhất (1000)\n    const newColumn: EffortColumn = {\n      id: `col-${Date.now()}`,\n      name: newColumnName.trim(),\n      key: `effort-${Date.now()}`,\n      order: 900, // Thứ tự cao để đảm bảo nằm sau các cột cố định nhưng trước cột hành động\n      isFixed: false,\n      color: '#ffffff' // Màu mặc định\n    };\n\n    onColumnsChange([...effortColumns, newColumn]);\n    setNewColumnName('');\n  };\n\n  // Bắt đầu chỉnh sửa tên cột\n  const startEditingColumn = (columnId: string, currentName: string) => {\n    setEditingColumn(columnId);\n    setEditColumnName(currentName);\n  };\n\n  // Lưu tên cột đã chỉnh sửa\n  const saveColumnName = (columnId: string) => {\n    const updatedColumns = effortColumns.map(col => \n      col.id === columnId ? { ...col, name: editColumnName } : col\n    );\n    onColumnsChange(updatedColumns);\n    setEditingColumn(null);\n  };\n\n  // Xóa cột\n  const handleDeleteColumn = (columnId: string) => {\n    const columnToDelete = effortColumns.find(col => col.id === columnId);\n    if (!columnToDelete?.isFixed) {\n      const updatedColumns = effortColumns.filter(col => col.id !== columnId);\n      onColumnsChange(updatedColumns);\n      \n      // Cập nhật dữ liệu hàng để xóa cột effort tương ứng\n      const updatedRows = rows.map(row => {\n        const { [columnToDelete?.key || '']: _, ...restEfforts } = row.efforts || {};\n        return { ...row, efforts: restEfforts };\n      });\n      onRowsChange(updatedRows);\n    }\n  };\n\n  // Cập nhật giá trị ô\n  const handleCellChange = (\n    rowId: string,\n    field: string,\n    value: string | number\n  ) => {\n    const updatedRows = rows.map(row => {\n      if (row.id === rowId) {\n        if (field.startsWith('effort-')) {\n          return {\n            ...row,\n            efforts: {\n              ...row.efforts,\n              [field]: Number(value) || 0,\n            },\n          };\n        }\n        return { ...row, [field]: value };\n      }\n      return row;\n    });\n    onRowsChange(updatedRows);\n  };\n\n  // Thêm hàng mới\n  const handleAddRow = () => {\n    const newRow: EstimationRow = {\n      id: `row-${Date.now()}`,\n      feature: '',\n      detail: '',\n      description: '',\n      notes: '',\n      itReq: '',\n      uxUi: '',\n      efforts: {},\n    };\n    onRowsChange([...rows, newRow]);\n  };\n\n  // Xóa hàng\n  const handleDeleteRow = (rowId: string) => {\n    onRowsChange(rows.filter(row => row.id !== rowId));\n  };\n\n  // Tính tổng cho từng cột effort\n  const calculateColumnTotal = (columnKey: string) => {\n    return rows.reduce((sum, row) => {\n      return sum + (Number(row.efforts?.[columnKey]) || 0);\n    }, 0);\n  };\n\n  // Lấy tất cả các cột (cố định + động)\n  const fixedColumnsWithIds = FIXED_COLUMNS.map((col, index) => ({\n    ...col,\n    id: `fixed-${index}`,\n    key: col.name.toLowerCase().replace(/\\s+/g, '-'),\n    order: index, // Các cột cố định có thứ tự thấp (0-5)\n  }));\n  \n  // Chỉ lấy các cột effort không trùng với các cột cố định\n  const nonDuplicateEffortColumns = effortColumns.filter(effortCol => \n    !fixedColumnsWithIds.some(fixedCol => fixedCol.key === effortCol.key)\n  );\n  \n  // Thêm cột Subtotal (days) với thứ tự cao\n  const subtotalColumn = {\n    id: 'subtotal-column',\n    name: 'Subtotal (days)',\n    key: 'subtotal',\n    order: 950, // Thứ tự cao để đảm bảo nằm sau các cột effort nhưng trước cột hành động\n    isFixed: true,\n  };\n  \n  // Sắp xếp các cột theo thứ tự\n  const allColumns = [\n    ...fixedColumnsWithIds,\n    ...nonDuplicateEffortColumns,\n    subtotalColumn, // Thêm cột subtotal\n  ].sort((a, b) => a.order - b.order);\n\n  return (\n    <Box>\n      {/* Thanh công cụ */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n        <Box>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<AddIcon />}\n            onClick={handleAddRow}\n            size=\"small\"\n            sx={{ mr: 1 }}\n          >\n            Thêm dòng\n          </Button>\n        </Box>\n        \n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          <TextField\n            size=\"small\"\n            placeholder=\"Tên cột mới\"\n            value={newColumnName}\n            onChange={(e) => setNewColumnName(e.target.value)}\n            sx={{ mr: 1, minWidth: 150 }}\n          />\n          <Button\n            variant=\"outlined\"\n            startIcon={<AddIcon />}\n            onClick={handleAddColumn}\n            size=\"small\"\n            disabled={!newColumnName.trim()}\n          >\n            Thêm cột\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Bảng dữ liệu */}\n      <TableContainer component={Paper} sx={{ maxHeight: 600, overflow: 'auto' }}>\n        <Table stickyHeader size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell width={50}>#</TableCell>\n              {allColumns.map((column) => (\n                <TableCell key={column.id}>\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                    <DragHandleIcon \n                      sx={{ \n                        mr: 1, \n                        cursor: 'move',\n                        opacity: column.isFixed ? 0.3 : 1,\n                        '&:hover': {\n                          opacity: 1,\n                        },\n                      }} \n                    />\n                    \n                    {editingColumn === column.id ? (\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                        <TextField\n                          value={editColumnName}\n                          onChange={(e) => setEditColumnName(e.target.value)}\n                          size=\"small\"\n                          sx={{ mr: 1 }}\n                        />\n                        <IconButton \n                          size=\"small\" \n                          onClick={() => saveColumnName(column.id)}\n                          color=\"primary\"\n                        >\n                          <SaveIcon fontSize=\"small\" />\n                        </IconButton>\n                        <IconButton \n                          size=\"small\" \n                          onClick={() => setEditingColumn(null)}\n                          color=\"error\"\n                        >\n                          <CancelIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Box>\n                    ) : (\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                        <Typography variant=\"subtitle2\">\n                          {column.name}\n                        </Typography>\n                        {!column.isFixed && (\n                          <Box sx={{ ml: 1 }}>\n                            <IconButton \n                              size=\"small\" \n                              onClick={() => startEditingColumn(column.id, column.name)}\n                              sx={{ p: 0.5 }}\n                            >\n                              <EditIcon fontSize=\"small\" />\n                            </IconButton>\n                            <IconButton \n                              size=\"small\" \n                              onClick={() => handleDeleteColumn(column.id)}\n                              sx={{ p: 0.5 }}\n                              color=\"error\"\n                            >\n                              <DeleteIcon fontSize=\"small\" />\n                            </IconButton>\n                          </Box>\n                        )}\n                      </Box>\n                    )}\n                  </Box>\n                </TableCell>\n              ))}\n              {/* Cột hành động luôn ở cuối */}\n              <TableCell width={80}>Hành động</TableCell>\n            </TableRow>\n          </TableHead>\n          \n          <TableBody>\n            {rows\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map((row, rowIndex) => (\n                <TableRow key={row.id} hover>\n                  <TableCell>{page * rowsPerPage + rowIndex + 1}</TableCell>\n                  \n                  {allColumns.map((column) => {\n                    // Kiểm tra nếu column key là của các cột effort\n                    const isEffortColumn = column.key === 'it-req' || column.key === 'ux/ui' || \n                                         column.key.startsWith('effort-') || \n                                         (column as EffortColumn).isEffort === true;\n                    \n                    // Log ra để kiểm tra key của các cột\n                    console.log('Column key:', column.key, 'isEffort:', isEffortColumn);\n                    \n                    // Kiểm tra nếu là cột subtotal\n                    const isSubtotalColumn = column.key === 'subtotal';\n                    \n                    return (\n                      <TableCell key={`${row.id}-${column.key}`}>\n                        {isEffortColumn ? (\n                          <TextField\n                            type=\"number\"\n                            value={column.key === 'it-req' ? row.itReq || '' : \n                                  column.key === 'ux/ui' ? row.uxUi || '' : \n                                  row.efforts?.[column.key] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              // Xử lý đặc biệt cho các cột IT Req và UX/UI\n                              if (column.key === 'it-req') {\n                                handleCellChange(row.id, 'itReq', value);\n                              } else if (column.key === 'ux/ui') {\n                                handleCellChange(row.id, 'uxUi', value);\n                              } else {\n                                handleCellChange(row.id, column.key, value);\n                              }\n                            }}\n                            size=\"small\"\n                            fullWidth\n                            inputProps={{ min: 0, step: 0.5 }}\n                          />\n                        ) : isSubtotalColumn ? (\n                          // Hiển thị tổng ngày công cho mỗi dòng\n                          <Typography variant=\"body2\" fontWeight=\"bold\">\n                            {Object.keys(row.efforts || {}).reduce((sum, key) => sum + (Number(row.efforts?.[key]) || 0), 0) + \n                             (Number(row.itReq) || 0) + (Number(row.uxUi) || 0)}\n                          </Typography>\n                        ) : (\n                          <TextField\n                            value={row[column.key as keyof EstimationRow] || ''}\n                            onChange={(e) => \n                              handleCellChange(row.id, column.key, e.target.value)\n                            }\n                            size=\"small\"\n                            fullWidth\n                            multiline\n                            maxRows={4}\n                          />\n                        )}\n                      </TableCell>\n                    );\n                  })}\n                  \n                  <TableCell>\n                    <Tooltip title=\"Xóa dòng\">\n                      <IconButton \n                        size=\"small\" \n                        color=\"error\"\n                        onClick={() => handleDeleteRow(row.id)}\n                      >\n                        <DeleteIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Tooltip>\n                  </TableCell>\n                </TableRow>\n              ))}\n          </TableBody>\n          \n          {/* Dòng tổng cộng */}\n          <TableFooter>\n            <TableRow>\n              <TableCell colSpan={FIXED_COLUMNS.length + 1} align=\"right\">\n                <strong>Tổng cộng:</strong>\n              </TableCell>\n              {effortColumns.map((column) => (\n                <TableCell key={`total-${column.key}`}>\n                  <strong>{calculateColumnTotal(column.key)}</strong>\n                </TableCell>\n              ))}\n              {/* Cột Subtotal tổng */}\n              <TableCell>\n                <strong>\n                  {rows.reduce((sum, row) => {\n                    const rowTotal = Object.keys(row.efforts || {}).reduce(\n                      (rowSum, key) => rowSum + (Number(row.efforts?.[key]) || 0), 0\n                    ) + (Number(row.itReq) || 0) + (Number(row.uxUi) || 0);\n                    return sum + rowTotal;\n                  }, 0)}\n                </strong>\n              </TableCell>\n              <TableCell />\n            </TableRow>\n            {/* Thêm dòng Tổng cộng - Theo giai đoạn (ngày công) */}\n            <TableRow sx={{ backgroundColor: '#f5f5f5' }}>\n              <TableCell colSpan={FIXED_COLUMNS.length + effortColumns.length + 1} align=\"right\">\n                <strong>Tổng cộng - Theo giai đoạn (ngày công):</strong>\n              </TableCell>\n              <TableCell>\n                <strong>\n                  {rows.reduce((sum, row) => {\n                    const rowTotal = Object.keys(row.efforts || {}).reduce(\n                      (rowSum, key) => rowSum + (Number(row.efforts?.[key]) || 0), 0\n                    ) + (Number(row.itReq) || 0) + (Number(row.uxUi) || 0);\n                    return sum + rowTotal;\n                  }, 0)}\n                </strong>\n              </TableCell>\n              <TableCell />\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </TableContainer>\n      \n      {/* Phân trang */}\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25, 50]}\n        component=\"div\"\n        count={rows.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n        labelRowsPerPage=\"Số dòng mỗi trang:\"\n        labelDisplayedRows={({ from, to, count }) => \n          `${from}-${to} trong tổng số ${count}`\n        }\n      />\n    </Box>\n  );\n};\n\nexport default FixedPriceTable;\n","import React, { useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  TextField,\n  IconButton,\n  Button,\n  Box,\n  Typography,\n  TableFooter,\n  TablePagination,\n  MenuItem,\n  Select,\n  FormControl,\n  InputLabel,\n  Tooltip,\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n} from '@mui/icons-material';\nimport { TimeAndMaterialRate } from '../../types/quoteTemplate';\n\n// Các vai trò mặc định\nconst DEFAULT_ROLES = [\n  'Project Manager',\n  'Business Analyst',\n  'Developer',\n  'Tester',\n  'UI/UX Designer',\n  'DevOps',\n  'System Architect',\n  'Technical Lead',\n];\n\ninterface TimeAndMaterialTableProps {\n  rates: TimeAndMaterialRate[];\n  onRatesChange: (rates: TimeAndMaterialRate[]) => void;\n}\n\nconst TimeAndMaterialTable: React.FC<TimeAndMaterialTableProps> = ({\n  rates = [],\n  onRatesChange,\n}) => {\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [newRole, setNewRole] = useState('');\n  const [customRole, setCustomRole] = useState('');\n\n  // Xử lý thay đổi trang\n  const handleChangePage = (event: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  // Xử lý thay đổi số dòng mỗi trang\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Thêm dòng mới\n  const handleAddRow = () => {\n    if (!newRole && !customRole) return;\n    \n    const roleToAdd = newRole === 'custom' ? customRole : newRole;\n    \n    // Kiểm tra nếu vai trò đã tồn tại\n    if (rates.some(rate => rate.role.toLowerCase() === roleToAdd.toLowerCase())) {\n      alert('Vai trò này đã tồn tại');\n      return;\n    }\n\n    const newRate: TimeAndMaterialRate = {\n      id: `rate-${Date.now()}`,\n      role: roleToAdd,\n      rate: 0,\n      unit: 'hour',\n      description: ''\n    };\n\n    onRatesChange([...rates, newRate]);\n    setNewRole('');\n    setCustomRole('');\n  };\n\n  // Cập nhật giá trị\n  const handleRateChange = (id: string, field: keyof TimeAndMaterialRate, value: any) => {\n    const updatedRates = rates.map(rate => \n      rate.id === id ? { ...rate, [field]: value } : rate\n    ) as TimeAndMaterialRate[];\n    onRatesChange(updatedRates);\n  };\n\n  // Xóa dòng\n  const handleDeleteRow = (id: string) => {\n    onRatesChange(rates.filter(rate => rate.id !== id));\n  };\n\n  // Tính tổng tiền\n  const calculateTotal = () => {\n    return rates.reduce((sum, rate) => {\n      return sum + (rate.rate || 0);\n    }, 0);\n  };\n\n  // Tính tổng số giờ/ngày\n  const calculateTotalHours = () => {\n    return rates.reduce((sum, rate) => {\n      const hours = rate.unit === 'hour' ? 1 : 8; // 1 ngày = 8 giờ\n      return sum + (rate.rate || 0) * hours;\n    }, 0);\n  };\n\n  return (\n    <Box>\n      {/* Thanh công cụ */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <FormControl variant=\"outlined\" size=\"small\" sx={{ minWidth: 200 }}>\n            <InputLabel>Chọn vai trò</InputLabel>\n            <Select\n              value={newRole}\n              onChange={(e) => setNewRole(e.target.value as string)}\n              label=\"Chọn vai trò\"\n            >\n              <MenuItem value=\"\">\n                <em>Chọn vai trò</em>\n              </MenuItem>\n              {DEFAULT_ROLES.map((role) => (\n                <MenuItem key={role} value={role}>\n                  {role}\n                </MenuItem>\n              ))}\n              <MenuItem value=\"custom\">\n                <em>+ Thêm vai trò khác</em>\n              </MenuItem>\n            </Select>\n          </FormControl>\n\n          {newRole === 'custom' && (\n            <TextField\n              size=\"small\"\n              label=\"Tên vai trò\"\n              value={customRole}\n              onChange={(e) => setCustomRole(e.target.value)}\n              sx={{ minWidth: 200 }}\n            />\n          )}\n\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<AddIcon />}\n            onClick={handleAddRow}\n            disabled={!newRole || (newRole === 'custom' && !customRole.trim())}\n          >\n            Thêm\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Bảng dữ liệu */}\n      <TableContainer component={Paper}>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell width={50}>#</TableCell>\n              <TableCell>Vai trò</TableCell>\n              <TableCell align=\"right\">Số giờ/MD</TableCell>\n              <TableCell>Đơn vị</TableCell>\n              <TableCell align=\"right\">Đơn giá</TableCell>\n              <TableCell align=\"right\">Thành tiền</TableCell>\n              <TableCell width={80}></TableCell>\n            </TableRow>\n          </TableHead>\n          \n          <TableBody>\n            {rates\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map((rate, index) => (\n                <TableRow key={rate.id} hover>\n                  <TableCell>{page * rowsPerPage + index + 1}</TableCell>\n                  \n                  <TableCell>\n                    <TextField\n                      value={rate.role}\n                      onChange={(e) => handleRateChange(rate.id, 'role', e.target.value)}\n                      size=\"small\"\n                      fullWidth\n                    />\n                  </TableCell>\n                  \n                  <TableCell>\n                    <TextField\n                      type=\"number\"\n                      value={rate.rate || ''}\n                      onChange={(e) => handleRateChange(rate.id, 'rate', Number(e.target.value))}\n                      size=\"small\"\n                      fullWidth\n                      inputProps={{ min: 0, step: 0.01 }}\n                    />\n                  </TableCell>\n                  \n                  <TableCell>\n                    <Select\n                      value={rate.unit}\n                      onChange={(e) => handleRateChange(rate.id, 'unit', e.target.value)}\n                      size=\"small\"\n                      fullWidth\n                    >\n                      <MenuItem value=\"hour\">Giờ</MenuItem>\n                      <MenuItem value=\"day\">Ngày công (MD)</MenuItem>\n                    </Select>\n                  </TableCell>\n                  \n                  <TableCell align=\"right\">\n                    {new Intl.NumberFormat('vi-VN', {\n                      style: 'currency',\n                      currency: 'VND',\n                    }).format(rate.rate || 0)}\n                    <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\n                      /{rate.unit === 'hour' ? 'giờ' : 'MD'}\n                    </Typography>\n                  </TableCell>\n                  \n                  <TableCell align=\"right\">\n                    {new Intl.NumberFormat('vi-VN', {\n                      style: 'currency',\n                      currency: 'VND',\n                    }).format(rate.rate * (rate.unit === 'hour' ? 1 : 8) || 0)}\n                    <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\n                      ({rate.unit === 'hour' ? '1 giờ' : '1 MD = 8 giờ'})\n                    </Typography>\n                  </TableCell>\n                  \n                  <TableCell align=\"center\">\n                    <Tooltip title=\"Xóa\">\n                      <IconButton \n                        size=\"small\" \n                        color=\"error\"\n                        onClick={() => handleDeleteRow(rate.id)}\n                      >\n                        <DeleteIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Tooltip>\n                  </TableCell>\n                </TableRow>\n              ))}\n          </TableBody>\n          \n          {/* Tổng cộng */}\n          <TableFooter>\n            <TableRow>\n              <TableCell colSpan={4} align=\"right\">\n                <strong>Tổng cộng:</strong>\n              </TableCell>\n              <TableCell align=\"right\">\n                <strong>\n                  {new Intl.NumberFormat('vi-VN', {\n                    style: 'currency',\n                    currency: 'VND',\n                  }).format(calculateTotal())}\n                </strong>\n              </TableCell>\n              <TableCell align=\"right\">\n                <strong>\n                  {new Intl.NumberFormat('vi-VN', {\n                    style: 'currency',\n                    currency: 'VND',\n                  }).format(calculateTotalHours())}\n                </strong>\n                <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\n                  ({calculateTotalHours()} giờ)\n                </Typography>\n              </TableCell>\n              <TableCell />\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </TableContainer>\n      \n      {/* Phân trang */}\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25, 50]}\n        component=\"div\"\n        count={rates.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n        labelRowsPerPage=\"Số dòng mỗi trang:\"\n        labelDisplayedRows={({ from, to, count }) => \n          `${from}-${to} trong tổng số ${count}`\n        }\n      />\n    </Box>\n  );\n};\n\nexport default TimeAndMaterialTable;\n","import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Typography, \n  Radio, \n  RadioGroup, \n  FormControlLabel, \n  FormControl, \n  FormLabel, \n  Paper,\n  Divider,\n  Alert,\n  Snackbar\n} from '@mui/material';\nimport { \n  EstimationMode, \n  EffortColumn, \n  EstimationRow, \n  TimeAndMaterialRate \n} from '../../types/quoteTemplate';\nimport FixedPriceTable from '../FixedPriceTable';\nimport TimeAndMaterialTable from '../TimeAndMaterialTable';\n\n// Các cột effort mặc định cho chế độ Fix Price\nconst DEFAULT_EFFORT_COLUMNS: EffortColumn[] = [];\n\n// Tỷ giá mặc định cho chế độ Time & Material\nconst DEFAULT_TM_RATES: TimeAndMaterialRate[] = [\n  {\n    id: 'rate-1',\n    role: 'Developer',\n    rate: 50,\n    unit: 'hour',\n    description: 'Senior Developer'\n  },\n  {\n    id: 'rate-2',\n    role: 'Designer',\n    rate: 40,\n    unit: 'hour',\n    description: 'UI/UX Designer'\n  }\n];\n\ninterface EstimationStepProps {\n  mode: EstimationMode;\n  onModeChange: (mode: EstimationMode) => void;\n  onEstimationDataChange?: (data: any) => void;\n  // Dữ liệu requirement từ bước 1\n  initialData?: {\n    rows?: any[];\n  };\n}\n\nconst EstimationStep: React.FC<EstimationStepProps> = ({\n  mode,\n  onModeChange,\n  onEstimationDataChange,\n  initialData,\n}) => {\n  // State cho chế độ Fix Price\n  const [fixedPriceRows, setFixedPriceRows] = useState<EstimationRow[]>([]);\n  const [effortColumns, setEffortColumns] = useState<EffortColumn[]>(DEFAULT_EFFORT_COLUMNS);\n  \n  // State cho chế độ Time & Material\n  const [tmRates, setTmRates] = useState<TimeAndMaterialRate[]>(DEFAULT_TM_RATES);\n  \n  // State thông báo\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success' as 'success' | 'error' | 'info' | 'warning'\n  });\n\n  // Khởi tạo dữ liệu mẫu khi component mount\n  useEffect(() => {\n    // Nếu có dữ liệu ban đầu từ requirement, sử dụng nó\n    if (initialData?.rows && initialData.rows.length > 0 && fixedPriceRows.length === 0) {\n      const mappedRows = initialData.rows.map(item => ({\n        id: `row-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`,\n        feature: item.feature || '',\n        detail: item.detail || '',\n        description: item.description || '',\n        notes: item.note || '',\n        itReq: '',\n        uxUi: '',\n        efforts: {},\n      }));\n      setFixedPriceRows(mappedRows);\n    } \n    // Thêm một dòng trống mặc định cho Fixed Price nếu không có dữ liệu ban đầu\n    else if (fixedPriceRows.length === 0) {\n      setFixedPriceRows([createNewRow()]);\n    }\n  }, [fixedPriceRows.length, initialData]);\n\n  // Tạo một dòng mới cho Fixed Price\n  const createNewRow = (): EstimationRow => ({\n    id: `row-${Date.now()}`,\n    feature: '',\n    detail: '',\n    description: '',\n    notes: '',\n    itReq: '',\n    uxUi: '',\n    efforts: {},\n  });\n\n  // Xử lý thay đổi chế độ\n  const handleModeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newMode = event.target.value as EstimationMode;\n    onModeChange(newMode);\n    \n    // Thông báo khi chuyển chế độ\n    setSnackbar({\n      open: true,\n      message: `Đã chuyển sang chế độ ${newMode === 'fixed' ? 'Fix Price' : 'Time & Material'}`,\n      severity: 'info'\n    });\n  };\n\n  // Xử lý thay đổi dữ liệu Fixed Price\n  const handleFixedPriceDataChange = (rows: EstimationRow[], columns: EffortColumn[]) => {\n    setFixedPriceRows(rows);\n    setEffortColumns(columns);\n    \n    if (onEstimationDataChange) {\n      onEstimationDataChange({\n        mode: 'fixed',\n        rows,\n        columns\n      });\n    }\n  };\n\n  // Xử lý thay đổi dữ liệu Time & Material\n  const handleTimeMaterialDataChange = (rates: TimeAndMaterialRate[]) => {\n    setTmRates(rates);\n    \n    if (onEstimationDataChange) {\n      onEstimationDataChange({\n        mode: 'timeAndMaterial',\n        rates\n      });\n    }\n  };\n\n  // Đóng thông báo\n  const handleCloseSnackbar = () => {\n    setSnackbar({ ...snackbar, open: false });\n  };\n\n  return (\n    <Box sx={{ mt: 3 }}>\n      <Typography variant=\"h6\" gutterBottom>\n        Bảng ước tính\n      </Typography>\n      \n      <Paper elevation={0} sx={{ p: 3, mb: 3, border: '1px solid #e0e0e0', borderRadius: 1 }}>\n        <FormControl component=\"fieldset\" fullWidth>\n          <FormLabel component=\"legend\" sx={{ mb: 2, fontWeight: 'bold', color: 'text.primary' }}>\n            Chọn phương thức ước tính\n          </FormLabel>\n          <RadioGroup\n            row\n            aria-label=\"estimation-mode\"\n            name=\"estimation-mode\"\n            value={mode}\n            onChange={handleModeChange}\n          >\n            <FormControlLabel\n              value=\"fixed\"\n              control={<Radio color=\"primary\" />}\n              label=\"Fix Price\"\n              sx={{ \n                mr: 4,\n                '& .MuiFormControlLabel-label': { fontWeight: 500 }\n              }}\n            />\n            <FormControlLabel\n              value=\"timeAndMaterial\"\n              control={<Radio color=\"primary\" />}\n              label=\"Time & Material\"\n              sx={{ '& .MuiFormControlLabel-label': { fontWeight: 500 } }}\n            />\n          </RadioGroup>\n          \n          <Divider sx={{ my: 2 }} />\n          \n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n            {mode === 'fixed' \n              ? 'Chế độ Fix Price: Tạo bảng ước tính chi tiết với các cột effort tùy chỉnh.'\n              : 'Chế độ Time & Material: Tạo bảng ước tính dựa trên số giờ và đơn giá.'}\n          </Typography>\n        </FormControl>\n      </Paper>\n\n      {/* Hiển thị bảng tương ứng với chế độ đã chọn */}\n      {mode === 'fixed' ? (\n        <FixedPriceTable\n          rows={fixedPriceRows}\n          effortColumns={effortColumns}\n          onRowsChange={(rows) => handleFixedPriceDataChange(rows, effortColumns)}\n          onColumnsChange={(columns) => handleFixedPriceDataChange(fixedPriceRows, columns)}\n        />\n      ) : (\n        <TimeAndMaterialTable\n          rates={tmRates}\n          onRatesChange={handleTimeMaterialDataChange}\n        />\n      )}\n\n      {/* Thông báo */}\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={3000}\n        onClose={handleCloseSnackbar}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n      >\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default EstimationStep;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Button,\n  Typography,\n  TextField,\n  Autocomplete,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Stepper,\n  Step,\n  StepLabel,\n  Paper,\n  Divider,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  FormHelperText,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport {\n  NavigateNext as NextIcon,\n  Save as SaveIcon,\n  Description as TemplateIcon,\n} from '@mui/icons-material';\nimport { QuotationFormProps, Quotation, QuotationItem } from '../../types';\nimport { EstimationMode } from '../../types/quoteTemplate';\nimport EstimationStep from '../EstimationStep/index';\n\nconst QuotationForm: React.FC<QuotationFormProps> = ({\n  open,\n  onClose,\n  onSave,\n  customers,\n  deals,\n  requirements,\n  templates,\n}) => {\n  // Form state\n  const [activeStep, setActiveStep] = useState(0);\n  const [touched, setTouched] = useState<Record<string, boolean>>({});\n  const [estimationMode, setEstimationMode] = useState<EstimationMode>('fixed');\n  const [newQuotation, setNewQuotation] = useState<Partial<Quotation>>({\n    name: '',\n    customer: '',\n    dealId: 0,\n    dealName: '',\n    requirementId: 0,\n    requirementName: '',\n    status: 'draft',\n    createdDate: new Date().toISOString().split('T')[0],\n    note: '',\n    items: [],\n    totalEffort: 0,\n    totalAmount: 0,\n    templateId: '',\n    templateName: '',\n    estimationMode: 'fixed',\n  });\n  \n  // Reset touched state when modal is opened/closed\n  useEffect(() => {\n    if (open) {\n      setTouched({});\n    }\n  }, [open]);\n\n  // Filtered options based on selections\n  const [filteredDeals, setFilteredDeals] = useState(deals);\n  const [filteredRequirements, setFilteredRequirements] = useState(requirements);\n  \n  // Items for estimation table\n  const [estimationItems, setEstimationItems] = useState<QuotationItem[]>([]);\n\n  // Update filtered deals when customer changes\n  useEffect(() => {\n    if (newQuotation.customer) {\n      setFilteredDeals(deals.filter(deal => deal.customer === newQuotation.customer));\n    } else {\n      setFilteredDeals(deals);\n    }\n  }, [newQuotation.customer, deals]);\n\n  // Update filtered requirements when deal changes\n  useEffect(() => {\n    if (newQuotation.dealId) {\n      setFilteredRequirements(requirements.filter(req => req.dealId === newQuotation.dealId));\n    } else {\n      setFilteredRequirements(requirements);\n    }\n  }, [newQuotation.dealId, requirements]);\n\n  // Load requirement features when a requirement is selected\n  useEffect(() => {\n    if (newQuotation.requirementId) {\n      const selectedRequirement = requirements.find(req => req.id === newQuotation.requirementId);\n      if (selectedRequirement && selectedRequirement.features && selectedRequirement.features.length > 0) {\n        console.log('Requirement features found:', selectedRequirement.features);\n        // Convert requirement features to estimation items\n        const items: QuotationItem[] = selectedRequirement.features.map((feature: any, index: number) => ({\n          id: index + 1,\n          feature: feature.feature || '',\n          detail: feature.detail || '',\n          description: feature.description || '',\n          note: feature.notes || feature.note || '',\n          frontendEffort: 0,\n          backendEffort: 0,\n          qcEffort: 0,\n          pmEffort: 0,\n          totalMD: 0,\n          totalMM: 0,\n        }));\n        setEstimationItems(items);\n      } else {\n        console.log('No features found for requirement ID:', newQuotation.requirementId);\n        setEstimationItems([]);\n      }\n    } else {\n      setEstimationItems([]);\n    }\n  }, [newQuotation.requirementId, requirements]);\n\n  const handleNext = () => {\n    setActiveStep((prevStep) => prevStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevStep) => prevStep - 1);\n  };\n\n  const handleCustomerChange = (_: any, newValue: string | null) => {\n    setNewQuotation({\n      ...newQuotation,\n      customer: newValue || '',\n      dealId: 0,\n      dealName: '',\n      requirementId: 0,\n      requirementName: '',\n    });\n  };\n\n  const handleDealChange = (_: any, newValue: { id: number; name: string } | null) => {\n    setNewQuotation({\n      ...newQuotation,\n      dealId: newValue?.id || 0,\n      dealName: newValue?.name || '',\n      requirementId: 0,\n      requirementName: '',\n    });\n  };\n\n  const handleRequirementChange = (_: any, newValue: { id: number; name: string } | null) => {\n    setNewQuotation({\n      ...newQuotation,\n      requirementId: newValue?.id || 0,\n      requirementName: newValue?.name || '',\n    });\n  };\n\n  const handleItemsChange = (updatedItems: QuotationItem[]) => {\n    setEstimationItems(updatedItems);\n    \n    // Calculate totals\n    const totalEffort = updatedItems.reduce((sum, item) => sum + item.totalMD, 0);\n    \n    // Assuming a simple calculation for total amount (e.g., 500,000 VND per MD)\n    const totalAmount = totalEffort * 500000;\n    \n    setNewQuotation({\n      ...newQuotation,\n      totalEffort,\n      totalAmount,\n    });\n  };\n\n  const handleSave = () => {\n    if (newQuotation.name && newQuotation.customer && newQuotation.templateId) {\n      onSave({\n        ...newQuotation as Quotation,\n        items: estimationItems,\n      });\n    }\n  };\n\n\n  \n  const isStepOneValid = () => {\n    return !!(newQuotation.name && newQuotation.customer && newQuotation.dealId && newQuotation.requirementId && newQuotation.templateId);\n  };\n\n  const steps = [\n    'Thông tin báo giá',\n    'Bảng ước tính',\n    'Xem trước báo giá',\n  ];\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"lg\"\n      fullWidth\n    >\n      <DialogTitle>Tạo báo giá mới</DialogTitle>\n      <DialogContent>\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\n          {steps.map((label) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n\n        {activeStep === 0 && (\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>Thông tin cơ bản</Typography>\n            \n            <Box sx={{ mb: 3, border: '1px solid #e0e0e0', borderRadius: 1, p: 2, bgcolor: '#f9f9f9' }}>\n              <Typography variant=\"subtitle2\" gutterBottom sx={{ display: 'flex', alignItems: 'center' }}>\n                <TemplateIcon fontSize=\"small\" sx={{ mr: 1 }} /> \n                Chọn mẫu báo giá\n              </Typography>\n              <FormControl \n                fullWidth \n                margin=\"dense\" \n                required \n                error={touched.templateId && !newQuotation.templateId}\n              >\n                <InputLabel id=\"template-select-label\">Mẫu báo giá</InputLabel>\n                <Select\n                  labelId=\"template-select-label\"\n                  id=\"template-select\"\n                  value={newQuotation.templateId || ''}\n                  label=\"Mẫu báo giá\"\n                  onChange={(e) => {\n                    const templateId = e.target.value;\n                    const selectedTemplate = templates.find(t => t.id === templateId);\n                    setNewQuotation({\n                      ...newQuotation,\n                      templateId: templateId,\n                      templateName: selectedTemplate?.name || '',\n                    });\n                    setTouched(prev => ({ ...prev, templateId: true }));\n                  }}\n                  onBlur={() => setTouched(prev => ({ ...prev, templateId: true }))}\n                  size=\"small\"\n                >\n                  <MenuItem value=\"\">\n                    <em>Chọn mẫu báo giá</em>\n                  </MenuItem>\n                  {templates.map((template) => (\n                    <MenuItem key={template.id} value={template.id}>\n                      {template.name} {template.type === 'internal' ? '(Nội bộ)' : '(Khách hàng)'}\n                    </MenuItem>\n                  ))}\n                </Select>\n                {touched.templateId && !newQuotation.templateId && (\n                  <FormHelperText>Vui lòng chọn mẫu báo giá</FormHelperText>\n                )}\n              </FormControl>\n            </Box>\n            \n            <TextField\n              label=\"Tên báo giá\"\n              fullWidth\n              required\n              value={newQuotation.name || ''}\n              onChange={(e) => setNewQuotation({...newQuotation, name: e.target.value})}\n              margin=\"normal\"\n              size=\"small\"\n              placeholder=\"Nhập tên báo giá\"\n            />\n            <Box sx={{ display: 'flex', gap: 2, mb: 3, flexWrap: 'wrap' }}>\n              <Autocomplete\n                options={customers}\n                value={newQuotation.customer || null}\n                onChange={handleCustomerChange}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    label=\"Khách hàng\"\n                    size=\"small\"\n                    sx={{ minWidth: 250, flex: 1 }}\n                    required\n                  />\n                )}\n                sx={{ minWidth: 250, flex: 1 }}\n              />\n              <Autocomplete\n                options={filteredDeals}\n                getOptionLabel={(option) => option.name}\n                value={newQuotation.dealId ? filteredDeals.find(d => d.id === newQuotation.dealId) || null : null}\n                onChange={handleDealChange}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    label=\"Deal\"\n                    size=\"small\"\n                    sx={{ minWidth: 250, flex: 1 }}\n                    required\n                  />\n                )}\n                sx={{ minWidth: 250, flex: 1 }}\n                disabled={!newQuotation.customer}\n              />\n            </Box>\n            <Box sx={{ mb: 3 }}>\n              <Autocomplete\n                options={filteredRequirements}\n                getOptionLabel={(option) => option.name}\n                value={newQuotation.requirementId ? filteredRequirements.find(r => r.id === newQuotation.requirementId) || null : null}\n                onChange={handleRequirementChange}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    label=\"Requirement\"\n                    size=\"small\"\n                    required\n                  />\n                )}\n                disabled={!newQuotation.dealId}\n              />\n            </Box>\n            <TextField\n              label=\"Trạng thái\"\n              value=\"Draft\"\n              size=\"small\"\n              disabled\n              fullWidth\n              margin=\"normal\"\n            />\n            <TextField\n              label=\"Ghi chú\"\n              multiline\n              rows={4}\n              fullWidth\n              placeholder=\"Nhập ghi chú (nếu có)...\"\n              variant=\"outlined\"\n              sx={{ mb: 2, mt: 2 }}\n              value={newQuotation.note || ''}\n              onChange={(e) => setNewQuotation({...newQuotation, note: e.target.value})}\n            />\n          </Box>\n        )}\n\n        {activeStep === 1 && (\n          <Box>\n            <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>Chọn phương thức ước tính</Typography>\n              <EstimationStep\n                mode={estimationMode as EstimationMode}\n                onModeChange={(newMode) => {\n                  setEstimationMode(newMode);\n                  setNewQuotation(prev => ({ ...prev, estimationMode: newMode }));\n                }}\n                initialData={{\n                  rows: estimationItems\n                }}\n                onEstimationDataChange={(data) => {\n                  if (data.mode === 'fixed') {\n                    const convertedItems = data.rows.map((row: any) => ({\n                      id: row.id,\n                      feature: row.feature || '',\n                      detail: row.detail || '',\n                      description: row.description || '',\n                      note: row.notes || '',\n                      frontendEffort: 0,\n                      backendEffort: 0,\n                      qcEffort: 0,\n                      pmEffort: 0,\n                      totalMD: Object.values(row.efforts || {}).reduce((sum: number, val: any) => sum + (Number(val) || 0), 0),\n                      totalMM: 0,\n                    }));\n                    \n                    setEstimationItems(convertedItems);\n                    handleItemsChange(convertedItems);\n                    \n                    setNewQuotation(prev => ({\n                      ...prev,\n                      estimationMode: 'fixed',\n                      estimationConfig: {\n                        rows: data.rows,\n                        columns: data.columns\n                      }\n                    }));\n                  } else {\n                    const convertedItems = data.rates.map((rate: any) => ({\n                      id: rate.id,\n                      feature: rate.role || '',\n                      detail: rate.description || '',\n                      description: '',\n                      note: '',\n                      frontendEffort: 0,\n                      backendEffort: 0,\n                      qcEffort: 0,\n                      pmEffort: 0,\n                      totalMD: rate.rate || 0,\n                      totalMM: 0,\n                    }));\n                    \n                    setEstimationItems(convertedItems);\n                    handleItemsChange(convertedItems);\n                    \n                    setNewQuotation(prev => ({\n                      ...prev,\n                      estimationMode: 'timeAndMaterial',\n                      estimationConfig: {\n                        rates: data.rates\n                      }\n                    }));\n                  }\n                }}\n              />\n            </Paper>\n          </Box>\n        )}\n\n        {activeStep === 2 && (\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>Xem trước báo giá</Typography>\n            <Paper variant=\"outlined\" sx={{ p: 3 }}>\n              <Typography variant=\"h5\" gutterBottom sx={{ mb: 3, textAlign: 'center', fontWeight: 'bold' }}>\n                BÁO GIÁ DỊCH VỤ\n              </Typography>\n              \n              <Box sx={{ mb: 3 }}>\n                <Typography variant=\"subtitle1\" gutterBottom>Thông tin khách hàng</Typography>\n                <Box sx={{ pl: 2 }}>\n                  <Typography><strong>Tên khách hàng:</strong> {newQuotation.customer}</Typography>\n                  <Typography><strong>Dự án:</strong> {newQuotation.dealName}</Typography>\n                  <Typography><strong>Yêu cầu:</strong> {newQuotation.requirementName}</Typography>\n                </Box>\n              </Box>\n\n              <Box sx={{ mb: 3 }}>\n                <Typography variant=\"subtitle1\" gutterBottom>Chi tiết báo giá</Typography>\n                <TableContainer component={Paper} variant=\"outlined\">\n                  <Table size=\"small\">\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>STT</TableCell>\n                        <TableCell>Hạng mục</TableCell>\n                        <TableCell>Mô tả</TableCell>\n                        <TableCell>Số ngày</TableCell>\n                        <TableCell>Đơn giá</TableCell>\n                        <TableCell>Thành tiền</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {estimationItems.map((item, index) => (\n                        <TableRow key={item.id}>\n                          <TableCell>{index + 1}</TableCell>\n                          <TableCell>{item.feature}</TableCell>\n                          <TableCell>{item.detail}</TableCell>\n                          <TableCell>{item.totalMD}</TableCell>\n                          <TableCell>500,000 VNĐ/ngày</TableCell>\n                          <TableCell>{(item.totalMD * 500000).toLocaleString('vi-VN')} VNĐ</TableCell>\n                        </TableRow>\n                      ))}\n                      <TableRow>\n                        <TableCell colSpan={5} align=\"right\"><strong>Tổng cộng:</strong></TableCell>\n                        <TableCell><strong>{newQuotation.totalAmount?.toLocaleString('vi-VN')} VNĐ</strong></TableCell>\n                      </TableRow>\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              </Box>\n\n              <Box sx={{ mb: 3 }}>\n                <Typography variant=\"subtitle1\" gutterBottom>Ghi chú</Typography>\n                <Typography variant=\"body2\" sx={{ fontStyle: 'italic' }}>\n                  {newQuotation.note || 'Không có ghi chú'}\n                </Typography>\n              </Box>\n            </Paper>\n          </Box>\n        )}\n      </DialogContent>\n      <DialogActions sx={{ p: 2, pt: 3 }}>\n        <Button onClick={onClose}>Hủy</Button>\n        {activeStep > 0 && (\n          <Button onClick={handleBack}>\n            Quay lại\n          </Button>\n        )}\n        {activeStep < 2 ? (\n          <Button \n            variant=\"contained\" \n            onClick={handleNext}\n            endIcon={<NextIcon />}\n            disabled={activeStep === 0 ? !isStepOneValid() : false}\n          >\n            {activeStep === 1 ? 'Xem trước báo giá' : 'Tiếp theo'}\n          </Button>\n        ) : (\n          <Button \n            variant=\"contained\" \n            color=\"primary\" \n            onClick={handleSave}\n            startIcon={<SaveIcon />}\n          >\n            Lưu báo giá\n          </Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default QuotationForm;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TextField,\n  IconButton,\n  Button,\n  Typography,\n  Tooltip,\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n} from '@mui/icons-material';\nimport { EstimationTableProps, QuotationItem } from '../../types';\n\nconst EstimationTable: React.FC<EstimationTableProps> = ({\n  items,\n  onItemsChange,\n  readOnly = false,\n  disableFeatureFields = false,\n}) => {\n  const [tableItems, setTableItems] = useState<QuotationItem[]>(items);\n\n  useEffect(() => {\n    setTableItems(items);\n  }, [items]);\n\n  const handleValueChange = (id: number, field: keyof QuotationItem, value: any) => {\n    const updatedItems = tableItems.map(item => {\n      if (item.id === id) {\n        const updatedItem = { ...item, [field]: value };\n        \n        // Recalculate totals if effort fields change\n        if (['frontendEffort', 'backendEffort', 'qcEffort', 'pmEffort'].includes(field)) {\n          const fe = field === 'frontendEffort' ? Number(value) || 0 : updatedItem.frontendEffort;\n          const be = field === 'backendEffort' ? Number(value) || 0 : updatedItem.backendEffort;\n          const qc = field === 'qcEffort' ? Number(value) || 0 : updatedItem.qcEffort;\n          const pm = field === 'pmEffort' ? Number(value) || 0 : updatedItem.pmEffort;\n          \n          const totalMD = fe + be + qc + pm;\n          const totalMM = totalMD / 20; // Assuming 20 working days per month\n          \n          return {\n            ...updatedItem,\n            totalMD,\n            totalMM,\n          };\n        }\n        \n        return updatedItem;\n      }\n      return item;\n    });\n    \n    setTableItems(updatedItems);\n    onItemsChange(updatedItems);\n  };\n\n  const handleAddRow = () => {\n    const newId = tableItems.length > 0 ? Math.max(...tableItems.map(item => item.id)) + 1 : 1;\n    const newItem: QuotationItem = {\n      id: newId,\n      feature: '',\n      detail: '',\n      description: '',\n      note: '',\n      frontendEffort: 0,\n      backendEffort: 0,\n      qcEffort: 0,\n      pmEffort: 0,\n      totalMD: 0,\n      totalMM: 0,\n    };\n    \n    const updatedItems = [...tableItems, newItem];\n    setTableItems(updatedItems);\n    onItemsChange(updatedItems);\n  };\n\n  const handleDeleteRow = (id: number) => {\n    const updatedItems = tableItems.filter(item => item.id !== id);\n    setTableItems(updatedItems);\n    onItemsChange(updatedItems);\n  };\n\n  // Calculate totals\n  const totalFE = tableItems.reduce((sum, item) => sum + item.frontendEffort, 0);\n  const totalBE = tableItems.reduce((sum, item) => sum + item.backendEffort, 0);\n  const totalQC = tableItems.reduce((sum, item) => sum + item.qcEffort, 0);\n  const totalPM = tableItems.reduce((sum, item) => sum + item.pmEffort, 0);\n  const totalMD = tableItems.reduce((sum, item) => sum + item.totalMD, 0);\n  const totalMM = tableItems.reduce((sum, item) => sum + item.totalMM, 0);\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2, alignItems: 'center' }}>\n        <Typography variant=\"h6\">Chi tiết ước tính</Typography>\n        {!readOnly && (\n          <Button\n            variant=\"outlined\"\n            startIcon={<AddIcon />}\n            onClick={handleAddRow}\n            size=\"small\"\n          >\n            Thêm dòng\n          </Button>\n        )}\n      </Box>\n      \n      {/* Sử dụng cấu trúc bảng có thể cuộn ngang với các cột cố định chiều rộng */}\n      <Box sx={{ width: '100%', overflow: 'hidden' }}>\n        <TableContainer \n          component={Paper} \n          variant=\"outlined\"\n          sx={{ \n            maxWidth: '100%',\n            overflowX: 'auto',\n          }}\n        >\n          <Table size=\"small\" sx={{ tableLayout: 'fixed' }}>\n            <TableHead>\n              <TableRow>\n                <TableCell width=\"50px\" sx={{ position: 'sticky', left: 0, backgroundColor: '#fff', zIndex: 1 }}>STT</TableCell>\n                <TableCell width=\"150px\" sx={{ position: 'sticky', left: '50px', backgroundColor: '#fff', zIndex: 1 }}>Feature</TableCell>\n                <TableCell width=\"200px\" sx={{ position: 'sticky', left: '200px', backgroundColor: '#fff', zIndex: 1 }}>Chi tiết</TableCell>\n                <TableCell width=\"250px\" sx={{ position: 'sticky', left: '400px', backgroundColor: '#fff', zIndex: 1 }}>Mô tả</TableCell>\n                <TableCell width=\"200px\" sx={{ position: 'sticky', left: '650px', backgroundColor: '#fff', zIndex: 1 }}>Ghi chú</TableCell>\n                <TableCell align=\"right\" width=\"80px\">FE (MD)</TableCell>\n                <TableCell align=\"right\" width=\"80px\">BE (MD)</TableCell>\n                <TableCell align=\"right\" width=\"80px\">QC (MD)</TableCell>\n                <TableCell align=\"right\" width=\"80px\">PM (MD)</TableCell>\n                <TableCell align=\"right\" width=\"80px\">Tổng MD</TableCell>\n                <TableCell align=\"right\" width=\"80px\">Tổng MM</TableCell>\n                {!readOnly && <TableCell align=\"center\" width=\"80px\">Hành động</TableCell>}\n              </TableRow>\n            </TableHead>\n          <TableBody>\n            {tableItems.map((item, index) => (\n              <TableRow key={item.id}>\n                <TableCell sx={{ position: 'sticky', left: 0, backgroundColor: '#fff', zIndex: 1 }}>{index + 1}</TableCell>\n                <TableCell sx={{ position: 'sticky', left: '50px', backgroundColor: '#fff', zIndex: 1 }}>\n                  {readOnly ? (\n                    <Tooltip title={item.feature} arrow placement=\"top\">\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\n                        {item.feature}\n                      </div>\n                    </Tooltip>\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      value={item.feature}\n                      onChange={(e) => handleValueChange(item.id, 'feature', e.target.value)}\n                      fullWidth\n                      multiline\n                      maxRows={3}\n                      disabled={disableFeatureFields}\n                    />\n                  )}\n                </TableCell>\n                <TableCell sx={{ position: 'sticky', left: '200px', backgroundColor: '#fff', zIndex: 1 }}>\n                  {readOnly ? (\n                    <Tooltip title={item.detail} arrow placement=\"top\">\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\n                        {item.detail}\n                      </div>\n                    </Tooltip>\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      value={item.detail}\n                      onChange={(e) => handleValueChange(item.id, 'detail', e.target.value)}\n                      fullWidth\n                      multiline\n                      maxRows={3}\n                      disabled={disableFeatureFields}\n                    />\n                  )}\n                </TableCell>\n                <TableCell sx={{ position: 'sticky', left: '400px', backgroundColor: '#fff', zIndex: 1 }}>\n                  {readOnly ? (\n                    <Tooltip title={item.description} arrow placement=\"top\">\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\n                        {item.description}\n                      </div>\n                    </Tooltip>\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      value={item.description}\n                      onChange={(e) => handleValueChange(item.id, 'description', e.target.value)}\n                      fullWidth\n                      multiline\n                      maxRows={3}\n                      disabled={disableFeatureFields}\n                    />\n                  )}\n                </TableCell>\n                <TableCell sx={{ position: 'sticky', left: '650px', backgroundColor: '#fff', zIndex: 1 }}>\n                  {readOnly ? (\n                    <Tooltip title={item.note} arrow placement=\"top\">\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\n                        {item.note}\n                      </div>\n                    </Tooltip>\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      value={item.note}\n                      onChange={(e) => handleValueChange(item.id, 'note', e.target.value)}\n                      fullWidth\n                      multiline\n                      maxRows={3}\n                      disabled={disableFeatureFields}\n                    />\n                  )}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {readOnly ? (\n                    item.frontendEffort\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      type=\"number\"\n                      value={item.frontendEffort}\n                      onChange={(e) => handleValueChange(item.id, 'frontendEffort', Number(e.target.value))}\n                      inputProps={{ min: 0 }}\n                      sx={{ \n                        width: '50px',\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\n                          '-webkit-appearance': 'none',\n                          margin: 0,\n                        },\n                        '& input[type=number]': {\n                          '-moz-appearance': 'textfield',\n                        },\n                      }}\n                    />\n                  )}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {readOnly ? (\n                    item.backendEffort\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      type=\"number\"\n                      value={item.backendEffort}\n                      onChange={(e) => handleValueChange(item.id, 'backendEffort', Number(e.target.value))}\n                      inputProps={{ min: 0 }}\n                      sx={{ \n                        width: '50px',\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\n                          '-webkit-appearance': 'none',\n                          margin: 0,\n                        },\n                        '& input[type=number]': {\n                          '-moz-appearance': 'textfield',\n                        },\n                      }}\n                    />\n                  )}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {readOnly ? (\n                    item.qcEffort\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      type=\"number\"\n                      value={item.qcEffort}\n                      onChange={(e) => handleValueChange(item.id, 'qcEffort', Number(e.target.value))}\n                      inputProps={{ min: 0 }}\n                      sx={{ \n                        width: '50px',\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\n                          '-webkit-appearance': 'none',\n                          margin: 0,\n                        },\n                        '& input[type=number]': {\n                          '-moz-appearance': 'textfield',\n                        },\n                      }}\n                    />\n                  )}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {readOnly ? (\n                    item.pmEffort\n                  ) : (\n                    <TextField\n                      variant=\"outlined\"\n                      size=\"small\"\n                      type=\"number\"\n                      value={item.pmEffort}\n                      onChange={(e) => handleValueChange(item.id, 'pmEffort', Number(e.target.value))}\n                      inputProps={{ min: 0 }}\n                      sx={{ \n                        width: '50px',\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\n                          '-webkit-appearance': 'none',\n                          margin: 0,\n                        },\n                        '& input[type=number]': {\n                          '-moz-appearance': 'textfield',\n                        },\n                      }}\n                    />\n                  )}\n                </TableCell>\n                <TableCell align=\"right\">\n                  <strong>{item.totalMD.toFixed(1)}</strong>\n                </TableCell>\n                <TableCell align=\"right\">\n                  <strong>{item.totalMM.toFixed(2)}</strong>\n                </TableCell>\n                {!readOnly && (\n                  <TableCell align=\"center\">\n                    <IconButton \n                      size=\"small\" \n                      color=\"error\" \n                      onClick={() => handleDeleteRow(item.id)}\n                      disabled={tableItems.length <= 1}\n                    >\n                      <DeleteIcon fontSize=\"small\" />\n                    </IconButton>\n                  </TableCell>\n                )}\n              </TableRow>\n            ))}\n            \n            {/* Totals row */}\n            <TableRow sx={{ backgroundColor: 'action.hover' }}>\n              <TableCell sx={{ position: 'sticky', left: 0, backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\n              <TableCell sx={{ position: 'sticky', left: '50px', backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\n              <TableCell sx={{ position: 'sticky', left: '200px', backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\n              <TableCell sx={{ position: 'sticky', left: '400px', backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\n              <TableCell sx={{ position: 'sticky', left: '650px', backgroundColor: '#f5f5f5', zIndex: 1 }} align=\"right\">\n                <strong>Tổng</strong>\n              </TableCell>\n              <TableCell align=\"right\"><strong>{totalFE.toFixed(1)}</strong></TableCell>\n              <TableCell align=\"right\"><strong>{totalBE.toFixed(1)}</strong></TableCell>\n              <TableCell align=\"right\"><strong>{totalQC.toFixed(1)}</strong></TableCell>\n              <TableCell align=\"right\"><strong>{totalPM.toFixed(1)}</strong></TableCell>\n              <TableCell align=\"right\"><strong>{totalMD.toFixed(1)}</strong></TableCell>\n              <TableCell align=\"right\"><strong>{totalMM.toFixed(2)}</strong></TableCell>\n              {!readOnly && <TableCell />}\n            </TableRow>\n          </TableBody>\n          </Table>\n        </TableContainer>\n      </Box>\n      \n      <Box sx={{ mt: 2, display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\n        <Typography variant=\"body2\">\n          <strong>Tổng MD:</strong> {totalMD.toFixed(1)}\n        </Typography>\n        <Typography variant=\"body2\">\n          <strong>Tổng MM:</strong> {totalMM.toFixed(2)}\n        </Typography>\n        <Typography variant=\"body2\">\n          <strong>Tổng tiền:</strong> {new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(totalMD * 500000)}\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default EstimationTable;\n","import React from 'react';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Typography,\n  Paper,\n  Grid,\n  Chip,\n  Divider,\n} from '@mui/material';\nimport {\n  PictureAsPdf as PdfIcon,\n  Email as EmailIcon,\n  Edit as EditIcon,\n} from '@mui/icons-material';\nimport { QuotationDetailProps, QuotationStatus } from '../../types';\nimport EstimationTable from '../EstimationTable';\n\nconst QuotationDetail: React.FC<QuotationDetailProps> = ({\n  open,\n  onClose,\n  quotation,\n}) => {\n  if (!quotation) return null;\n\n  const getStatusChip = (status: QuotationStatus) => {\n    const statusMap: Record<QuotationStatus, { label: string; color: 'default' | 'info' | 'success' | 'error' }> = {\n      draft: { label: 'Draft', color: 'default' },\n      sent: { label: 'Đã gửi', color: 'info' },\n      approved: { label: 'Đã duyệt', color: 'success' },\n      rejected: { label: 'Từ chối', color: 'error' },\n    };\n\n    const statusInfo = statusMap[status];\n    return (\n      <Chip \n        label={statusInfo.label} \n        color={statusInfo.color}\n        size=\"small\"\n      />\n    );\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"lg\"\n      fullWidth\n    >\n      <DialogTitle>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <Typography variant=\"h6\">Chi tiết báo giá</Typography>\n          {getStatusChip(quotation.status)}\n        </Box>\n      </DialogTitle>\n      <DialogContent>\n        <Paper variant=\"outlined\" sx={{ p: 3, mb: 3 }}>\n          <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main' }}>\n            Thông tin cơ bản\n          </Typography>\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 3 }}>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Tên báo giá</Typography>\n              <Typography variant=\"body1\" sx={{ fontWeight: 'medium' }}>{quotation.name}</Typography>\n            </Box>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Khách hàng</Typography>\n              <Typography variant=\"body1\">{quotation.customer}</Typography>\n            </Box>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Deal</Typography>\n              <Typography variant=\"body1\">{quotation.dealName}</Typography>\n            </Box>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Requirement</Typography>\n              <Typography variant=\"body1\">{quotation.requirementName}</Typography>\n            </Box>\n          </Box>\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 3, mt: 3 }}>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Ngày tạo</Typography>\n              <Typography variant=\"body1\">{quotation.createdDate}</Typography>\n            </Box>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Tổng Effort</Typography>\n              <Typography variant=\"body1\">{quotation.totalEffort} MD</Typography>\n            </Box>\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">Tổng tiền</Typography>\n              <Typography variant=\"body1\" sx={{ fontWeight: 'bold', color: 'primary.main' }}>\n                {formatCurrency(quotation.totalAmount)}\n              </Typography>\n            </Box>\n          </Box>\n        </Paper>\n\n        {quotation.note && (\n          <Paper variant=\"outlined\" sx={{ p: 3, mb: 3 }}>\n            <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main' }}>\n              Ghi chú\n            </Typography>\n            <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\n              {quotation.note}\n            </Typography>\n          </Paper>\n        )}\n\n        <Divider sx={{ my: 3 }} />\n\n        <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main', mb: 2 }}>\n          Chi tiết ước tính\n        </Typography>\n        {quotation.items && quotation.items.length > 0 ? (\n          <EstimationTable \n            items={quotation.items} \n            onItemsChange={() => {}} \n            readOnly={true} \n          />\n        ) : (\n          <Paper variant=\"outlined\" sx={{ p: 2 }}>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Chưa có dữ liệu ước tính.\n            </Typography>\n          </Paper>\n        )}\n\n        {quotation.executiveSummary && (\n          <>\n            <Divider sx={{ my: 3 }} />\n            <Paper variant=\"outlined\" sx={{ p: 3, mb: 3 }}>\n              <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main' }}>\n                Tóm tắt điều hành\n              </Typography>\n              <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\n                {quotation.executiveSummary}\n              </Typography>\n            </Paper>\n          </>\n        )}\n      </DialogContent>\n      <DialogActions sx={{ p: 2 }}>\n        <Button onClick={onClose}>Đóng</Button>\n        <Button \n          startIcon={<EditIcon />} \n          variant=\"outlined\"\n          onClick={() => console.log('Edit quotation')}\n        >\n          Chỉnh sửa\n        </Button>\n        <Button \n          startIcon={<PdfIcon />} \n          variant=\"outlined\" \n          color=\"secondary\"\n          onClick={() => console.log('Download PDF')}\n        >\n          Tải PDF\n        </Button>\n        <Button \n          startIcon={<EmailIcon />} \n          variant=\"contained\" \n          color=\"primary\"\n          onClick={() => console.log('Send email')}\n        >\n          Gửi Email\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default QuotationDetail;\n","import React, { useState, useEffect } from 'react';\nimport { PdfPageEditor } from '../../../../components/PdfPageEditor';\nimport { \n  Button, \n  Dialog, \n  DialogActions, \n  DialogContent, \n  DialogTitle, \n  Typography,\n  Box \n} from '@mui/material';\nimport { Save as SaveIcon } from '@mui/icons-material';\nimport { QuotationPreviewProps } from '../../types';\n\nconst QuotationPreview: React.FC<QuotationPreviewProps> = ({\n  open,\n  onClose,\n  quotation,\n  onSaveDraft,\n  onExportPdf,\n}) => {\n  const [pages, setPages] = useState<string[]>(['']);\n\n  useEffect(() => {\n    if (quotation) {\n      const customPages = (quotation as any).pages;\n      if (customPages && Array.isArray(customPages) && customPages.length > 0) {\n        setPages(customPages);\n      } else {\n        setPages([\n          `\n          <div style=\"padding: 20mm;\">\n            <h1 style=\"text-align: center; margin-bottom: 30px;\">BÁO GIÁ DỊCH VỤ</h1>\n            <div style=\"display: flex; justify-content: space-between; margin-bottom: 20px;\">\n              <div>\n                <p><strong>Khách hàng:</strong> ${quotation.customer || 'Quý khách hàng'}</p>\n                <p><strong>Dự án:</strong> ${quotation.name || 'Dự án phần mềm'}</p>\n              </div>\n              <div style=\"text-align: right;\">\n                <p><strong>Mã báo giá:</strong> ${quotation.id || 'N/A'}</p>\n                <p><strong>Ngày tạo:</strong> ${new Date(quotation.createdDate || new Date()).toLocaleDateString('vi-VN')}</p>\n              </div>\n            </div>\n            \n            <!-- Quotation items table -->\n            <div style=\"margin: 20px 0;\">\n              <h3>CHI TIẾT DỊCH VỤ</h3>\n              <table style=\"width: 100%; border-collapse: collapse; margin: 15px 0;\">\n                <thead>\n                  <tr style=\"background-color: #f5f5f5;\">\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">STT</th>\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Mô tả công việc</th>\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">Số ngày công</th>\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">Đơn giá (VND)</th>\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">Thành tiền (VND)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${(quotation.items || []).map((item, index) => {\n                    const qcEffort = (item as any).qcEffort || 0;\n                    const rate = (item as any).rate || 0;\n                    const total = qcEffort * rate;\n                    \n                    return `\n                      <tr>\n                        <td style=\"border: 1px solid #ddd; padding: 8px;\">${index + 1}</td>\n                        <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.description || ''}</td>\n                        <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${qcEffort}</td>\n                        <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${rate.toLocaleString('vi-VN')}</td>\n                        <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${total.toLocaleString('vi-VN')}</td>\n                      </tr>\n                    `;\n                  }).join('')}\n                  <tr>\n                    <td colspan=\"4\" style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\"><strong>Tổng cộng:</strong></td>\n                    <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right; font-weight: bold;\">\n                      ${(quotation.items || []).reduce((sum, item) => {\n                        const qcEffort = (item as any).qcEffort || 0;\n                        const rate = (item as any).rate || 0;\n                        return sum + (qcEffort * rate);\n                      }, 0).toLocaleString('vi-VN')} VND\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            \n            <div style=\"margin-top: 30px;\">\n              <div style=\"margin-bottom: 20px;\">\n                <h3>ĐIỀU KHOẢN THANH TOÁN</h3>\n                <div>${(quotation as any).paymentTerms || 'Thanh toán 100% khi ký hợp đồng.'}</div>\n              </div>\n              <div style=\"margin-top: 60px; display: flex; justify-content: space-between;\">\n                <div style=\"text-align: center; width: 50%;\">\n                  <p><strong>ĐẠI DIỆN BÊN BÁN</strong></p>\n                  <p style=\"font-style: italic; margin-top: 50px;\">(Ký, ghi rõ họ tên)</p>\n                </div>\n                <div style=\"text-align: center; width: 50%;\">\n                  <p><strong>ĐẠI DIỆN BÊN MUA</strong></p>\n                  <p style=\"font-style: italic; margin-top: 50px;\">(Ký, ghi rõ họ tên)</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          `\n        ]);\n      }\n    }\n  }, [quotation]);\n\n  const handleSave = (updatedPages: string[]) => {\n    setPages(updatedPages);\n  };\n\n  const handleSaveDraft = () => {\n    if (onSaveDraft && quotation) {\n      // Create an updated quotation with the pages\n      const updatedQuotation = {\n        ...quotation,\n        // Add pages to the quotation data\n        ...(pages.length > 0 && { pages })\n      };\n      onSaveDraft(updatedQuotation);\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"xl\"\n      fullWidth\n      sx={{ '& .MuiDialog-paper': { maxWidth: '95%', height: '95vh' } }}\n    >\n      <DialogTitle>\n        <Typography variant=\"h6\">Xem trước và chỉnh sửa báo giá</Typography>\n      </DialogTitle>\n      <DialogContent sx={{ p: 0, display: 'flex', flexDirection: 'column', height: '100%' }}>\n        {quotation ? (\n          <PdfPageEditor \n            initialContent={pages}\n            onSave={handleSave}\n            onExportPdf={() => onExportPdf && onExportPdf(quotation)}\n          />\n        ) : (\n          <Box sx={{ p: 3, textAlign: 'center' }}>\n            <Typography>Đang tải dữ liệu báo giá...</Typography>\n          </Box>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"inherit\">\n          Đóng\n        </Button>\n        <Button \n          onClick={handleSaveDraft} \n          variant=\"contained\" \n          color=\"primary\"\n          startIcon={<SaveIcon />}\n          disabled={!quotation}\n        >\n          Lưu nháp\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default QuotationPreview;\n","import React from 'react';\nimport {\n  TableContainer,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  TablePagination,\n  Paper,\n  IconButton,\n  Chip,\n} from '@mui/material';\nimport {\n  Visibility as ViewIcon,\n  Email as EmailIcon,\n  PictureAsPdf as PdfIcon,\n} from '@mui/icons-material';\nimport { QuotationListProps, Quotation, QuotationStatus } from '../../types';\n\nconst QuotationList: React.FC<QuotationListProps> = ({\n  quotations,\n  page,\n  rowsPerPage,\n  totalCount,\n  onPageChange,\n  onRowsPerPageChange,\n  onViewDetail,\n  onDownloadPdf,\n  onSendEmail,\n}) => {\n  // Helper functions\n  const getStatusChip = (status: QuotationStatus) => {\n    const statusMap: Record<QuotationStatus, { label: string; color: 'default' | 'info' | 'success' | 'error' }> = {\n      draft: { label: 'Draft', color: 'default' },\n      sent: { label: 'Đã gửi', color: 'info' },\n      approved: { label: 'Đã duyệt', color: 'success' },\n      rejected: { label: 'Từ chối', color: 'error' },\n    };\n\n    const statusInfo = statusMap[status];\n    return (\n      <Chip \n        label={statusInfo.label} \n        color={statusInfo.color}\n        size=\"small\"\n      />\n    );\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);\n  };\n\n  return (\n    <>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Tên báo giá</TableCell>\n              <TableCell>Khách hàng</TableCell>\n              <TableCell>Deal</TableCell>\n              <TableCell>Trạng thái</TableCell>\n              <TableCell>Ngày tạo</TableCell>\n              <TableCell align=\"right\">Tổng Effort (MD)</TableCell>\n              <TableCell align=\"right\">Tổng tiền</TableCell>\n              <TableCell align=\"center\">Hành động</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {quotations.map((quotation: Quotation) => (\n              <TableRow key={quotation.id}>\n                <TableCell>{quotation.name}</TableCell>\n                <TableCell>{quotation.customer}</TableCell>\n                <TableCell>{quotation.dealName}</TableCell>\n                <TableCell>{getStatusChip(quotation.status)}</TableCell>\n                <TableCell>{quotation.createdDate}</TableCell>\n                <TableCell align=\"right\">{quotation.totalEffort}</TableCell>\n                <TableCell align=\"right\">{formatCurrency(quotation.totalAmount)}</TableCell>\n                <TableCell align=\"center\">\n                  <IconButton \n                    size=\"small\" \n                    color=\"primary\" \n                    onClick={() => onViewDetail(quotation.id)}\n                    title=\"Xem chi tiết\"\n                  >\n                    <ViewIcon fontSize=\"small\" />\n                  </IconButton>\n                  <IconButton \n                    size=\"small\" \n                    color=\"secondary\" \n                    onClick={() => onDownloadPdf(quotation.id)}\n                    title=\"Tải PDF\"\n                  >\n                    <PdfIcon fontSize=\"small\" />\n                  </IconButton>\n                  <IconButton \n                    size=\"small\" \n                    color=\"info\" \n                    onClick={() => onSendEmail(quotation.id)}\n                    title=\"Gửi Email\"\n                  >\n                    <EmailIcon fontSize=\"small\" />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n            {quotations.length === 0 && (\n              <TableRow>\n                <TableCell colSpan={8} align=\"center\">\n                  Không có báo giá nào\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n        <TablePagination\n          component=\"div\"\n          count={totalCount}\n          page={page}\n          onPageChange={(_, newPage) => onPageChange(_, newPage)}\n          rowsPerPage={rowsPerPage}\n          onRowsPerPageChange={(e: React.ChangeEvent<HTMLInputElement>) => onRowsPerPageChange(e)}\n          rowsPerPageOptions={[5, 10, 25]}\n          labelRowsPerPage=\"Số hàng mỗi trang:\"\n        />\n      </TableContainer>\n    </>\n  );\n};\n\nexport default QuotationList;\n","import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Button,\n  Box,\n  Typography,\n  IconButton,\n} from '@mui/material';\nimport { Close as CloseIcon, Visibility as PreviewIcon, Send as SendIcon } from '@mui/icons-material';\n\ninterface EmailQuotationDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSend: (emailData: {\n    to: string;\n    cc: string;\n    subject: string;\n    content: string;\n  }) => void;\n  customerName: string;\n  serviceName: string;\n  responsiblePerson: string;\n  pdfFileName: string;\n}\n\nconst EmailQuotationDialog: React.FC<EmailQuotationDialogProps> = ({\n  open,\n  onClose,\n  onSend,\n  customerName,\n  serviceName,\n  responsiblePerson,\n  pdfFileName,\n}) => {\n  const [emailData, setEmailData] = useState({\n    to: '',\n    cc: '',\n    subject: `Báo giá dịch vụ ${serviceName}`,\n    content: `Kính gửi Anh/Chị ${customerName || 'Quý khách'},\n\nInnotech Vietnam xin gửi Anh/Chị báo giá cho dịch vụ ${serviceName || 'dịch vụ'} như đính kèm.\n\nNếu cần thêm thông tin, xin vui lòng liên hệ chúng tôi.\n\nTrân trọng,  \n${responsiblePerson || 'Đội ngũ Innotech Vietnam'}`,\n  });\n\n  const handleChange = (field: string) => (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setEmailData(prev => ({\n      ...prev,\n      [field]: e.target.value,\n    }));\n  };\n\n  const handleSend = () => {\n    onSend(emailData);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"h6\">Gửi báo giá cho khách hàng</Typography>\n          <IconButton onClick={onClose} size=\"small\">\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      <DialogContent dividers>\n        <Box mb={3}>\n          <TextField\n            fullWidth\n            label=\"Đến (Email)\"\n            value={emailData.to}\n            onChange={handleChange('to')}\n            margin=\"normal\"\n            variant=\"outlined\"\n          />\n          \n          <TextField\n            fullWidth\n            label=\"CC (Tùy chọn)\"\n            value={emailData.cc}\n            onChange={handleChange('cc')}\n            margin=\"normal\"\n            variant=\"outlined\"\n          />\n          \n          <TextField\n            fullWidth\n            label=\"Tiêu đề\"\n            value={emailData.subject}\n            onChange={handleChange('subject')}\n            margin=\"normal\"\n            variant=\"outlined\"\n          />\n          \n          <Box mt={2} mb={2} display=\"flex\" alignItems=\"center\">\n            <Typography variant=\"body1\" sx={{ mr: 2 }}>\n              File đính kèm: {pdfFileName}\n            </Typography>\n            <IconButton size=\"small\" onClick={() => window.open(`/preview/${pdfFileName}`, '_blank')}>\n              <PreviewIcon />\n            </IconButton>\n          </Box>\n          \n          <TextField\n            fullWidth\n            label=\"Nội dung email\"\n            value={emailData.content}\n            onChange={handleChange('content')}\n            margin=\"normal\"\n            variant=\"outlined\"\n            multiline\n            rows={8}\n          />\n        </Box>\n      </DialogContent>\n      <DialogActions sx={{ p: 2 }}>\n        <Button onClick={onClose}>Hủy</Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<SendIcon />}\n          onClick={handleSend}\n          disabled={!emailData.to}\n        >\n          Gửi email\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default EmailQuotationDialog;\n","import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  Tooltip,\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Visibility as VisibilityIcon,\n  Delete as DeleteIcon,\n  FileDownload as FileDownloadIcon,\n} from '@mui/icons-material';\nimport { QuoteTemplate } from '../../types/quoteTemplate';\n\ninterface QuotationTemplatesProps {\n  templates: QuoteTemplate[];\n  loading: boolean;\n  onUploadClick: () => void;\n  onViewTemplate?: (templateId: string) => void;\n  onDeleteTemplate?: (templateId: string) => void;\n  onDownloadTemplate?: (templateId: string) => void;\n}\n\nconst QuotationTemplates: React.FC<QuotationTemplatesProps> = ({\n  templates,\n  loading,\n  onUploadClick,\n  onViewTemplate,\n  onDeleteTemplate,\n  onDownloadTemplate,\n}) => {\n  return (\n    <Paper sx={{ p: 3 }}>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n        <Typography variant=\"h6\">Mẫu báo giá</Typography>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={onUploadClick}\n        >\n          Tải lên mẫu báo giá\n        </Button>\n      </Box>\n\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Tên mẫu</TableCell>\n              <TableCell>Mô tả</TableCell>\n              <TableCell>Loại</TableCell>\n              <TableCell>Trạng thái</TableCell>\n              <TableCell>Ngày tạo</TableCell>\n              <TableCell>Người tạo</TableCell>\n              <TableCell>Số trường</TableCell>\n              <TableCell align=\"center\">Thao tác</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {loading ? (\n              <TableRow>\n                <TableCell colSpan={8} align=\"center\">\n                  Đang tải...\n                </TableCell>\n              </TableRow>\n            ) : templates.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={8} align=\"center\">\n                  Chưa có mẫu báo giá nào. Hãy tải lên mẫu báo giá đầu tiên của bạn!\n                </TableCell>\n              </TableRow>\n            ) : (\n              templates.map((template) => (\n                <TableRow key={template.id}>\n                  <TableCell>{template.name}</TableCell>\n                  <TableCell>{template.description || '-'}</TableCell>\n                  <TableCell>\n                    {template.type === 'customer' ? 'Khách hàng' : 'Nội bộ'}\n                  </TableCell>\n                  <TableCell>\n                    <Chip\n                      label={template.status === 'active' ? 'Đang sử dụng' : 'Không sử dụng'}\n                      color={template.status === 'active' ? 'success' : 'default'}\n                      size=\"small\"\n                    />\n                    {template.isDefault && (\n                      <Chip\n                        label=\"Mặc định\"\n                        color=\"primary\"\n                        size=\"small\"\n                        sx={{ ml: 1 }}\n                      />\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {new Date(template.createdAt).toLocaleDateString('vi-VN')}\n                  </TableCell>\n                  <TableCell>{template.createdBy}</TableCell>\n                  <TableCell>{template.placeholderCount}</TableCell>\n                  <TableCell align=\"center\">\n                    <Box>\n                      {onViewTemplate && (\n                        <Tooltip title=\"Xem chi tiết\">\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => onViewTemplate(template.id)}\n                          >\n                            <VisibilityIcon fontSize=\"small\" />\n                          </IconButton>\n                        </Tooltip>\n                      )}\n                      {onDownloadTemplate && (\n                        <Tooltip title=\"Tải xuống\">\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => onDownloadTemplate(template.id)}\n                          >\n                            <FileDownloadIcon fontSize=\"small\" />\n                          </IconButton>\n                        </Tooltip>\n                      )}\n                      {onDeleteTemplate && (\n                        <Tooltip title=\"Xóa\">\n                          <IconButton\n                            size=\"small\"\n                            color=\"error\"\n                            onClick={() => onDeleteTemplate(template.id)}\n                          >\n                            <DeleteIcon fontSize=\"small\" />\n                          </IconButton>\n                        </Tooltip>\n                      )}\n                    </Box>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Paper>\n  );\n};\n\nexport default QuotationTemplates;\n","import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Typography,\n  Box,\n  IconButton,\n  CircularProgress,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport { Close as CloseIcon, CloudUpload as UploadIcon, Delete as DeleteIcon } from '@mui/icons-material';\nimport { UploadQuoteTemplateFormValues, ExtractedField } from '../../types/quoteTemplate';\n\ninterface UploadQuoteTemplateProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (values: UploadQuoteTemplateFormValues) => Promise<void>;\n}\n\nconst UploadQuoteTemplate: React.FC<UploadQuoteTemplateProps> = ({\n  open,\n  onClose,\n  onSubmit,\n}) => {\n  const [values, setValues] = useState<UploadQuoteTemplateFormValues>({\n    name: '',\n    description: '',\n    type: 'customer',\n    file: null,\n    extractedFields: [],\n  });\n  const [loading, setLoading] = useState(false);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [extractedFields, setExtractedFields] = useState<ExtractedField[]>([]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement> | { target: { name?: string; value: unknown } }) => {\n    const { name, value } = e.target;\n    if (name) {\n      setValues((prev) => ({ ...prev, [name]: value }));\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0] || null;\n    \n    if (file) {\n      // Kiểm tra định dạng file\n      if (!file.name.endsWith('.docx') && !file.name.endsWith('.doc') && !file.name.endsWith('.pdf')) {\n        alert('Chỉ chấp nhận file .doc, .docx hoặc .pdf');\n        return;\n      }\n      \n      // Kiểm tra kích thước file (tối đa 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        alert('Kích thước file không được vượt quá 5MB');\n        return;\n      }\n      \n      setValues((prev) => ({ ...prev, file }));\n      setAnalyzing(true);\n      \n      // Giả lập phân tích AI\n      setTimeout(() => {\n        // Mock dữ liệu được phân tích từ file\n        const mockExtractedFields: ExtractedField[] = [\n          {\n            originalText: 'CÔNG TY TNHH GIẤY CAO PHÁT',\n            placeholder: 'TEN_CONG_TY_A',\n            type: 'text',\n            description: 'Tên công ty bên A',\n            required: true,\n            example: 'Công ty TNHH ABC'\n          },\n          {\n            originalText: 'Số 352, Khu Phố Mỹ Hiệp, Phường Thái Hoà, Thành phố Tân Uyên, Tỉnh Bình Dương',\n            placeholder: 'DIA_CHI_A',\n            type: 'text',\n            description: 'Địa chỉ bên A',\n            required: true,\n            example: 'Số 123, Đường ABC, Quận 1, TP.HCM'\n          },\n          {\n            originalText: '0274 3775 179',\n            placeholder: 'DIEN_THOAI_A',\n            type: 'phone',\n            description: 'Số điện thoại bên A',\n            required: true,\n            example: '0901234567'\n          },\n          {\n            originalText: '3701711279',\n            placeholder: 'MA_SO_THUE_A',\n            type: 'taxcode',\n            description: 'Mã số thuế bên A',\n            required: true,\n            example: '0123456789'\n          },\n          {\n            originalText: 'LÊ THỊ KIM CHI',\n            placeholder: 'NGUOI_DAI_DIEN_A',\n            type: 'text',\n            description: 'Người đại diện bên A',\n            required: true,\n            example: 'Nguyễn Văn A'\n          },\n          {\n            originalText: 'Giám đốc',\n            placeholder: 'CHUC_VU_A',\n            type: 'text',\n            description: 'Chức vụ người đại diện bên A',\n            required: true,\n            example: 'Giám đốc'\n          },\n          {\n            originalText: '10.000.000 VNĐ',\n            placeholder: 'GIA_TRI_HOP_DONG',\n            type: 'number',\n            description: 'Giá trị hợp đồng',\n            required: true,\n            example: '50.000.000 VNĐ'\n          },\n          {\n            originalText: '01/08/2025',\n            placeholder: 'NGAY_BAT_DAU',\n            type: 'date',\n            description: 'Ngày bắt đầu hợp đồng',\n            required: true,\n            example: '01/01/2025'\n          }\n        ];\n        \n        setExtractedFields(mockExtractedFields);\n        setValues(prev => ({ ...prev, extractedFields: mockExtractedFields }));\n        setAnalyzing(false);\n      }, 2000);\n    }\n  };\n  \n  const handleUpdatePlaceholder = (index: number, field: keyof ExtractedField, value: string) => {\n    const updatedFields = [...extractedFields];\n    updatedFields[index] = { ...updatedFields[index], [field]: value };\n    setExtractedFields(updatedFields);\n    setValues(prev => ({ ...prev, extractedFields: updatedFields }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!values.name.trim()) {\n      alert('Vui lòng nhập tên mẫu báo giá');\n      return;\n    }\n    \n    if (!values.file) {\n      alert('Vui lòng chọn file mẫu báo giá');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await onSubmit(values);\n      handleClose();\n    } catch (error) {\n      console.error('Error submitting template:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setValues({\n      name: '',\n      description: '',\n      type: 'customer',\n      file: null,\n      extractedFields: [],\n    });\n    setExtractedFields([]);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" fullWidth>\n      <DialogTitle>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"h6\">Tải lên mẫu báo giá</Typography>\n          <IconButton onClick={handleClose} size=\"small\">\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      <form onSubmit={handleSubmit}>\n        <DialogContent dividers>\n          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: '1fr 2fr' }, gap: 3 }}>\n            <Box>\n              <TextField\n                label=\"Tên mẫu báo giá\"\n                name=\"name\"\n                value={values.name}\n                onChange={handleChange}\n                fullWidth\n                margin=\"normal\"\n                required\n                disabled={loading}\n              />\n              \n              <TextField\n                label=\"Mô tả\"\n                name=\"description\"\n                value={values.description}\n                onChange={handleChange}\n                fullWidth\n                multiline\n                rows={3}\n                margin=\"normal\"\n                disabled={loading}\n              />\n              \n              <FormControl fullWidth margin=\"normal\">\n                <InputLabel>Loại mẫu</InputLabel>\n                <Select\n                  label=\"Loại mẫu\"\n                  name=\"type\"\n                  value={values.type}\n                  onChange={handleChange}\n                  disabled={loading}\n                >\n                  <MenuItem value=\"customer\">Cho khách hàng</MenuItem>\n                  <MenuItem value=\"internal\">Nội bộ</MenuItem>\n                </Select>\n              </FormControl>\n              \n              <Box mt={2} mb={2}>\n                <input\n                  accept=\".docx,.doc,.pdf\"\n                  style={{ display: 'none' }}\n                  id=\"template-upload\"\n                  type=\"file\"\n                  onChange={handleFileChange}\n                  disabled={loading || analyzing}\n                />\n                <label htmlFor=\"template-upload\">\n                  <Button\n                    variant=\"outlined\"\n                    component=\"span\"\n                    startIcon={<UploadIcon />}\n                    disabled={loading || analyzing}\n                  >\n                    Chọn file mẫu (.docx, .doc, .pdf)\n                  </Button>\n                </label>\n                {values.file && (\n                  <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                    Đã chọn: {values.file.name}\n                  </Typography>\n                )}\n              </Box>\n            </Box>\n            \n            <Box>\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\n                <Typography variant=\"subtitle1\" gutterBottom>\n                  Các trường được phân tích từ mẫu báo giá:\n                </Typography>\n                \n                {analyzing ? (\n                  <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" py={4}>\n                    <CircularProgress size={40} />\n                    <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 2 }}>\n                      Đang phân tích nội dung mẫu báo giá...\n                    </Typography>\n                  </Box>\n                ) : extractedFields.length > 0 ? (\n                  <TableContainer component={Paper} variant=\"outlined\">\n                    <Table size=\"small\">\n                      <TableHead>\n                        <TableRow>\n                          <TableCell>Trường gốc trong file</TableCell>\n                          <TableCell>Placeholder gợi ý</TableCell>\n                          <TableCell>Kiểu dữ liệu</TableCell>\n                          <TableCell>Mô tả</TableCell>\n                          <TableCell align=\"center\">Thao tác</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {extractedFields.map((field, index) => (\n                          <TableRow key={index}>\n                            <TableCell>{field.originalText}</TableCell>\n                            <TableCell>\n                              <TextField\n                                size=\"small\"\n                                value={field.placeholder}\n                                onChange={(e) => handleUpdatePlaceholder(index, 'placeholder', e.target.value)}\n                                fullWidth\n                                disabled={loading}\n                              />\n                            </TableCell>\n                            <TableCell>\n                              <FormControl fullWidth size=\"small\">\n                                <Select\n                                  value={field.type}\n                                  onChange={(e) => handleUpdatePlaceholder(index, 'type', e.target.value)}\n                                  disabled={loading}\n                                >\n                                  <MenuItem value=\"text\">Văn bản</MenuItem>\n                                  <MenuItem value=\"number\">Số</MenuItem>\n                                  <MenuItem value=\"date\">Ngày tháng</MenuItem>\n                                  <MenuItem value=\"phone\">Điện thoại</MenuItem>\n                                  <MenuItem value=\"email\">Email</MenuItem>\n                                  <MenuItem value=\"taxcode\">Mã số thuế</MenuItem>\n                                </Select>\n                              </FormControl>\n                            </TableCell>\n                            <TableCell>\n                              <TextField\n                                size=\"small\"\n                                value={field.description || ''}\n                                onChange={(e) => handleUpdatePlaceholder(index, 'description', e.target.value)}\n                                fullWidth\n                                disabled={loading}\n                              />\n                            </TableCell>\n                            <TableCell align=\"center\">\n                              <IconButton size=\"small\" color=\"error\" onClick={() => {\n                                const updatedFields = [...extractedFields];\n                                updatedFields.splice(index, 1);\n                                setExtractedFields(updatedFields);\n                                setValues(prev => ({ ...prev, extractedFields: updatedFields }));\n                              }} disabled={loading}>\n                                <DeleteIcon fontSize=\"small\" />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                ) : values.file ? (\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    Không tìm thấy trường nào có thể trích xuất từ file. Vui lòng kiểm tra lại nội dung file.\n                  </Typography>\n                ) : (\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    Vui lòng tải lên file mẫu báo giá để AI phân tích và đề xuất các trường dữ liệu.\n                  </Typography>\n                )}\n                \n                <Box mt={3}>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Hướng dẫn sử dụng:\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    - AI sẽ tự động phân tích nội dung mẫu báo giá và đề xuất các trường cần điền\n                    <br />\n                    - Bạn có thể chỉnh sửa tên placeholder và mô tả cho phù hợp\n                    <br />\n                    - Khi tạo báo giá, hệ thống sẽ tự động điền các thông tin vào các vị trí tương ứng\n                  </Typography>\n                </Box>\n              </Paper>\n            </Box>\n          </Box>\n        </DialogContent>\n        \n        <DialogActions sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\n          <Button onClick={handleClose} disabled={loading}>\n            Hủy\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={loading || analyzing || extractedFields.length === 0}\n            startIcon={loading ? <CircularProgress size={20} /> : null}\n          >\n            {loading ? 'Đang tải lên...' : 'Lưu mẫu báo giá'}\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  );\n};\n\nexport default UploadQuoteTemplate;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Button,\n  Paper,\n  Typography,\n  TextField,\n  Stack,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Autocomplete,\n  SelectChangeEvent,\n  Tabs,\n  Tab,\n} from '@mui/material';\nimport {\n  Search as SearchIcon,\n  Add as AddIcon,\n  FileDownload as ExportIcon,\n} from '@mui/icons-material';\n\n// Types\nimport { Quotation, QuotationStatus } from './types';\nimport { QuoteTemplate, QuoteTemplateTab } from './types/quoteTemplate';\n\n// Components\nimport QuotationForm from './components/QuotationForm';\nimport QuotationDetail from './components/QuotationDetail';\nimport QuotationPreview from './components/QuotationPreview';\nimport QuotationList from './components/QuotationList';\nimport EmailQuotationDialog from './components/EmailQuotationDialog';\nimport QuotationTemplates from './components/QuotationTemplates';\nimport UploadQuoteTemplate from './components/UploadQuoteTemplate';\nimport { UploadQuoteTemplateFormValues } from './types/quoteTemplate';\n\n// Fake data\nconst fakeCustomers = ['Công ty A', 'Công ty B', 'Công ty C', 'Công ty D'];\nconst fakeDeals = [\n  { id: 1, name: 'Deal A1', customer: 'Công ty A' },\n  { id: 2, name: 'Deal A2', customer: 'Công ty A' },\n  { id: 3, name: 'Deal B1', customer: 'Công ty B' },\n  { id: 4, name: 'Deal C1', customer: 'Công ty C' },\n];\n\nconst fakeRequirements = [\n  { \n    id: 1, \n    name: 'Yêu cầu A1.1', \n    dealId: 1, \n    description: 'Xây dựng website bán hàng cho Công ty A',\n    features: [\n      { \n        feature: 'Trang chủ', \n        detail: 'Thiết kế trang chủ hiện đại', \n        description: 'Trang chủ với slider banner, danh mục sản phẩm nổi bật, sản phẩm mới', \n        notes: 'Tích hợp animation cho banner'\n      },\n      { \n        feature: 'Trang sản phẩm', \n        detail: 'Danh sách sản phẩm có bộ lọc', \n        description: 'Hiển thị sản phẩm dạng lưới, có bộ lọc theo danh mục, giá, thương hiệu', \n        notes: 'Có chức năng so sánh sản phẩm'\n      },\n      { \n        feature: 'Giỏ hàng', \n        detail: 'Chức năng giỏ hàng đầy đủ', \n        description: 'Thêm, sửa, xóa sản phẩm trong giỏ hàng, tính tổng tiền', \n        notes: 'Lưu giỏ hàng vào localStorage'\n      },\n      { \n        feature: 'Thanh toán', \n        detail: 'Quy trình thanh toán', \n        description: 'Form nhập thông tin giao hàng, chọn phương thức thanh toán', \n        notes: 'Tích hợp thanh toán qua VNPay'\n      }\n    ] \n  },\n  { \n    id: 2, \n    name: 'Yêu cầu A1.2', \n    dealId: 1, \n    description: 'Xây dựng hệ thống quản lý kho cho Công ty A',\n    features: [\n      { \n        feature: 'Quản lý sản phẩm', \n        detail: 'CRUD sản phẩm', \n        description: 'Thêm, sửa, xóa, xem chi tiết sản phẩm trong kho', \n        notes: 'Hỗ trợ import/export Excel'\n      },\n      { \n        feature: 'Quản lý nhập kho', \n        detail: 'Quy trình nhập kho', \n        description: 'Tạo phiếu nhập kho, xác nhận nhập kho, cập nhật số lượng tồn', \n        notes: 'Tích hợp với mã vạch'\n      },\n      { \n        feature: 'Quản lý xuất kho', \n        detail: 'Quy trình xuất kho', \n        description: 'Tạo phiếu xuất kho, xác nhận xuất kho, cập nhật số lượng tồn', \n        notes: 'Tự động xuất kho khi có đơn hàng'\n      },\n      { \n        feature: 'Báo cáo thống kê', \n        detail: 'Báo cáo tồn kho, nhập xuất', \n        description: 'Báo cáo tồn kho theo thời gian, báo cáo nhập xuất theo sản phẩm', \n        notes: 'Xuất báo cáo dạng PDF, Excel'\n      }\n    ] \n  },\n  { \n    id: 3, \n    name: 'Yêu cầu A2.1', \n    dealId: 2, \n    description: 'Xây dựng app mobile cho Công ty A',\n    features: [\n      { \n        feature: 'Đăng nhập/Đăng ký', \n        detail: 'Hệ thống xác thực', \n        description: 'Đăng nhập bằng email/password, đăng ký tài khoản mới, quên mật khẩu', \n        notes: 'Hỗ trợ đăng nhập bằng Google, Facebook'\n      },\n      { \n        feature: 'Trang cá nhân', \n        detail: 'Thông tin người dùng', \n        description: 'Xem, cập nhật thông tin cá nhân, đổi mật khẩu', \n        notes: 'Upload avatar'\n      },\n      { \n        feature: 'Thông báo', \n        detail: 'Hệ thống thông báo', \n        description: 'Nhận thông báo realtime, xem lịch sử thông báo', \n        notes: 'Sử dụng Firebase Cloud Messaging'\n      }\n    ] \n  },\n  { \n    id: 4, \n    name: 'Yêu cầu B1.1', \n    dealId: 3, \n    description: 'Xây dựng hệ thống Quản lý Kho cho Công ty B',\n    features: [\n      { \n        feature: 'Quản lý Kho', \n        detail: 'Nhập kho', \n        description: 'Cho phép người dùng nhập hàng mới vào kho', \n        notes: 'Từ AI (mẫu)'\n      },\n      { \n        feature: 'Quản lý Kho', \n        detail: 'Xuất kho', \n        description: 'Ghi nhận xuất kho khi giao hàng hoặc bán', \n        notes: 'Từ AI (mẫu)'\n      },\n      { \n        feature: 'Giám sát Kho', \n        detail: 'Cảnh báo tồn kho thấp', \n        description: 'Thông báo khi số lượng hàng tồn dưới mức tối thiểu', \n        notes: 'Từ AI (mẫu)'\n      }\n    ] \n  },\n];\n\nconst generateFakeQuotations = (count: number): Quotation[] => {\n  return Array.from({ length: count }, (_, i) => ({\n    id: i + 1,\n    name: `Báo giá ${i + 1} - ${['Website bán hàng', 'Hệ thống kho', 'App di động', 'Phần mềm kế toán'][i % 4]}`,\n    customer: fakeCustomers[Math.floor(Math.random() * fakeCustomers.length)],\n    dealId: i % 4 + 1,\n    dealName: fakeDeals[i % 4].name,\n    requirementId: i % 4 + 1,\n    requirementName: fakeRequirements[i % 4].name,\n    status: ['draft', 'sent', 'approved', 'rejected'][Math.floor(Math.random() * 4)] as QuotationStatus,\n    createdDate: new Date(Date.now() - Math.floor(Math.random() * 90) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n    note: '',\n    items: [],\n    totalEffort: Math.floor(Math.random() * 100) + 20,\n    totalAmount: (Math.floor(Math.random() * 100) + 20) * 500000,\n  }));\n};\n\nconst statusOptions = [\n  { value: 'draft', label: 'Draft', color: 'default' },\n  { value: 'sent', label: 'Đã gửi', color: 'info' },\n  { value: 'approved', label: 'Đã duyệt', color: 'success' },\n  { value: 'rejected', label: 'Từ chối', color: 'error' },\n];\n\nconst QuotationManagement = () => {\n  // Tab state\n  const [currentTab, setCurrentTab] = useState<QuoteTemplateTab>('quotes');\n  \n  // State\n  const [searchTerm, setSearchTerm] = useState('');\n  const [customerFilter, setCustomerFilter] = useState<string | null>(null);\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [loading, setLoading] = useState(false);\n  \n  // Template states\n  const [templates, setTemplates] = useState<QuoteTemplate[]>([]);\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState<QuoteTemplate | null>(null);\n  \n  // Quotations state\n  const [quotations, setQuotations] = useState<Quotation[]>(generateFakeQuotations(25));\n  \n  // Create dialog state\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  \n  // Detail dialog state\n  const [detailDialogOpen, setDetailDialogOpen] = useState(false);\n  const [selectedQuotation, setSelectedQuotation] = useState<Quotation | null>(null);\n  \n  // Preview dialog state\n  const [previewDialogOpen, setPreviewDialogOpen] = useState(false);\n  \n  // Email dialog state\n  const [emailDialogOpen, setEmailDialogOpen] = useState(false);\n  const [emailQuotation, setEmailQuotation] = useState<Quotation | null>(null);\n  \n  // Load fake data on init\n  useEffect(() => {\n    setLoading(true);\n    // Load quotations\n    setQuotations(generateFakeQuotations(25));\n    \n    // Load templates\n    const mockTemplates: QuoteTemplate[] = [\n      {\n        id: '1',\n        name: 'Mẫu báo giá dự án phần mềm',\n        description: 'Template báo giá dự án phần mềm tiêu chuẩn',\n        type: 'customer',\n        status: 'active',\n        createdAt: '2025-06-30T10:00:00Z',\n        updatedAt: '2025-06-30T10:00:00Z',\n        createdBy: 'Nguyễn Văn A',\n        placeholderCount: 8,\n        isDefault: true,\n        extractedFields: []\n      },\n      {\n        id: '2',\n        name: 'Mẫu báo giá dịch vụ IT',\n        description: 'Template báo giá dịch vụ IT outsourcing',\n        type: 'internal',\n        status: 'active',\n        createdAt: '2025-06-29T15:30:00Z',\n        updatedAt: '2025-06-29T15:30:00Z',\n        createdBy: 'Trần Thị B',\n        placeholderCount: 5,\n        isDefault: false,\n        extractedFields: []\n      }\n    ];\n    \n    setTemplates(mockTemplates);\n    setLoading(false);\n  }, []);\n\n  // Handlers\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchTerm(event.target.value);\n    setPage(0);\n  };\n  \n  // Handle tab change\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: QuoteTemplateTab) => {\n    setCurrentTab(newValue);\n    setPage(0);\n  };\n\n  // Template handlers\n  const handleOpenUploadDialog = () => {\n    setUploadDialogOpen(true);\n  };\n\n  const handleCloseUploadDialog = () => {\n    setUploadDialogOpen(false);\n  };\n  \n  const handleUploadTemplate = async (values: UploadQuoteTemplateFormValues): Promise<void> => {\n    try {\n      setLoading(true);\n      // TODO: Replace with actual API call\n      console.log('Uploading template:', values);\n      \n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Add new template to the list\n      const newTemplate: QuoteTemplate = {\n        id: `template-${Date.now()}`,\n        name: values.name,\n        description: values.description,\n        type: values.type,\n        status: 'active',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        createdBy: 'Người dùng hiện tại',\n        placeholderCount: Math.floor(Math.random() * 10) + 3, // Random number of placeholders\n        isDefault: false,\n        extractedFields: []\n      };\n      \n      setTemplates(prev => [newTemplate, ...prev]);\n      setUploadDialogOpen(false);\n      \n    } catch (error) {\n      console.error('Error uploading template:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleViewTemplate = (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    if (template) {\n      setSelectedTemplate(template);\n      // Here you would implement the template viewing functionality\n      console.log('Viewing template:', template);\n    }\n  };\n  \n  const handleDownloadTemplate = (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    if (template) {\n      // Here you would implement the template download functionality\n      console.log('Downloading template:', template);\n    }\n  };\n  \n  const handleDeleteTemplate = (templateId: string) => {\n    // Here you would implement the template deletion functionality\n    setTemplates(prev => prev.filter(t => t.id !== templateId));\n    console.log('Deleted template with ID:', templateId);\n  };\n  \n  const handleCustomerFilterChange = (_: any, newValue: string | null) => {\n    setCustomerFilter(newValue);\n    setPage(0);\n  };\n\n  const handleStatusFilterChange = (event: SelectChangeEvent<string>) => {\n    setStatusFilter(event.target.value);\n    setPage(0);\n  };\n\n  const handlePageChange = (_: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  const handleRowsPerPageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleViewQuotationDetail = (id: number) => {\n    const quotation = quotations.find(q => q.id === id);\n    if (quotation) {\n      setSelectedQuotation(quotation);\n      setDetailDialogOpen(true);\n    }\n  };\n\n  const handleDownloadPdf = (id: number) => {\n    const quotation = quotations.find(q => q.id === id);\n    if (quotation) {\n      setSelectedQuotation(quotation);\n      setPreviewDialogOpen(true);\n    }\n  };\n\n  const handleSendEmail = (id: number) => {\n    const quotation = quotations.find(q => q.id === id);\n    if (quotation) {\n      setEmailQuotation(quotation);\n      setEmailDialogOpen(true);\n    }\n  };\n\n  const handleEmailSend = (emailData: {\n    to: string;\n    cc: string;\n    subject: string;\n    content: string;\n  }) => {\n    // In a real app, this would call an API to send the email\n    console.log('Sending email:', emailData);\n    \n    // Update quotation status to 'sent' if it was 'draft'\n    if (emailQuotation?.status === 'draft') {\n      const updatedQuotations = quotations.map(q => \n        q.id === emailQuotation.id \n          ? { ...q, status: 'sent' as const } \n          : q\n      );\n      setQuotations(updatedQuotations);\n    }\n    \n    // Show success message\n    alert('Email đã được gửi thành công!');\n    setEmailDialogOpen(false);\n  };\n\n  const handleCreateQuotation = () => {\n    setCreateDialogOpen(true);\n  };\n\n  const handleCloseCreateDialog = () => {\n    setCreateDialogOpen(false);\n  };\n\n  const handleSaveQuotation = (quotation: Quotation) => {\n    const newQuotation = {\n      ...quotation,\n      id: Math.max(...quotations.map(q => q.id), 0) + 1,\n    };\n    \n    setQuotations([newQuotation, ...quotations]);\n    setCreateDialogOpen(false);\n  };\n\n  // Filter quotations\n  const filteredQuotations = quotations.filter(q => {\n    const matchesSearch = q.name.toLowerCase().includes(searchTerm.toLowerCase()) || \n                          q.customer.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCustomer = !customerFilter || q.customer === customerFilter;\n    const matchesStatus = statusFilter === 'all' || q.status === statusFilter;\n    return matchesSearch && matchesCustomer && matchesStatus;\n  });\n\n  const paginatedQuotations = filteredQuotations.slice(\n    page * rowsPerPage,\n    page * rowsPerPage + rowsPerPage\n  );\n\n  // Các hàm tiện ích đã được chuyển vào component QuotationList\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {emailQuotation && (\n        <EmailQuotationDialog\n          open={emailDialogOpen}\n          onClose={() => setEmailDialogOpen(false)}\n          onSend={handleEmailSend}\n          customerName={emailQuotation.customer}\n          serviceName={emailQuotation.name}\n          responsiblePerson=\"Người phụ trách\"\n          pdfFileName={`BaoGia_${emailQuotation.id}.pdf`}\n        />\n      )}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3, flexWrap: 'wrap', gap: 2 }}>\n        <Typography variant=\"h4\" component=\"h1\">\n          Quản lý báo giá/ước tính\n        </Typography>\n        {currentTab === 'quotes' && (\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<AddIcon />}\n            onClick={handleCreateQuotation}\n          >\n            Tạo báo giá mới\n          </Button>\n        )}\n      </Box>\n      \n      {/* Tabs */}\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 3 }}>\n        <Tabs \n          value={currentTab} \n          onChange={handleTabChange}\n          aria-label=\"quotation management tabs\"\n        >\n          <Tab label=\"Mẫu báo giá\" value=\"templates\" />\n          <Tab label=\"Báo giá\" value=\"quotes\" />\n        </Tabs>\n      </Box>\n      \n      {currentTab === 'templates' ? (\n        <>\n          <QuotationTemplates \n            templates={templates}\n            loading={loading}\n            onUploadClick={handleOpenUploadDialog}\n            onViewTemplate={handleViewTemplate}\n            onDeleteTemplate={handleDeleteTemplate}\n            onDownloadTemplate={handleDownloadTemplate}\n          />\n          \n          <UploadQuoteTemplate \n            open={uploadDialogOpen}\n            onClose={handleCloseUploadDialog}\n            onSubmit={handleUploadTemplate}\n          />\n        </>\n      ) : (\n        <>\n          {/* Search and Filter */}\n          <Paper sx={{ p: 2, mb: 3 }}>\n            <Stack direction={{ xs: 'column', md: 'row' }} spacing={2} alignItems=\"center\">\n              <TextField\n                label=\"Tìm kiếm\"\n                variant=\"outlined\"\n                size=\"small\"\n                value={searchTerm}\n                onChange={handleSearch}\n                sx={{ minWidth: 200, flex: 1 }}\n                InputProps={{\n                  startAdornment: <SearchIcon fontSize=\"small\" sx={{ mr: 1, color: 'text.secondary' }} />,\n                }}\n              />\n              \n              <Autocomplete\n                options={fakeCustomers}\n                value={customerFilter}\n                onChange={handleCustomerFilterChange}\n                renderInput={(params) => <TextField {...params} label=\"Khách hàng\" size=\"small\" />}\n                sx={{ minWidth: 200 }}\n              />\n              \n              <FormControl size=\"small\" sx={{ minWidth: 150 }}>\n                <InputLabel id=\"status-filter-label\">Trạng thái</InputLabel>\n                <Select\n                  labelId=\"status-filter-label\"\n                  value={statusFilter}\n                  label=\"Trạng thái\"\n                  onChange={handleStatusFilterChange}\n                >\n                  <MenuItem value=\"all\">Tất cả</MenuItem>\n                  {statusOptions.map(option => (\n                    <MenuItem key={option.value} value={option.value}>\n                      {option.label}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              \n              <Button \n                variant=\"outlined\" \n                startIcon={<ExportIcon />}\n                onClick={() => console.log('Export data')}\n              >\n                Xuất Excel\n              </Button>\n            </Stack>\n          </Paper>\n\n          {/* Quotation List */}\n          <QuotationList\n            quotations={paginatedQuotations}\n            onViewDetail={handleViewQuotationDetail}\n            onDownloadPdf={handleDownloadPdf}\n            onSendEmail={handleSendEmail}\n            page={page}\n            rowsPerPage={rowsPerPage}\n            onPageChange={handlePageChange}\n            onRowsPerPageChange={handleRowsPerPageChange}\n            totalCount={filteredQuotations.length}\n          />\n        </>\n      )}\n      \n      {/* Dialog tạo báo giá mới */}\n      <QuotationForm\n        open={createDialogOpen}\n        onClose={handleCloseCreateDialog}\n        onSave={handleSaveQuotation}\n        customers={fakeCustomers}\n        deals={fakeDeals}\n        requirements={fakeRequirements}\n        templates={templates}\n      />\n\n      {/* Dialog xem chi tiết báo giá */}\n      <QuotationDetail\n        open={detailDialogOpen}\n        onClose={() => setDetailDialogOpen(false)}\n        quotation={selectedQuotation}\n      />\n\n      {/* Dialog xem trước và xuất PDF */}\n      <QuotationPreview\n        open={previewDialogOpen}\n        onClose={() => setPreviewDialogOpen(false)}\n        quotation={selectedQuotation}\n        onSaveDraft={(quotation) => {\n          // Cập nhật báo giá với nội dung mới\n          const updatedQuotations = quotations.map(q => \n            q.id === quotation.id ? quotation : q\n          );\n          setQuotations(updatedQuotations);\n          setPreviewDialogOpen(false);\n          alert('Đã lưu nháp báo giá');\n        }}\n        onExportPdf={(quotation) => {\n          console.log('Export PDF', quotation);\n          alert('Đã xuất file PDF báo giá');\n        }}\n        onEdit={() => {\n          setPreviewDialogOpen(false);\n          // Mở lại form chỉnh sửa nếu cần\n        }}\n      />\n    </Box>\n  );\n};\n\nexport default QuotationManagement;\n"],"names":["createSvgIcon","_jsx","d","getTableFooterUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","TableFooterRoot","styled","name","display","tablelvl2","variant","defaultComponent","React","inProps","ref","props","useDefaultProps","className","component","other","_objectWithoutProperties","ownerState","_objectSpread","classes","composeClasses","root","useUtilityClasses","Tablelvl2Context","Provider","value","children","as","clsx","role","defaultTheme","createTheme","defaultCreateStyledComponent","systemStyled","useThemePropsDefault","useThemePropsSystem","joinChildren","separator","childrenArray","toArray","filter","Boolean","reduce","output","child","index","push","length","key","concat","style","_ref","theme","styles","flexDirection","handleBreakpoints","resolveBreakpointValues","values","direction","breakpoints","propValue","spacing","transformer","createUnarySpacing","base","Object","keys","acc","breakpoint","directionValues","spacingValues","forEach","previousDirectionValue","styleFromPropValue","useFlexGap","gap","getValue","margin","row","column","deepmerge","mergeBreakpointsInOrder","Stack","options","arguments","undefined","createStyledComponent","useThemeProps","componentName","StackRoot","themeProps","extendSxProp","divider","createStack","createStyled","FIXED_COLUMNS","isFixed","isEffort","rows","effortColumns","onRowsChange","onColumnsChange","page","setPage","useState","rowsPerPage","setRowsPerPage","newColumnName","setNewColumnName","editingColumn","setEditingColumn","editColumnName","setEditColumnName","handleCellChange","rowId","field","updatedRows","map","id","startsWith","efforts","Number","fixedColumnsWithIds","col","toLowerCase","replace","order","nonDuplicateEffortColumns","effortCol","some","fixedCol","allColumns","sort","a","b","_jsxs","Box","sx","justifyContent","mb","Button","color","startIcon","AddIcon","onClick","handleAddRow","newRow","Date","now","feature","detail","description","notes","itReq","uxUi","size","mr","alignItems","TextField","placeholder","onChange","e","target","minWidth","handleAddColumn","trim","newColumn","disabled","TableContainer","Paper","maxHeight","overflow","Table","stickyHeader","TableHead","TableRow","TableCell","width","DragHandleIcon","cursor","opacity","IconButton","columnId","updatedColumns","saveColumnName","SaveIcon","fontSize","CancelIcon","Typography","ml","startEditingColumn","currentName","p","EditIcon","columnToDelete","find","_ref2","_ref3","_","restEfforts","_toPropertyKey","handleDeleteColumn","DeleteIcon","TableBody","slice","rowIndex","hover","_row$efforts2","isEffortColumn","console","log","isSubtotalColumn","type","fullWidth","inputProps","min","step","fontWeight","sum","_row$efforts3","multiline","maxRows","Tooltip","title","handleDeleteRow","TableFooter","colSpan","align","columnKey","_row$efforts","rowSum","_row$efforts4","backgroundColor","_row$efforts5","TablePagination","rowsPerPageOptions","count","onPageChange","handleChangePage","event","newPage","onRowsPerPageChange","parseInt","labelRowsPerPage","labelDisplayedRows","_ref4","from","to","DEFAULT_ROLES","rates","onRatesChange","newRole","setNewRole","customRole","setCustomRole","handleRateChange","updatedRates","rate","calculateTotalHours","hours","unit","FormControl","InputLabel","Select","label","MenuItem","roleToAdd","alert","newRate","Intl","NumberFormat","currency","format","DEFAULT_EFFORT_COLUMNS","DEFAULT_TM_RATES","mode","onModeChange","onEstimationDataChange","initialData","fixedPriceRows","setFixedPriceRows","setEffortColumns","tmRates","setTmRates","snackbar","setSnackbar","open","message","severity","useEffect","mappedRows","item","Math","random","toString","substr","note","createNewRow","handleFixedPriceDataChange","columns","handleCloseSnackbar","mt","gutterBottom","elevation","border","borderRadius","FormLabel","RadioGroup","newMode","FormControlLabel","control","Radio","Divider","my","FixedPriceTable","TimeAndMaterialTable","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","Alert","_newQuotation$totalAm","onSave","customers","deals","requirements","templates","activeStep","setActiveStep","touched","setTouched","estimationMode","setEstimationMode","newQuotation","setNewQuotation","customer","dealId","dealName","requirementId","requirementName","status","createdDate","toISOString","split","items","totalEffort","totalAmount","templateId","templateName","filteredDeals","setFilteredDeals","filteredRequirements","setFilteredRequirements","estimationItems","setEstimationItems","deal","req","selectedRequirement","features","frontendEffort","backendEffort","qcEffort","pmEffort","totalMD","totalMM","handleItemsChange","updatedItems","Dialog","maxWidth","DialogTitle","DialogContent","Stepper","pt","pb","Step","StepLabel","bgcolor","TemplateIcon","required","error","labelId","selectedTemplate","t","prev","onBlur","template","FormHelperText","flexWrap","Autocomplete","handleCustomerChange","newValue","renderInput","params","flex","getOptionLabel","option","handleDealChange","r","handleRequirementChange","EstimationStep","data","convertedItems","val","estimationConfig","textAlign","pl","toLocaleString","fontStyle","DialogActions","handleBack","prevStep","handleNext","endIcon","NextIcon","handleSave","onItemsChange","readOnly","disableFeatureFields","tableItems","setTableItems","handleValueChange","updatedItem","includes","totalFE","totalBE","totalQC","totalPM","newItem","max","overflowX","tableLayout","position","left","zIndex","arrow","placement","whiteSpace","wordBreak","toFixed","quotation","statusInfo","draft","sent","approved","rejected","Chip","getStatusChip","amount","EstimationTable","executiveSummary","_Fragment","PdfIcon","EmailIcon","onSaveDraft","onExportPdf","pages","setPages","customPages","Array","isArray","toLocaleDateString","total","join","paymentTerms","height","PdfPageEditor","initialContent","updatedPages","handleSaveDraft","updatedQuotation","quotations","totalCount","onViewDetail","onDownloadPdf","onSendEmail","ViewIcon","onSend","customerName","serviceName","responsiblePerson","pdfFileName","emailData","setEmailData","cc","subject","content","handleChange","CloseIcon","dividers","window","PreviewIcon","SendIcon","handleSend","loading","onUploadClick","onViewTemplate","onDeleteTemplate","onDownloadTemplate","isDefault","createdAt","createdBy","placeholderCount","VisibilityIcon","FileDownloadIcon","onSubmit","setValues","file","extractedFields","setLoading","analyzing","setAnalyzing","setExtractedFields","handleUpdatePlaceholder","updatedFields","handleClose","async","preventDefault","gridTemplateColumns","xs","md","accept","_e$target$files","files","endsWith","setTimeout","mockExtractedFields","originalText","example","htmlFor","UploadIcon","py","CircularProgress","splice","borderTop","borderColor","fakeCustomers","fakeDeals","fakeRequirements","generateFakeQuotations","i","floor","statusOptions","QuotationManagement","currentTab","setCurrentTab","searchTerm","setSearchTerm","customerFilter","setCustomerFilter","statusFilter","setStatusFilter","setTemplates","uploadDialogOpen","setUploadDialogOpen","setSelectedTemplate","setQuotations","createDialogOpen","setCreateDialogOpen","detailDialogOpen","setDetailDialogOpen","selectedQuotation","setSelectedQuotation","previewDialogOpen","setPreviewDialogOpen","emailDialogOpen","setEmailDialogOpen","emailQuotation","setEmailQuotation","updatedAt","filteredQuotations","q","matchesSearch","matchesCustomer","matchesStatus","paginatedQuotations","EmailQuotationDialog","updatedQuotations","handleCreateQuotation","borderBottom","Tabs","handleTabChange","_event","Tab","QuotationTemplates","handleOpenUploadDialog","UploadQuoteTemplate","handleCloseUploadDialog","Promise","resolve","newTemplate","InputProps","startAdornment","SearchIcon","handleCustomerFilterChange","ExportIcon","QuotationList","handlePageChange","QuotationForm","handleCloseCreateDialog","QuotationDetail","QuotationPreview","onEdit"],"sourceRoot":""}