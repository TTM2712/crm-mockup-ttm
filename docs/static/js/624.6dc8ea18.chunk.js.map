{"version":3,"file":"static/js/624.6dc8ea18.chunk.js","mappings":"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","sources":["pages/ContractManagement/components/TemplateList/TemplateFilters.tsx","pages/ContractManagement/components/TemplateList/TemplateTable.tsx","pages/ContractManagement/components/AIContractGeneration/AIPromptInput.tsx","pages/ContractManagement/components/AIContractGeneration/ContractPreview.tsx","pages/ContractManagement/components/AIContractGeneration/mockData.ts","pages/ContractManagement/components/AIContractGeneration/index.tsx","pages/ContractManagement/components/TemplateList/index.tsx","pages/ContractManagement/components/UploadTemplate/index.tsx","pages/ContractManagement/components/PaymentScheduleStep/index.tsx","pages/ContractManagement/components/CreateContract/index.tsx","pages/ContractManagement/components/ContractDetail/index.tsx","pages/ContractManagement/index.tsx"],"sourcesContent":["import React from 'react';\nimport { Box, TextField, MenuItem, Button } from '@mui/material';\nimport { TemplateFilterValues } from './types';\nimport SearchIcon from '@mui/icons-material/Search';\nimport AddIcon from '@mui/icons-material/Add';\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\n\ninterface TemplateFiltersProps {\n  filters: TemplateFilterValues;\n  onFilterChange: (filters: TemplateFilterValues) => void;\n  onUploadClick: () => void;\n  onCreateWithAIClick?: () => void;\n}\n\nconst TemplateFilters: React.FC<TemplateFiltersProps> = ({\n  filters,\n  onFilterChange,\n  onUploadClick,\n  onCreateWithAIClick = () => console.log('Create with AI clicked'),\n}) => {\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onFilterChange({ ...filters, search: e.target.value });\n  };\n\n  const handleTypeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onFilterChange({ ...filters, type: e.target.value as any });\n  };\n\n  const handleStatusChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onFilterChange({ ...filters, status: e.target.value as any });\n  };\n\n  return (\n    <Box sx={{ mb: 3 }}>\n      <Box sx={{ \n        display: 'grid',\n        gridTemplateColumns: { xs: '1fr', md: '1fr 1fr 1fr' },\n        gap: 2,\n        alignItems: 'center',\n        mb: 2\n      }}>\n        <Box>\n          <TextField\n            fullWidth\n            variant=\"outlined\"\n            placeholder=\"Tìm kiếm template...\"\n            value={filters.search}\n            onChange={handleSearchChange}\n            InputProps={{\n              startAdornment: <SearchIcon sx={{ color: 'text.secondary', mr: 1 }} />,\n            }}\n          />\n        </Box>\n        <Box>\n          <TextField\n            select\n            fullWidth\n            label=\"Loại template\"\n            value={filters.type}\n            onChange={handleTypeChange}\n            variant=\"outlined\"\n          >\n            <MenuItem value=\"all\">Tất cả</MenuItem>\n            <MenuItem value=\"internal\">Nội bộ</MenuItem>\n            <MenuItem value=\"customer\">Khách hàng</MenuItem>\n            <MenuItem value=\"AI\">AI</MenuItem>\n          </TextField>\n        </Box>\n        <Box>\n          <TextField\n            select\n            fullWidth\n            label=\"Trạng thái\"\n            value={filters.status}\n            onChange={handleStatusChange}\n            variant=\"outlined\"\n          >\n            <MenuItem value=\"all\">Tất cả</MenuItem>\n            <MenuItem value=\"active\">Đang hoạt động</MenuItem>\n            <MenuItem value=\"inactive\">Ngừng hoạt động</MenuItem>\n          </TextField>\n        </Box>\n      </Box>\n      <Box sx={{ \n        display: 'flex', \n        justifyContent: 'flex-end',\n        gap: 2,\n        mt: { xs: 2, md: 0 }\n      }}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={onUploadClick}\n          sx={{\n            width: { xs: '100%', md: 'auto' },\n            maxWidth: '250px'\n          }}\n        >\n          Tải lên Template\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<SmartToyIcon />}\n          onClick={onCreateWithAIClick}\n          sx={{\n            width: { xs: '100%', md: 'auto' },\n            maxWidth: '250px'\n          }}\n        >\n          Tạo hợp đồng bằng AI\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default TemplateFilters;\n","import React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  IconButton,\n  Tooltip,\n  Chip,\n  Box,\n  Typography,\n  TablePagination,\n} from '@mui/material';\nimport {\n  Visibility as ViewIcon,\n  Edit as EditIcon,\n  Star as StarIcon,\n  StarBorder as StarBorderIcon,\n  Delete as DeleteIcon,\n} from '@mui/icons-material';\nimport { Template } from './types';\n\ninterface TemplateTableProps {\n  templates: Template[];\n  page: number;\n  rowsPerPage: number;\n  totalRows: number;\n  onPageChange: (page: number) => void;\n  onRowsPerPageChange: (rowsPerPage: number) => void;\n  onView: (id: string) => void;\n  onEdit: (id: string) => void;\n  onSetDefault: (id: string) => void;\n  onDelete: (id: string) => void;\n}\n\nconst TemplateTable: React.FC<TemplateTableProps> = ({\n  templates,\n  page,\n  rowsPerPage,\n  totalRows,\n  onPageChange,\n  onRowsPerPageChange,\n  onView,\n  onEdit,\n  onSetDefault,\n  onDelete,\n}) => {\n  const handleChangePage = (event: unknown, newPage: number) => {\n    onPageChange(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\n    onRowsPerPageChange(parseInt(event.target.value, 10));\n  };\n\n  return (\n    <Paper sx={{ width: '100%', overflow: 'hidden' }}>\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Tên template</TableCell>\n              <TableCell align=\"center\">Loại</TableCell>\n              <TableCell align=\"center\">Trạng thái</TableCell>\n              <TableCell align=\"center\">Số trường</TableCell>\n              <TableCell align=\"center\">Ngày tạo</TableCell>\n              <TableCell align=\"center\">Người tạo</TableCell>\n              <TableCell align=\"center\">Thao tác</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {templates.length > 0 ? (\n              templates.map((template) => (\n                <TableRow key={template.id} hover>\n                  <TableCell>\n                    <Box display=\"flex\" alignItems=\"center\">\n                      {template.isDefault && (\n                        <StarIcon\n                          color=\"primary\"\n                          sx={{ fontSize: '1rem', mr: 1 }}\n                        />\n                      )}\n                      <Typography variant=\"body2\">{template.name}</Typography>\n                    </Box>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Chip\n                      label={template.type === 'internal' ? 'Nội bộ' : 'Khách hàng'}\n                      color={template.type === 'internal' ? 'primary' : 'default'}\n                      size=\"small\"\n                      variant=\"outlined\"\n                    />\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Chip\n                      label={template.status === 'active' ? 'Hoạt động' : 'Ngừng'}\n                      color={template.status === 'active' ? 'success' : 'default'}\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell align=\"center\">{template.placeholderCount}</TableCell>\n                  <TableCell align=\"center\">\n                    {new Date(template.createdAt).toLocaleDateString()}\n                  </TableCell>\n                  <TableCell align=\"center\">{template.createdBy}</TableCell>\n                  <TableCell align=\"center\">\n                    <Box display=\"flex\" justifyContent=\"center\">\n                      <Tooltip title=\"Xem chi tiết\">\n                        <IconButton size=\"small\" onClick={() => onView(template.id)}>\n                          <ViewIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Chỉnh sửa\">\n                        <IconButton size=\"small\" onClick={() => onEdit(template.id)}>\n                          <EditIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title={template.isDefault ? 'Mặc định' : 'Đặt làm mặc định'}>\n                        <span>\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => onSetDefault(template.id)}\n                            disabled={template.isDefault}\n                            color={template.isDefault ? 'primary' : 'default'}\n                          >\n                            {template.isDefault ? (\n                              <StarIcon fontSize=\"small\" />\n                            ) : (\n                              <StarBorderIcon fontSize=\"small\" />\n                            )}\n                          </IconButton>\n                        </span>\n                      </Tooltip>\n                      <Tooltip title=\"Xóa\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => onDelete(template.id)}\n                          color=\"error\"\n                        >\n                          <DeleteIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                    </Box>\n                  </TableCell>\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    Không có dữ liệu\n                  </Typography>\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25]}\n        component=\"div\"\n        count={totalRows}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n        labelRowsPerPage=\"Số dòng mỗi trang:\"\n        labelDisplayedRows={({ from, to, count }) =>\n          `${from}-${to} trong ${count}`\n        }\n      />\n    </Paper>\n  );\n};\n\nexport default TemplateTable;\n","import React, { useState } from 'react';\nimport { \n  Box, \n  TextField, \n  Button, \n  CircularProgress, \n  Typography, \n  Paper,\n  Chip,\n  Divider\n} from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\nimport PersonIcon from '@mui/icons-material/Person';\n\ninterface AIPromptInputProps {\n  onSubmit: (prompt: string) => void;\n  loading: boolean;\n  chatHistory: Array<{ role: 'user' | 'assistant', content: string }>;\n}\n\n// Sample prompt suggestions\nconst PROMPT_SUGGESTIONS = [\n  'Dịch vụ phần mềm',\n  'Hợp đồng thương mại',\n  'Bảo trì phần mềm',\n  'Hợp đồng NDA',\n  'Hợp đồng đại lý'\n];\n\nconst AIPromptInput: React.FC<AIPromptInputProps> = ({ \n  onSubmit, \n  loading, \n  chatHistory \n}) => {\n  const [prompt, setPrompt] = useState<string>('');\n  \n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (prompt.trim() && !loading) {\n      onSubmit(prompt.trim());\n      setPrompt('');\n    }\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    const newPrompt = `Tạo hợp đồng ${suggestion}`;\n    setPrompt(newPrompt);\n  };\n\n  return (\n    <Box sx={{ \n      display: 'flex', \n      flexDirection: 'column', \n      height: '100%',\n      p: 0\n    }}>\n      {/* Chat History */}\n      <Box sx={{ \n        flexGrow: 1, \n        overflowY: 'auto',\n        p: 2,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 2\n      }}>\n        {chatHistory.length === 0 ? (\n          <Box sx={{ \n            display: 'flex', \n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '100%',\n            color: 'text.secondary',\n            textAlign: 'center',\n            p: 3\n          }}>\n            <SmartToyIcon sx={{ fontSize: 60, mb: 2, opacity: 0.7 }} />\n            <Typography variant=\"h6\" gutterBottom>\n              Tạo hợp đồng bằng AI\n            </Typography>\n            <Typography variant=\"body1\" sx={{ maxWidth: '80%', mx: 'auto' }}>\n              Nhập yêu cầu của bạn dưới dạng văn bản tự nhiên để AI tạo hợp đồng phù hợp với nhu cầu của bạn.\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mt: 2, fontStyle: 'italic' }}>\n              Ví dụ: \"Tạo hợp đồng phát triển phần mềm giữa ITV và Công ty ABC, giá trị 500 triệu, thời gian 6 tháng, thanh toán từng giai đoạn...\"\n            </Typography>\n          </Box>\n        ) : (\n          chatHistory.map((message, index) => (\n            <Paper\n              key={index}\n              elevation={0}\n              sx={{\n                p: 2,\n                backgroundColor: message.role === 'assistant' ? 'rgba(0, 0, 0, 0.04)' : 'transparent',\n                borderRadius: 2,\n                maxWidth: '90%',\n                alignSelf: message.role === 'assistant' ? 'flex-start' : 'flex-end',\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 1 }}>\n                <Box sx={{ \n                  display: 'flex', \n                  alignItems: 'center', \n                  justifyContent: 'center',\n                  backgroundColor: message.role === 'assistant' ? 'primary.main' : 'secondary.main',\n                  borderRadius: '50%',\n                  width: 32,\n                  height: 32,\n                  color: 'white'\n                }}>\n                  {message.role === 'assistant' ? <SmartToyIcon fontSize=\"small\" /> : <PersonIcon fontSize=\"small\" />}\n                </Box>\n                <Typography variant=\"body1\">\n                  {message.content}\n                </Typography>\n              </Box>\n            </Paper>\n          ))\n        )}\n      </Box>\n\n      {/* Prompt Suggestions */}\n      {chatHistory.length === 0 && (\n        <Box sx={{ px: 2, py: 1 }}>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Gợi ý:\n          </Typography>\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n            {PROMPT_SUGGESTIONS.map((suggestion, index) => (\n              <Chip\n                key={index}\n                label={suggestion}\n                onClick={() => handleSuggestionClick(suggestion)}\n                color=\"primary\"\n                variant=\"outlined\"\n                clickable\n              />\n            ))}\n          </Box>\n        </Box>\n      )}\n\n      <Divider />\n\n      {/* Input Area */}\n      <Box \n        component=\"form\" \n        onSubmit={handleSubmit}\n        sx={{ \n          p: 2, \n          display: 'flex',\n          alignItems: 'flex-end',\n          gap: 1\n        }}\n      >\n        <TextField\n          multiline\n          maxRows={4}\n          placeholder=\"Nhập yêu cầu tạo hợp đồng...\"\n          value={prompt}\n          onChange={(e) => setPrompt(e.target.value)}\n          fullWidth\n          variant=\"outlined\"\n          disabled={loading}\n          sx={{ \n            '& .MuiOutlinedInput-root': {\n              borderRadius: 2\n            }\n          }}\n        />\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          endIcon={loading ? <CircularProgress size={20} color=\"inherit\" /> : <SendIcon />}\n          disabled={!prompt.trim() || loading}\n          type=\"submit\"\n          sx={{ \n            height: 56,\n            borderRadius: 2,\n            px: 3\n          }}\n        >\n          {loading ? 'Đang xử lý...' : 'Sinh hợp đồng'}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default AIPromptInput;\n","import React from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  Skeleton, \n  Button,\n  Divider\n} from '@mui/material';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport EditIcon from '@mui/icons-material/Edit';\n\ninterface ContractPreviewProps {\n  content: string;\n  onUpdate: (newContent: string) => void;\n  loading: boolean;\n  onSaveTemplate?: (content: string) => void;\n}\n\nconst ContractPreview: React.FC<ContractPreviewProps> = ({ \n  content, \n  onUpdate,\n  loading,\n  onSaveTemplate\n}) => {\n  // Function to handle content changes\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    onUpdate(e.target.value);\n  };\n\n  // Function to handle save template\n  const handleSaveTemplate = () => {\n    if (onSaveTemplate && content) {\n      onSaveTemplate(content);\n    }\n  };\n\n  return (\n    <Box sx={{ \n      height: '100%', \n      display: 'flex', \n      flexDirection: 'column',\n      p: 0\n    }}>\n      {/* Header */}\n      <Box sx={{ \n        p: 2, \n        borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      }}>\n        <Typography variant=\"h6\">\n          Xem trước hợp đồng\n        </Typography>\n        \n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<EditIcon />}\n            disabled={!content || loading}\n          >\n            Chỉnh sửa\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<DownloadIcon />}\n            disabled={!content || loading}\n          >\n            Tải xuống\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"small\"\n            startIcon={<SaveIcon />}\n            disabled={!content || loading}\n            onClick={handleSaveTemplate}\n          >\n            Lưu thành Template\n          </Button>\n        </Box>\n      </Box>\n      \n      {/* Content Area */}\n      <Box sx={{ \n        flexGrow: 1, \n        overflowY: 'auto',\n        p: 2\n      }}>\n        {loading ? (\n          // Loading skeleton\n          <Box>\n            <Skeleton variant=\"text\" height={40} width=\"60%\" />\n            <Skeleton variant=\"text\" height={20} />\n            <Skeleton variant=\"text\" height={20} />\n            <Skeleton variant=\"text\" height={20} width=\"80%\" />\n            <Box sx={{ my: 2 }}>\n              <Divider />\n            </Box>\n            <Skeleton variant=\"text\" height={30} width=\"40%\" />\n            <Skeleton variant=\"text\" height={20} />\n            <Skeleton variant=\"text\" height={20} />\n            <Skeleton variant=\"text\" height={20} width=\"90%\" />\n            <Box sx={{ my: 2 }}>\n              <Divider />\n            </Box>\n            <Skeleton variant=\"text\" height={30} width=\"40%\" />\n            <Skeleton variant=\"text\" height={20} />\n            <Skeleton variant=\"text\" height={20} />\n          </Box>\n        ) : content ? (\n          // Contract content editor\n          <Paper \n            elevation={0} \n            sx={{ \n              height: '100%', \n              p: 2,\n              backgroundColor: 'rgba(0, 0, 0, 0.02)',\n              borderRadius: 2\n            }}\n          >\n            <textarea\n              value={content}\n              onChange={handleContentChange}\n              style={{\n                width: '100%',\n                height: '100%',\n                padding: '16px',\n                border: '1px solid rgba(0, 0, 0, 0.12)',\n                borderRadius: '8px',\n                resize: 'none',\n                fontFamily: 'inherit',\n                fontSize: '14px',\n                lineHeight: '1.5',\n                backgroundColor: 'white'\n              }}\n            />\n          </Paper>\n        ) : (\n          // Empty state\n          <Box sx={{ \n            display: 'flex', \n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '100%',\n            color: 'text.secondary',\n            textAlign: 'center',\n            p: 3\n          }}>\n            <EditIcon sx={{ fontSize: 60, mb: 2, opacity: 0.7 }} />\n            <Typography variant=\"h6\" gutterBottom>\n              Chưa có nội dung hợp đồng\n            </Typography>\n            <Typography variant=\"body1\">\n              Nhập yêu cầu của bạn ở bên trái và nhấn \"Sinh hợp đồng\" để AI tạo nội dung hợp đồng.\n            </Typography>\n          </Box>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default ContractPreview;\n","/**\n * Mock data and functions to simulate AI contract generation\n */\n\n/**\n * Generate a mock contract based on the provided prompt\n * @param prompt User's input prompt\n * @returns Generated contract content\n */\nexport const mockGenerateContract = (prompt: string): string => {\n  // Extract key information from prompt (in a real implementation, this would be done by AI)\n  const companyNames = extractCompanyNames(prompt);\n  const contractType = extractContractType(prompt);\n  const contractValue = extractContractValue(prompt);\n  const contractDuration = extractContractDuration(prompt);\n  \n  // Generate contract based on extracted information\n  return `\nHỢP ĐỒNG ${contractType.toUpperCase()}\n\nSố: ${Math.floor(Math.random() * 1000)}/2025/HĐDV\n\nGIỮA\n\n${companyNames.party1 || 'CÔNG TY CỔ PHẦN ITV'} (Bên A)\n\nVÀ\n\n${companyNames.party2 || 'CÔNG TY ABC'} (Bên B)\n\nHôm nay, ngày ${new Date().getDate()} tháng ${new Date().getMonth() + 1} năm ${new Date().getFullYear()}, tại Thành phố Hồ Chí Minh, chúng tôi gồm:\n\nBÊN A: ${companyNames.party1 || 'CÔNG TY CỔ PHẦN ITV'}\n- Địa chỉ: 123 Đường Nguyễn Văn Linh, Quận 7, TP.HCM\n- Điện thoại: 028.1234.5678\n- Mã số thuế: 0123456789\n- Đại diện: Ông Nguyễn Văn A\n- Chức vụ: Giám đốc\n\nBÊN B: ${companyNames.party2 || 'CÔNG TY ABC'}\n- Địa chỉ: 456 Đường Lê Lợi, Quận 1, TP.HCM\n- Điện thoại: 028.8765.4321\n- Mã số thuế: 9876543210\n- Đại diện: Bà Trần Thị B\n- Chức vụ: Giám đốc\n\nSau khi bàn bạc, hai bên thống nhất ký kết Hợp đồng ${contractType} với các điều khoản sau:\n\nĐIỀU 1: NỘI DUNG HỢP ĐỒNG\n\n1.1. Bên A đồng ý cung cấp cho Bên B dịch vụ ${contractType} theo các yêu cầu và tiêu chuẩn được quy định trong Phụ lục đính kèm Hợp đồng này.\n\n1.2. Bên B đồng ý sử dụng dịch vụ và thanh toán cho Bên A theo quy định tại Hợp đồng này.\n\nĐIỀU 2: GIÁ TRỊ HỢP ĐỒNG VÀ PHƯƠNG THỨC THANH TOÁN\n\n2.1. Tổng giá trị hợp đồng: ${contractValue || '500.000.000 VNĐ (Năm trăm triệu đồng)'}.\n\n2.2. Phương thức thanh toán: Thanh toán theo từng giai đoạn như sau:\n   - Đợt 1: 30% giá trị hợp đồng, tương đương ${calculatePercentage(contractValue, 30)} - Thanh toán sau khi ký hợp đồng.\n   - Đợt 2: 40% giá trị hợp đồng, tương đương ${calculatePercentage(contractValue, 40)} - Thanh toán sau khi hoàn thành giai đoạn 1.\n   - Đợt 3: 30% giá trị hợp đồng, tương đương ${calculatePercentage(contractValue, 30)} - Thanh toán sau khi nghiệm thu và bàn giao.\n\n2.3. Hình thức thanh toán: Chuyển khoản ngân hàng.\n\nĐIỀU 3: THỜI GIAN THỰC HIỆN\n\n3.1. Thời gian thực hiện hợp đồng: ${contractDuration || '6 tháng'} kể từ ngày ký.\n\n3.2. Lịch trình thực hiện chi tiết được quy định trong Phụ lục đính kèm.\n\nĐIỀU 4: QUYỀN VÀ NGHĨA VỤ CỦA BÊN A\n\n4.1. Quyền của Bên A:\n   - Yêu cầu Bên B thanh toán đúng hạn theo quy định tại Hợp đồng.\n   - Yêu cầu Bên B cung cấp thông tin, tài liệu cần thiết để thực hiện Hợp đồng.\n\n4.2. Nghĩa vụ của Bên A:\n   - Cung cấp dịch vụ đúng tiến độ và chất lượng theo thỏa thuận.\n   - Bảo mật thông tin của Bên B trong quá trình thực hiện Hợp đồng.\n\nĐIỀU 5: QUYỀN VÀ NGHĨA VỤ CỦA BÊN B\n\n5.1. Quyền của Bên B:\n   - Yêu cầu Bên A cung cấp dịch vụ đúng tiến độ và chất lượng.\n   - Được cung cấp thông tin về tiến độ thực hiện dự án.\n\n5.2. Nghĩa vụ của Bên B:\n   - Thanh toán đầy đủ và đúng hạn cho Bên A.\n   - Cung cấp thông tin, tài liệu cần thiết cho Bên A để thực hiện Hợp đồng.\n\nĐIỀU 6: ĐIỀU KHOẢN CHUNG\n\n6.1. Hợp đồng này có hiệu lực kể từ ngày ký và sẽ chấm dứt sau khi hai bên hoàn thành nghĩa vụ.\n\n6.2. Mọi tranh chấp phát sinh sẽ được giải quyết thông qua thương lượng. Trường hợp không thể thương lượng được, tranh chấp sẽ được đưa ra Tòa án có thẩm quyền để giải quyết.\n\n6.3. Hợp đồng này được lập thành 04 bản, mỗi bên giữ 02 bản có giá trị pháp lý như nhau.\n\nĐẠI DIỆN BÊN A                                  ĐẠI DIỆN BÊN B\n`;\n};\n\n// Helper functions to extract information from the prompt\nconst extractCompanyNames = (prompt: string): { party1: string; party2: string } => {\n  const party1 = prompt.includes('ITV') ? 'CÔNG TY CỔ PHẦN ITV' : '';\n  \n  // Try to extract company name after \"và Công ty\" or \"và\"\n  let party2 = '';\n  const companyMatch = prompt.match(/(?:và|giữa)(?:\\s+Công\\s+ty)?\\s+([A-Za-z0-9\\s]+)(?:,|\\.|$)/i);\n  if (companyMatch && companyMatch[1]) {\n    party2 = `CÔNG TY ${companyMatch[1].trim().toUpperCase()}`;\n  }\n  \n  return { party1, party2 };\n};\n\nconst extractContractType = (prompt: string): string => {\n  if (prompt.toLowerCase().includes('phát triển phần mềm')) {\n    return 'phát triển phần mềm';\n  } else if (prompt.toLowerCase().includes('dịch vụ phần mềm')) {\n    return 'dịch vụ phần mềm';\n  } else if (prompt.toLowerCase().includes('bảo trì')) {\n    return 'bảo trì phần mềm';\n  } else if (prompt.toLowerCase().includes('thương mại')) {\n    return 'thương mại';\n  } else if (prompt.toLowerCase().includes('nda') || prompt.toLowerCase().includes('bảo mật')) {\n    return 'bảo mật thông tin (NDA)';\n  } else {\n    return 'dịch vụ';\n  }\n};\n\nconst extractContractValue = (prompt: string): string => {\n  // Try to extract monetary values (e.g., 500 triệu, 1 tỷ)\n  const valueMatch = prompt.match(/(\\d+(?:\\.\\d+)?)\\s*(triệu|tỷ|trieu|ty)/i);\n  if (valueMatch) {\n    const value = parseFloat(valueMatch[1]);\n    const unit = valueMatch[2].toLowerCase();\n    \n    if (unit === 'tỷ' || unit === 'ty') {\n      return `${value.toLocaleString('vi-VN')}.000.000.000 VNĐ (${value} tỷ đồng)`;\n    } else {\n      return `${value.toLocaleString('vi-VN')}.000.000 VNĐ (${value} triệu đồng)`;\n    }\n  }\n  \n  return '500.000.000 VNĐ (Năm trăm triệu đồng)';\n};\n\nconst extractContractDuration = (prompt: string): string => {\n  // Try to extract time duration (e.g., 6 tháng, 1 năm)\n  const durationMatch = prompt.match(/(\\d+)\\s*(tháng|năm|thang|nam)/i);\n  if (durationMatch) {\n    const duration = parseInt(durationMatch[1]);\n    const unit = durationMatch[2].toLowerCase();\n    \n    if (unit === 'năm' || unit === 'nam') {\n      return `${duration} năm`;\n    } else {\n      return `${duration} tháng`;\n    }\n  }\n  \n  return '6 tháng';\n};\n\nconst calculatePercentage = (value: string, percentage: number): string => {\n  // Extract numeric value from contract value string\n  const numericMatch = value ? value.match(/(\\d+(?:\\.\\d+)?)/g) : null;\n  \n  if (numericMatch && numericMatch.length > 0) {\n    const numericValue = parseFloat(numericMatch[0].replace(/\\./g, ''));\n    const result = (numericValue * percentage / 100).toLocaleString('vi-VN');\n    return `${result}.000 VNĐ`;\n  }\n  \n  // Default values if extraction fails\n  const defaultValues: Record<number, string> = {\n    30: '150.000.000 VNĐ',\n    40: '200.000.000 VNĐ',\n    50: '250.000.000 VNĐ'\n  };\n  \n  return defaultValues[percentage] || `${percentage}% giá trị hợp đồng`;\n};\n","import React, { useState } from 'react';\nimport { Dialog, DialogContent, DialogTitle, IconButton, Box, Typography, TextField, Button } from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport AIPromptInput from './AIPromptInput';\nimport ContractPreview from './ContractPreview';\nimport { mockGenerateContract } from './mockData';\nimport { Template } from '../TemplateList/types';\n\ninterface AIContractGenerationProps {\n  open: boolean;\n  onClose: () => void;\n  onSaveTemplate?: (template: Omit<Template, 'id'>) => void;\n}\n\nconst AIContractGeneration: React.FC<AIContractGenerationProps> = ({ \n  open, \n  onClose,\n  onSaveTemplate = () => console.log('Template saved') \n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [contractContent, setContractContent] = useState<string>('');\n  const [chatHistory, setChatHistory] = useState<Array<{ role: 'user' | 'assistant', content: string }>>([]);\n  const [saveDialogOpen, setSaveDialogOpen] = useState<boolean>(false);\n  const [templateName, setTemplateName] = useState<string>('');\n  const [savingTemplate, setSavingTemplate] = useState<boolean>(false);\n\n  const handleGenerateContract = async (prompt: string) => {\n    // Add user message to chat history\n    setChatHistory(prev => [...prev, { role: 'user', content: prompt }]);\n    \n    // Set loading state\n    setLoading(true);\n    \n    try {\n      // In a real implementation, this would call an API\n      // For now, we'll use a mock function with a delay to simulate API call\n      setTimeout(() => {\n        const generatedContract = mockGenerateContract(prompt);\n        \n        // Update contract content\n        setContractContent(generatedContract);\n        \n        // Add assistant response to chat history\n        setChatHistory(prev => [...prev, { \n          role: 'assistant', \n          content: 'Tôi đã tạo hợp đồng dựa trên yêu cầu của bạn. Bạn có thể xem và chỉnh sửa ở bên phải.' \n        }]);\n        \n        // End loading state\n        setLoading(false);\n      }, 2000);\n    } catch (error) {\n      console.error('Error generating contract:', error);\n      setLoading(false);\n      \n      // Add error message to chat history\n      setChatHistory(prev => [...prev, { \n        role: 'assistant', \n        content: 'Đã xảy ra lỗi khi tạo hợp đồng. Vui lòng thử lại.' \n      }]);\n    }\n  };\n\n  const handleUpdateContract = (newContent: string) => {\n    setContractContent(newContent);\n  };\n\n  // Handle opening the save template dialog\n  const handleOpenSaveDialog = (content: string) => {\n    if (content) {\n      setSaveDialogOpen(true);\n      // Extract a default name from the first line of the contract\n      const firstLine = content.split('\\n')[0];\n      setTemplateName(firstLine || 'Hợp đồng mới');\n    }\n  };\n\n  // Handle saving the template\n  const handleSaveTemplate = () => {\n    if (contractContent && templateName) {\n      setSavingTemplate(true);\n      \n      // Count placeholders in the content\n      const placeholderRegex = /\\{\\{([^}]+)\\}\\}/g;\n      const placeholders = contractContent.match(placeholderRegex) || [];\n      \n      // Create new template object\n      const newTemplate: Omit<Template, 'id'> = {\n        name: templateName,\n        type: 'AI',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        createdBy: 'Người dùng hiện tại',\n        placeholderCount: placeholders.length,\n        isDefault: false,\n        status: 'active',\n        content: contractContent // Note: This field might need to be added to the Template interface\n      };\n      \n      // Call the onSaveTemplate callback\n      onSaveTemplate(newTemplate);\n      \n      // Close dialogs and reset state\n      setSavingTemplate(false);\n      setSaveDialogOpen(false);\n      onClose();\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      fullWidth\n      maxWidth=\"xl\"\n      PaperProps={{\n        sx: {\n          height: '90vh',\n          maxHeight: '90vh',\n          m: 2,\n          borderRadius: 2\n        }\n      }}\n    >\n      <DialogTitle sx={{ \n        m: 0, \n        p: 2, \n        display: 'flex', \n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderBottom: '1px solid rgba(0, 0, 0, 0.12)'\n      }}>\n        <Typography variant=\"h6\" component=\"div\">\n          Tạo hợp đồng bằng AI\n        </Typography>\n        <IconButton\n          edge=\"end\"\n          color=\"inherit\"\n          onClick={onClose}\n          aria-label=\"close\"\n        >\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      \n      <DialogContent sx={{ p: 0, display: 'flex', overflow: 'hidden' }}>\n        <Box sx={{ \n          width: '50%', \n          height: '100%',\n          borderRight: '1px solid rgba(0, 0, 0, 0.12)',\n          display: 'flex',\n          flexDirection: 'column'\n        }}>\n          <AIPromptInput \n            onSubmit={handleGenerateContract} \n            loading={loading}\n            chatHistory={chatHistory}\n          />\n        </Box>\n        \n        <Box sx={{ width: '50%', height: '100%' }}>\n          <ContractPreview \n            content={contractContent} \n            onUpdate={handleUpdateContract}\n            loading={loading}\n            onSaveTemplate={handleOpenSaveDialog}\n          />\n        </Box>\n      </DialogContent>\n\n      {/* Save Template Dialog */}\n      <Dialog \n        open={saveDialogOpen} \n        onClose={() => setSaveDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Lưu thành Template</DialogTitle>\n        <DialogContent>\n          <Box sx={{ pt: 1 }}>\n            <Typography variant=\"body2\" gutterBottom>\n              Đặt tên cho template hợp đồng này để lưu vào hệ thống\n            </Typography>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Tên template\"\n              fullWidth\n              variant=\"outlined\"\n              value={templateName}\n              onChange={(e) => setTemplateName(e.target.value)}\n              sx={{ mb: 3, mt: 2 }}\n            />\n            <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2, mt: 2 }}>\n              <Button \n                onClick={() => setSaveDialogOpen(false)}\n                disabled={savingTemplate}\n              >\n                Hủy\n              </Button>\n              <Button \n                variant=\"contained\" \n                color=\"primary\"\n                onClick={handleSaveTemplate}\n                disabled={!templateName.trim() || savingTemplate}\n              >\n                {savingTemplate ? 'Đang lưu...' : 'Lưu template'}\n              </Button>\n            </Box>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    </Dialog>\n  );\n};\n\nexport default AIContractGeneration;\n","import React, { useState, useEffect } from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\nimport TemplateFilters from './TemplateFilters';\nimport TemplateTable from './TemplateTable';\nimport AIContractGeneration from '../AIContractGeneration';\nimport { Template, TemplateFilterValues } from './types';\n\n// Mock data for demonstration\nconst mockTemplates: Template[] = [\n  {\n    id: '1',\n    name: 'Hợp đồng dịch vụ phần mềm',\n    type: 'internal',\n    createdAt: '2025-01-15T00:00:00.000Z',\n    updatedAt: '2025-01-15T00:00:00.000Z',\n    createdBy: 'Nguyễn Văn A',\n    placeholderCount: 8,\n    isDefault: true,\n    status: 'active',\n  },\n  {\n    id: '2',\n    name: 'Hợp đồng bảo trì',\n    type: 'customer',\n    createdAt: '2025-02-20T00:00:00.000Z',\n    updatedAt: '2025-02-20T00:00:00.000Z',\n    createdBy: 'Trần Thị B',\n    placeholderCount: 5,\n    isDefault: false,\n    status: 'active',\n  },\n  {\n    id: '3',\n    name: 'Hợp đồng NDA',\n    type: 'internal',\n    createdAt: '2025-03-10T00:00:00.000Z',\n    updatedAt: '2025-03-10T00:00:00.000Z',\n    createdBy: 'Lê Văn C',\n    placeholderCount: 6,\n    isDefault: false,\n    status: 'inactive',\n  },\n];\n\ninterface TemplateListProps {\n  onUploadClick: () => void;\n  templates?: Template[];\n  loading?: boolean;\n}\n\nconst TemplateList: React.FC<TemplateListProps> = ({ \n  onUploadClick, \n  templates: propTemplates = [], \n  loading: propLoading = false \n}) => {\n  const [filters, setFilters] = useState<TemplateFilterValues>({\n    search: '',\n    type: 'all',\n    status: 'all',\n  });\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [aiModalOpen, setAIModalOpen] = useState(false);\n  const [lastAddedTemplateId, setLastAddedTemplateId] = useState<string | null>(null);\n  \n  // Sử dụng templates và loading từ props nếu được cung cấp, ngược lại sử dụng mockTemplates\n  const templates = propTemplates.length > 0 ? propTemplates : mockTemplates;\n  const loading = propLoading;\n\n  // Lọc và phân trang templates\n  const [filteredTemplates, setFilteredTemplates] = useState<Template[]>([]);\n  const [totalRows, setTotalRows] = useState<number>(0);\n  \n  // Xử lý lọc và phân trang templates\n  useEffect(() => {\n    const filterAndPaginateTemplates = async () => {\n      try {\n        // Lọc templates dựa trên filters\n        let filtered = [...templates];\n        \n        if (filters.search) {\n          const searchLower = filters.search.toLowerCase();\n          filtered = filtered.filter(template => \n            template.name.toLowerCase().includes(searchLower)\n          );\n        }\n        \n        if (filters.type !== 'all') {\n          filtered = filtered.filter(\n            template => template.type === filters.type\n          );\n        }\n        \n        if (filters.status !== 'all') {\n          filtered = filtered.filter(\n            template => template.status === filters.status\n          );\n        }\n        \n        setTotalRows(filtered.length);\n        \n        // Áp dụng phân trang\n        const startIndex = page * rowsPerPage;\n        const paginated = filtered.slice(\n          startIndex,\n          startIndex + rowsPerPage\n        );\n        \n        setFilteredTemplates(paginated);\n      } catch (error) {\n        console.error('Error filtering templates:', error);\n      }\n    };\n\n    filterAndPaginateTemplates();\n  }, [filters, page, rowsPerPage, templates]);\n\n  const handleFilterChange = (newFilters: TemplateFilterValues) => {\n    setFilters(newFilters);\n    setPage(0); // Reset to first page when filters change\n  };\n\n  const handlePageChange = (newPage: number) => {\n    setPage(newPage);\n  };\n\n  const handleRowsPerPageChange = (newRowsPerPage: number) => {\n    setRowsPerPage(newRowsPerPage);\n    setPage(0); // Reset to first page when rows per page changes\n  };\n\n  const handleViewTemplate = (id: string) => {\n    // TODO: Implement view template\n    console.log('View template:', id);\n  };\n\n  const handleEditTemplate = (id: string) => {\n    // TODO: Implement edit template\n    console.log('Edit template:', id);\n  };\n\n  const handleSetDefault = (id: string) => {\n    // TODO: Implement set default template\n    console.log('Set default template:', id);\n    \n    // Trong trường hợp thực tế, đây sẽ là API call\n    // Vì chúng ta đang sử dụng props templates, nên không thể cập nhật trực tiếp\n    // Các thay đổi sẽ được xử lý ở component cha\n  };\n\n  const handleDeleteTemplate = (id: string) => {\n    // TODO: Implement delete template\n    if (window.confirm('Bạn có chắc chắn muốn xóa template này?')) {\n      console.log('Delete template:', id);\n      \n      // Trong trường hợp thực tế, đây sẽ là API call\n      // Vì chúng ta đang sử dụng props templates, nên không thể cập nhật trực tiếp\n      setTotalRows(prev => prev - 1);\n    }\n  };\n\n  // Handle saving AI-generated template\n  const handleSaveAITemplate = (templateData: Omit<Template, 'id'>) => {\n    try {\n      // In a real implementation, this would be an API call\n      // For now, we'll simulate adding to the templates array\n      const newId = `ai-${Date.now()}`;\n      const newTemplate: Template = {\n        ...templateData,\n        id: newId\n      };\n\n      // Add to templates array\n      const updatedTemplates = [newTemplate, ...templates];\n      \n      // Update the templates state (in a real app, this would be handled by the parent component)\n      // For our mock implementation, we'll update the local state\n      setFilteredTemplates(prev => [newTemplate, ...prev]);\n      setTotalRows(prev => prev + 1);\n      setLastAddedTemplateId(newId);\n      \n      // Show success message\n      alert('Template đã được lưu thành công!');\n      \n      return true;\n    } catch (error) {\n      console.error('Error saving AI template:', error);\n      alert('Có lỗi xảy ra khi lưu template!');\n      return false;\n    }\n  };\n\n  return (\n    <Box>\n      <Box mb={3}>\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom>\n          Danh sách Template Hợp đồng\n        </Typography>\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          Quản lý và tạo mới các mẫu hợp đồng\n        </Typography>\n      </Box>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <TemplateFilters \n          filters={filters} \n          onFilterChange={handleFilterChange}\n          onUploadClick={onUploadClick}\n          onCreateWithAIClick={() => setAIModalOpen(true)}\n        />\n        \n        <AIContractGeneration\n          open={aiModalOpen}\n          onClose={() => setAIModalOpen(false)}\n          onSaveTemplate={handleSaveAITemplate}\n        />\n        \n        {loading ? (\n          <Box py={4} textAlign=\"center\">\n            <Typography>Đang tải dữ liệu...</Typography>\n          </Box>\n        ) : (\n          <TemplateTable\n            templates={filteredTemplates}\n            page={page}\n            rowsPerPage={rowsPerPage}\n            totalRows={totalRows}\n            onPageChange={handlePageChange}\n            onRowsPerPageChange={handleRowsPerPageChange}\n            onView={handleViewTemplate}\n            onEdit={handleEditTemplate}\n            onSetDefault={handleSetDefault}\n            onDelete={handleDeleteTemplate}\n          />\n        )}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default TemplateList;\n","import React, { useState } from 'react';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Box,\n  Typography,\n  CircularProgress,\n  Paper,\n  IconButton,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport { Close as CloseIcon, CloudUpload as UploadIcon, Delete as DeleteIcon } from '@mui/icons-material';\nimport { UploadTemplateFormValues, UploadTemplateProps } from './types';\n\n// Define validation schema\nconst schema = yup.object({\n  name: yup.string().required('Tên template là bắt buộc'),\n  description: yup.string().optional(),\n  type: yup.string().oneOf(['internal', 'customer']).required('Loại template là bắt buộc'),\n  file: yup.mixed<File>().required('File template là bắt buộc')\n    .test('fileType', 'Chỉ chấp nhận file .docx', (value) => {\n      if (!value) return false;\n      const file = value as File;\n      return file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n    }),\n  extractedFields: yup.array().of(\n    yup.object({\n      originalText: yup.string().required(),\n      placeholder: yup.string().required(),\n      type: yup.string().required(),\n      description: yup.string().optional()\n    })\n  ).default([])\n}).required();\n\ninterface ExtractedField {\n  originalText: string;\n  placeholder: string;\n  type: string;\n  description?: string;\n}\n\nconst UploadTemplate: React.FC<UploadTemplateProps> = ({ open, onClose, onSubmit }) => {\n  const [loading, setLoading] = useState(false);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [extractedFields, setExtractedFields] = useState<ExtractedField[]>([]);\n\n  type FormData = yup.InferType<typeof schema>;\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    watch,\n    formState: { errors },\n  } = useForm<FormData>({\n    resolver: yupResolver(schema) as any,\n    defaultValues: {\n      name: '',\n      description: '',\n      type: 'customer' as const,\n      file: undefined,\n      extractedFields: [],\n    },\n  });\n\n  const selectedFile = watch('file');\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setValue('file', file);\n      setAnalyzing(true);\n      \n      // Giả lập phân tích AI\n      setTimeout(() => {\n        // Mock dữ liệu được phân tích từ file\n        const mockExtractedFields: ExtractedField[] = [\n          {\n            originalText: 'CÔNG TY TNHH GIẤY CAO PHÁT',\n            placeholder: 'TEN_CONG_TY_A',\n            type: 'text',\n            description: 'Tên công ty bên A'\n          },\n          {\n            originalText: 'Thửa đất số 352, Tờ bản đồ số 14, Khu Phố Mỹ Hiệp, Phường Thái Hoà, Thành phố Tân Uyên, Tỉnh Bình Dương',\n            placeholder: 'DIA_CHI_A',\n            type: 'text',\n            description: 'Địa chỉ bên A'\n          },\n          {\n            originalText: '0274 3775 179',\n            placeholder: 'DIEN_THOAI_A',\n            type: 'phone',\n            description: 'Số điện thoại bên A'\n          },\n          {\n            originalText: '3701711279',\n            placeholder: 'MA_SO_THUE_A',\n            type: 'taxcode',\n            description: 'Mã số thuế bên A'\n          },\n          {\n            originalText: 'LÊ THỊ KIM CHI',\n            placeholder: 'NGUOI_DAI_DIEN_A',\n            type: 'text',\n            description: 'Người đại diện bên A'\n          },\n          {\n            originalText: 'Giám đốc',\n            placeholder: 'CHUC_VU_A',\n            type: 'text',\n            description: 'Chức vụ người đại diện bên A'\n          }\n        ];\n        \n        setExtractedFields(mockExtractedFields);\n        setValue('extractedFields', mockExtractedFields);\n        setAnalyzing(false);\n      }, 2000);\n    }\n  };\n  \n  const handleUpdatePlaceholder = (index: number, field: keyof ExtractedField, value: string) => {\n    const updatedFields = [...extractedFields];\n    updatedFields[index] = { ...updatedFields[index], [field]: value };\n    setExtractedFields(updatedFields);\n    setValue('extractedFields', updatedFields);\n  };\n\n  const handleFormSubmit: SubmitHandler<FormData> = async (data) => {\n    try {\n      setLoading(true);\n      await onSubmit(data as UploadTemplateFormValues);\n      handleClose();\n    } catch (error) {\n      console.error('Error uploading template:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    reset();\n    setExtractedFields([]);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" fullWidth>\n      <DialogTitle>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"h6\">Tải lên Template mới</Typography>\n          <IconButton onClick={handleClose} size=\"small\">\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      <form onSubmit={handleSubmit(handleFormSubmit as any)}>\n        <DialogContent dividers>\n          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: '1fr 2fr' }, gap: 3 }}>\n            <Box>\n              <TextField\n                {...register('name')}\n                label=\"Tên template\"\n                fullWidth\n                margin=\"normal\"\n                error={!!errors.name}\n                helperText={errors.name?.message}\n                disabled={loading}\n              />\n              \n              <TextField\n                {...register('description')}\n                label=\"Mô tả\"\n                fullWidth\n                multiline\n                rows={3}\n                margin=\"normal\"\n                disabled={loading}\n              />\n              \n              <FormControl fullWidth margin=\"normal\" error={!!errors.type}>\n                <InputLabel>Loại template</InputLabel>\n                <Select\n                  label=\"Loại template\"\n                  defaultValue=\"customer\"\n                  disabled={loading}\n                  {...register('type')}\n                >\n                  <MenuItem value=\"customer\">Cho khách hàng</MenuItem>\n                  <MenuItem value=\"internal\">Nội bộ</MenuItem>\n                </Select>\n              </FormControl>\n              \n              <Box mt={2} mb={2}>\n                <input\n                  accept=\".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                  style={{ display: 'none' }}\n                  id=\"template-upload\"\n                  type=\"file\"\n                  onChange={handleFileChange}\n                  disabled={loading || analyzing}\n                />\n                <label htmlFor=\"template-upload\">\n                  <Button\n                    variant=\"outlined\"\n                    component=\"span\"\n                    startIcon={<UploadIcon />}\n                    disabled={loading || analyzing}\n                  >\n                    Chọn file template (.docx)\n                  </Button>\n                </label>\n                {selectedFile && (\n                  <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                    Đã chọn: {selectedFile.name}\n                  </Typography>\n                )}\n                {errors.file && (\n                  <Typography color=\"error\" variant=\"caption\" display=\"block\">\n                    {errors.file.message as React.ReactNode}\n                  </Typography>\n                )}\n              </Box>\n            </Box>\n            \n            <Box>\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\n                <Typography variant=\"subtitle1\" gutterBottom>\n                  Các trường được phân tích từ hợp đồng:\n                </Typography>\n                \n                {analyzing ? (\n                  <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" py={4}>\n                    <CircularProgress size={40} />\n                    <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 2 }}>\n                      Đang phân tích nội dung hợp đồng...\n                    </Typography>\n                  </Box>\n                ) : extractedFields.length > 0 ? (\n                  <TableContainer component={Paper} variant=\"outlined\">\n                    <Table size=\"small\">\n                      <TableHead>\n                        <TableRow>\n                          <TableCell>Trường gốc trong file</TableCell>\n                          <TableCell>Placeholder gợi ý</TableCell>\n                          <TableCell>Kiểu dữ liệu</TableCell>\n                          <TableCell>Mô tả</TableCell>\n                          <TableCell align=\"center\">Thao tác</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {extractedFields.map((field, index) => (\n                          <TableRow key={index}>\n                            <TableCell>{field.originalText}</TableCell>\n                            <TableCell>\n                              <TextField\n                                size=\"small\"\n                                value={field.placeholder}\n                                onChange={(e) => handleUpdatePlaceholder(index, 'placeholder', e.target.value)}\n                                fullWidth\n                                disabled={loading}\n                              />\n                            </TableCell>\n                            <TableCell>\n                              <FormControl fullWidth size=\"small\">\n                                <Select\n                                  value={field.type}\n                                  onChange={(e) => handleUpdatePlaceholder(index, 'type', e.target.value)}\n                                  disabled={loading}\n                                >\n                                  <MenuItem value=\"text\">Văn bản</MenuItem>\n                                  <MenuItem value=\"number\">Số</MenuItem>\n                                  <MenuItem value=\"date\">Ngày tháng</MenuItem>\n                                  <MenuItem value=\"phone\">Điện thoại</MenuItem>\n                                  <MenuItem value=\"email\">Email</MenuItem>\n                                  <MenuItem value=\"taxcode\">Mã số thuế</MenuItem>\n                                </Select>\n                              </FormControl>\n                            </TableCell>\n                            <TableCell>\n                              <TextField\n                                size=\"small\"\n                                value={field.description || ''}\n                                onChange={(e) => handleUpdatePlaceholder(index, 'description', e.target.value)}\n                                fullWidth\n                                disabled={loading}\n                              />\n                            </TableCell>\n                            <TableCell align=\"center\">\n                              <IconButton size=\"small\" color=\"error\" onClick={() => {\n                                const updatedFields = [...extractedFields];\n                                updatedFields.splice(index, 1);\n                                setExtractedFields(updatedFields);\n                                setValue('extractedFields', updatedFields);\n                              }} disabled={loading}>\n                                <DeleteIcon fontSize=\"small\" />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                ) : selectedFile ? (\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    Không tìm thấy trường nào có thể trích xuất từ file. Vui lòng kiểm tra lại nội dung file.\n                  </Typography>\n                ) : (\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    Vui lòng tải lên file hợp đồng để AI phân tích và đề xuất các trường dữ liệu.\n                  </Typography>\n                )}\n                \n                <Box mt={3}>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Hướng dẫn sử dụng:\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    - AI sẽ tự động phân tích nội dung hợp đồng và đề xuất các trường cần điền\n                    <br />\n                    - Bạn có thể chỉnh sửa tên placeholder và mô tả cho phù hợp\n                    <br />\n                    - Khi tạo hợp đồng, hệ thống sẽ tự động điền các thông tin vào các vị trí tương ứng\n                  </Typography>\n                </Box>\n              </Paper>\n            </Box>\n          </Box>\n        </DialogContent>\n        \n        <DialogActions sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\n          <Button onClick={handleClose} disabled={loading}>\n            Hủy\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={loading || analyzing || extractedFields.length === 0}\n            startIcon={loading ? <CircularProgress size={20} /> : null}\n          >\n            {loading ? 'Đang tải lên...' : 'Lưu Template'}\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  );\n};\n\nexport default UploadTemplate;\n","import React from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TextField,\n  IconButton,\n  MenuItem,\n  Select,\n  FormControl,\n  InputAdornment\n} from '@mui/material';\nimport { Add as AddIcon, Delete as DeleteIcon, ArrowBack as ArrowBackIcon } from '@mui/icons-material';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { vi } from 'date-fns/locale';\n\n// Định nghĩa kiểu dữ liệu cho đợt thanh toán\nexport interface PaymentItem {\n  id: string;\n  condition: string;\n  amount: number;\n  paymentDate: Date | null;\n  status: 'pending' | 'waiting' | 'paid';\n  note: string;\n}\n\ninterface PaymentScheduleStepProps {\n  payments: PaymentItem[];\n  onPaymentsChange: (payments: PaymentItem[]) => void;\n  onBack: () => void;\n  onNext: () => void;\n}\n\nconst PaymentScheduleStep: React.FC<PaymentScheduleStepProps> = ({\n  payments,\n  onPaymentsChange,\n  onBack,\n  onNext\n}) => {\n  // Định nghĩa các trạng thái thanh toán\n  const paymentStatuses = [\n    { value: 'pending', label: 'Chưa thanh toán' },\n    { value: 'waiting', label: 'Chờ thanh toán' },\n    { value: 'paid', label: 'Đã thanh toán' }\n  ];\n\n  // Hàm thêm đợt thanh toán mới\n  const handleAddPayment = () => {\n    const newPayment: PaymentItem = {\n      id: `payment-${Date.now()}`,\n      condition: '',\n      amount: 0,\n      paymentDate: new Date(),\n      status: 'pending',\n      note: ''\n    };\n    onPaymentsChange([...payments, newPayment]);\n  };\n\n  // Hàm xóa đợt thanh toán\n  const handleDeletePayment = (id: string) => {\n    onPaymentsChange(payments.filter(payment => payment.id !== id));\n  };\n\n  // Hàm cập nhật thông tin đợt thanh toán\n  const handlePaymentChange = (id: string, field: keyof PaymentItem, value: any) => {\n    onPaymentsChange(\n      payments.map(payment => \n        payment.id === id ? { ...payment, [field]: value } : payment\n      )\n    );\n  };\n\n  // Không cần hàm formatCurrency vì đã xử lý trực tiếp trong TextField\n\n  // Hàm xử lý khi người dùng nhập số tiền\n  const handleAmountChange = (id: string, value: string) => {\n    // Loại bỏ tất cả các ký tự không phải số\n    const numericValue = value.replace(/[^0-9]/g, '');\n    const amount = numericValue ? parseInt(numericValue, 10) : 0;\n    handlePaymentChange(id, 'amount', amount);\n  };\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n        <IconButton onClick={onBack} sx={{ mr: 1 }}>\n          <ArrowBackIcon />\n        </IconButton>\n        <Typography variant=\"h6\">\n          Hạng mục thanh toán\n        </Typography>\n      </Box>\n      \n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          Thêm các đợt thanh toán cho hợp đồng. Mỗi đợt thanh toán bao gồm điều kiện, số tiền, ngày thanh toán, trạng thái và ghi chú.\n        </Typography>\n        \n        <TableContainer>\n          <Table size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Điều kiện</TableCell>\n                <TableCell>Số tiền</TableCell>\n                <TableCell>Ngày thanh toán</TableCell>\n                <TableCell>Trạng thái</TableCell>\n                <TableCell>Ghi chú</TableCell>\n                <TableCell>Xóa</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {payments.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={6} align=\"center\">\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Chưa có đợt thanh toán nào. Nhấn \"Thêm đợt thanh toán\" để bắt đầu.\n                    </Typography>\n                  </TableCell>\n                </TableRow>\n              ) : (\n                payments.map((payment) => (\n                  <TableRow key={payment.id}>\n                    <TableCell>\n                      <TextField\n                        fullWidth\n                        size=\"small\"\n                        value={payment.condition}\n                        onChange={(e) => handlePaymentChange(payment.id, 'condition', e.target.value)}\n                        placeholder=\"Ví dụ: Sau khi ký HĐ\"\n                      />\n                    </TableCell>\n                    <TableCell>\n                      <TextField\n                        fullWidth\n                        size=\"small\"\n                        value={payment.amount === 0 ? '' : payment.amount.toString()}\n                        onChange={(e) => handleAmountChange(payment.id, e.target.value)}\n                        placeholder=\"0\"\n                        InputProps={{\n                          endAdornment: <InputAdornment position=\"end\">VNĐ</InputAdornment>,\n                        }}\n                      />\n                    </TableCell>\n                    <TableCell>\n                      <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={vi}>\n                        <DatePicker\n                          value={payment.paymentDate}\n                          onChange={(date) => handlePaymentChange(payment.id, 'paymentDate', date)}\n                          slotProps={{ textField: { size: 'small', fullWidth: true } }}\n                        />\n                      </LocalizationProvider>\n                    </TableCell>\n                    <TableCell>\n                      <FormControl fullWidth size=\"small\">\n                        <Select\n                          value={payment.status}\n                          onChange={(e) => handlePaymentChange(payment.id, 'status', e.target.value)}\n                        >\n                          {paymentStatuses.map((status) => (\n                            <MenuItem key={status.value} value={status.value}>\n                              {status.label}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </TableCell>\n                    <TableCell>\n                      <TextField\n                        fullWidth\n                        size=\"small\"\n                        value={payment.note}\n                        onChange={(e) => handlePaymentChange(payment.id, 'note', e.target.value)}\n                        placeholder=\"Ghi chú\"\n                      />\n                    </TableCell>\n                    <TableCell>\n                      <IconButton \n                        color=\"error\" \n                        onClick={() => handleDeletePayment(payment.id)}\n                        size=\"small\"\n                      >\n                        <DeleteIcon />\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        \n        <Box sx={{ mt: 2 }}>\n          <Button\n            startIcon={<AddIcon />}\n            variant=\"outlined\"\n            onClick={handleAddPayment}\n          >\n            Thêm đợt thanh toán\n          </Button>\n        </Box>\n      </Paper>\n      \n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n        <Button \n          variant=\"outlined\" \n          onClick={onBack}\n        >\n          Quay lại\n        </Button>\n        <Button \n          variant=\"contained\" \n          color=\"primary\"\n          onClick={onNext}\n        >\n          Tiếp tục\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default PaymentScheduleStep;\n","import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Typography, \n  Button, \n  Stepper, \n  Step, \n  StepLabel,\n  Paper,\n  TextField,\n  IconButton,\n  Chip\n} from '@mui/material';\nimport { \n  Description as TemplateIcon,\n  ArrowBack as ArrowBackIcon\n} from '@mui/icons-material';\nimport PdfPageEditor from '../../../../components/PdfPageEditor';\nimport { Template } from '../TemplateList/types';\nimport { ExtractedField } from '../UploadTemplate/types';\nimport { toast } from 'react-toastify';\nimport PaymentScheduleStep, { PaymentItem } from '../PaymentScheduleStep';\n\n// Mở rộng interface Template để thêm trường extractedFields\ninterface ExtendedTemplate extends Template {\n  extractedFields?: ExtractedField[];\n}\n\ninterface CreateContractProps {\n  templates: ExtendedTemplate[];\n  onBack: () => void;\n  onCreate: (contract: any) => void;\n}\n\nconst CreateContract: React.FC<CreateContractProps> = ({ \n  templates, \n  onBack,\n  onCreate \n}) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [selectedTemplate, setSelectedTemplate] = useState<ExtendedTemplate | null>(null);\n  // Sử dụng formData để lưu các giá trị nhập vào form\n  const [formData, setFormData] = useState<Record<string, string>>({});\n  // Lưu nội dung hợp đồng để hiển thị trong PdfPageEditor\n  const [contractContent, setContractContent] = useState<string[]>(['']);\n  // Lưu các đợt thanh toán\n  const [payments, setPayments] = useState<PaymentItem[]>([]);\n  \n  // Hàm tạo nội dung HTML cho hợp đồng từ formData\n  const generateContractHTML = React.useCallback(() => {\n    // Tạo số hợp đồng\n    const contractNumber = `HD${new Date().getFullYear()}${(new Date().getMonth() + 1).toString().padStart(2, '0')}${new Date().getDate().toString().padStart(2, '0')}001`;\n    \n    // Định dạng số tiền\n    const formatCurrency = (amount: number) => {\n      return new Intl.NumberFormat('vi-VN').format(amount);\n    };\n    \n    // Tạo HTML cho bảng thanh toán\n    const paymentScheduleHTML = payments.length > 0 ? `\n      <h3 style=\"font-weight: bold; margin-top: 30px; margin-bottom: 20px;\">ĐIỀU 2: LỊCH THANH TOÁN</h3>\n      <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n        <thead>\n          <tr style=\"background-color: #f2f2f2;\">\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">STT</th>\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Điều kiện</th>\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Số tiền</th>\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Ngày thanh toán</th>\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Ghi chú</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${payments.map((payment, index) => `\n            <tr>\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${index + 1}</td>\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${payment.condition}</td>\n              <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${formatCurrency(payment.amount)} VNĐ</td>\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${payment.paymentDate ? new Date(payment.paymentDate).toLocaleDateString('vi-VN') : ''}</td>\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${payment.note}</td>\n            </tr>\n          `).join('')}\n          <tr style=\"font-weight: bold; background-color: #f9f9f9;\">\n            <td style=\"border: 1px solid #ddd; padding: 8px;\" colspan=\"2\">Tổng cộng</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${formatCurrency(payments.reduce((sum, payment) => sum + payment.amount, 0))} VNĐ</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\" colspan=\"2\"></td>\n          </tr>\n        </tbody>\n      </table>\n    ` : '';\n    \n    // Tạo HTML cho hợp đồng\n    return `\n      <div style=\"text-align: center; margin-bottom: 20px;\">\n        <h2 style=\"font-weight: bold; text-transform: uppercase;\">Cộng Hòa Xã Hội Chủ Nghĩa Việt Nam</h2>\n        <h3 style=\"font-weight: bold;\">Độc Lập – Tự Do – Hạnh Phúc</h3>\n        <p style=\"margin-bottom: 20px;\">__________</p>\n        <h1 style=\"font-weight: bold; text-transform: uppercase; margin-bottom: 20px;\">HỢP ĐỒNG NGUYÊN TẮC CUNG CẤP DỊCH VỤ PHẦN MỀM</h1>\n        <h2 style=\"font-weight: bold; margin-bottom: 30px;\">Số: ${contractNumber}</h2>\n      </div>\n\n      <p>\n        Căn cứ vào Luật Thương Mại của Quốc hội nước Cộng Hòa Xã Hội Chủ Nghĩa Việt Nam được ban hành ngày 14/06/2005, có hiệu lực từ ngày 01/01/2006.\n      </p>\n      \n      ${Object.entries(formData).map(([field, value]) => `<p>Căn cứ vào ${field}: <strong>${value}</strong></p>`).join('\\n')}\n\n      <h3 style=\"font-weight: bold; margin-top: 30px; margin-bottom: 20px;\">ĐIỀU 1: NỘI DUNG HỢP ĐỒNG</h3>\n      <p>\n        Bên A ủy thác cho bên B công việc xây dựng và phát triển phần mềm và cung cấp các dịch vụ liên quan đến phần mềm của bên A.\n      </p>\n      <p>\n        Bên B sẽ chịu trách nhiệm xây dựng phần mềm đúng như thỏa thuận của cả Bên A và Bên B.\n      </p>\n      <p>\n        Về chi tiết nội dung công việc và chi phí thực hiện sẽ được trình bày trong từng Phụ lục cụ thể.\n      </p>\n      \n      ${paymentScheduleHTML}\n    `;\n  }, [formData, payments]);\n  \n  // Cập nhật nội dung hợp đồng khi formData thay đổi\n  useEffect(() => {\n    // Chỉ cập nhật khi đã điền ít nhất một trường và đã đến bước xem trước\n    if (activeStep === 3 && Object.keys(formData).length > 0 && Object.values(formData).some(value => value)) {\n      setContractContent([generateContractHTML()]);\n    }\n  }, [formData, activeStep, generateContractHTML]);\n  \n  // Bước 1: Chọn template\n  const renderTemplateSelection = () => (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom>\n        Chọn mẫu hợp đồng\n      </Typography>\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: 16 }}>\n        {templates.map((template) => (\n          <div \n            key={template.id} \n            style={{ \n              marginBottom: '16px'\n            }}>\n          \n            <Paper \n              elevation={selectedTemplate?.id === template.id ? 4 : 1}\n              sx={{ \n                p: 2, \n                cursor: 'pointer',\n                border: selectedTemplate?.id === template.id ? '2px solid #1976d2' : '1px solid #e0e0e0',\n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column'\n              }}\n              onClick={() => setSelectedTemplate(template)}\n            >\n              <Box display=\"flex\" alignItems=\"center\" mb={1}>\n                <TemplateIcon color=\"primary\" sx={{ mr: 1 }} />\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\">\n                  {template.name}\n                </Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ flexGrow: 1 }}>\n                {template.name} - {template.type}\n              </Typography>\n              <Chip \n                label={`${template.placeholderCount} trường`} \n                size=\"small\" \n                sx={{ mt: 1, alignSelf: 'flex-start' }} \n              />\n            </Paper>\n          </div>\n        ))}\n      </div>\n      <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 3 }}>\n        <Button \n          variant=\"contained\" \n          disabled={!selectedTemplate}\n          onClick={() => {\n            // Khởi tạo formData chỉ với các trường được trích xuất từ template\n            const formFields: Record<string, string> = {};\n            \n            // Thêm các trường từ template nếu có\n            if (selectedTemplate?.extractedFields && selectedTemplate.extractedFields.length > 0) {\n              selectedTemplate.extractedFields.forEach((field: ExtractedField) => {\n                formFields[field.placeholder] = '';\n              });\n            } else {\n              // Nếu không có trường nào được trích xuất, hiển thị thông báo\n              alert('Không tìm thấy trường nào trong mẫu hợp đồng. Vui lòng chọn mẫu khác.');\n              return;\n            }\n            \n            // Khởi tạo formData với các trường cần điền từ template\n            \n            // Khởi tạo formData với các trường cần điền\n            setFormData(formFields);\n            // Chuyển sang bước điền thông tin\n            setActiveStep(1);\n          }}\n        >\n          Tiếp tục\n        </Button>\n      </Box>\n    </Box>\n  );\n\n  // Bước 2: Điền thông tin qua form trực tiếp\n  const renderContractForm = () => {\n    // Kiểm tra xem đã điền đủ thông tin chưa\n    const checkFormCompletion = () => {\n      const fieldNames = Object.keys(formData);\n      const missingFields = fieldNames.filter(field => !formData[field]);\n      return missingFields.length === 0;\n    };\n\n    // Xử lý khi người dùng thay đổi giá trị của một trường\n    const handleFieldChange = (fieldName: string, value: string) => {\n      setFormData(prev => ({\n        ...prev,\n        [fieldName]: value\n      }));\n    };\n\n    // Xử lý khi người dùng nhấn nút Tiếp tục\n    const handleContinue = () => {\n      if (checkFormCompletion()) {\n        setActiveStep(2); // Chuyển sang bước hạng mục thanh toán\n      } else {\n        // Hiển thị thông báo nếu chưa điền đủ thông tin\n        alert('Vui lòng điền đầy đủ thông tin trước khi tiếp tục.');\n      }\n    };\n\n    return (\n      <Box sx={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n          <IconButton onClick={() => setActiveStep(0)} sx={{ mr: 1 }}>\n            <ArrowBackIcon />\n          </IconButton>\n          <Typography variant=\"h6\">\n            Tạo hợp đồng: {selectedTemplate?.name}\n          </Typography>\n        </Box>\n        \n        <Paper \n          variant=\"outlined\" \n          sx={{ \n            p: 3, \n            flexGrow: 1, \n            mb: 2, \n            overflowY: 'auto',\n            maxHeight: '600px'\n          }}\n        >\n          <Typography variant=\"h6\" gutterBottom>\n            Thông tin hợp đồng\n          </Typography>\n          \n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n            Vui lòng điền đầy đủ các thông tin sau để tạo hợp đồng.\n          </Typography>\n          \n          <Box sx={{ \n            display: 'grid', \n            gridTemplateColumns: { xs: '1fr', md: '1fr 1fr' },\n            gap: 3,\n            mt: 2\n          }}>\n            {Object.keys(formData).map((fieldName) => (\n              <TextField\n                key={fieldName}\n                label={fieldName}\n                variant=\"outlined\"\n                fullWidth\n                value={formData[fieldName]}\n                onChange={(e) => handleFieldChange(fieldName, e.target.value)}\n                required\n                error={!formData[fieldName]}\n                helperText={!formData[fieldName] ? 'Trường này là bắt buộc' : ''}\n                sx={{ mb: 2 }}\n              />\n            ))}\n          </Box>\n        </Paper>\n        \n        <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n          <Button \n            variant=\"outlined\" \n            onClick={() => setActiveStep(0)}\n            startIcon={<ArrowBackIcon />}\n          >\n            Quay lại\n          </Button>\n          <Button \n            variant=\"contained\" \n            color=\"primary\"\n            onClick={handleContinue}\n            disabled={!checkFormCompletion()}\n          >\n            Tiếp tục\n          </Button>\n        </Box>\n      </Box>\n    );\n  };\n\n  // Xử lý tạo hợp đồng\n  const handleCreateContract = () => {\n    if (!selectedTemplate) return;\n    \n    const newContract = {\n      id: `C${Math.floor(1000 + Math.random() * 9000)}`,\n      name: `Hợp đồng ${selectedTemplate?.name} - ${new Date().toLocaleDateString()}`,\n      templateId: selectedTemplate?.id || '',\n      templateName: selectedTemplate?.name || '',\n      status: 'draft',\n      partyA: 'Công ty TNHH ABC',\n      partyB: 'Công ty TNHH XYZ',\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      createdBy: 'Người dùng hiện tại',\n      // Lưu formData và payments vào contract\n      contractData: formData,\n      payments: payments\n    };\n    \n    // Gọi hàm tạo hợp đồng\n    onCreate(newContract);\n    toast.success('Tạo hợp đồng thành công!');\n  };\n\n  // Bước 3: Xem trước và xác nhận\n  const renderPreview = () => {\n    if (!selectedTemplate) return null;\n\n    return (\n      <Box>\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n          <IconButton onClick={() => setActiveStep(2)} sx={{ mr: 1 }}>\n            <ArrowBackIcon />\n          </IconButton>\n          <Typography variant=\"h6\">\n            Xem trước & Xác nhận\n          </Typography>\n        </Box>\n        \n        <Box sx={{ border: '1px solid #e0e0e0', borderRadius: 1, padding: 0, overflow: 'hidden', mb: 3 }}>\n          <PdfPageEditor \n            initialContent={contractContent}\n            onSave={setContractContent}\n            onExportPdf={() => {\n              toast.success('Xuất PDF thành công!');\n            }}\n          />\n        </Box>\n        \n        <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n          <Button \n            variant=\"outlined\" \n            onClick={() => setActiveStep(1)}\n            startIcon={<ArrowBackIcon />}\n          >\n            Quay lại\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleCreateContract}\n          >\n            Tạo hợp đồng\n          </Button>\n        </Box>\n      </Box>\n    );\n  };\n  // Bước 3: Thêm hạng mục thanh toán\n  const renderPaymentSchedule = () => {\n    return (\n      <PaymentScheduleStep\n        payments={payments}\n        onPaymentsChange={setPayments}\n        onBack={() => setActiveStep(1)}\n        onNext={() => setActiveStep(3)}\n      />\n    );\n  };\n\n  const steps = [\n    { label: 'Chọn mẫu hợp đồng', component: renderTemplateSelection },\n    { label: 'Điền thông tin', component: renderContractForm },\n    { label: 'Hạng mục thanh toán', component: renderPaymentSchedule },\n    { label: 'Xem trước & Xác nhận', component: renderPreview },\n  ];\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\n        {steps.map((step, index) => (\n          <Step key={step.label} completed={activeStep > index}>\n            <StepLabel>{step.label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      \n      <Box sx={{ mt: 2 }}>\n        {steps[activeStep].component()}\n      </Box>\n    </Box>\n  );\n};\n\n// Component này đã được thay thế bằng PdfPageEditor trong bước xem trước\n// const ContractPreview: React.FC = () => {\n//   return null;\n// };\n\nexport default CreateContract;\n","import React from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  Button, \n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Divider,\n  Chip\n} from '@mui/material';\nimport { ArrowBack, Download, Print, Share, Delete, Edit } from '@mui/icons-material';\n\ninterface ContractDetailProps {\n  contract: {\n    id: string;\n    name: string;\n    templateName: string;\n    status: 'draft' | 'pending' | 'signed' | 'expired' | 'cancelled';\n    partyA: string;\n    partyB: string;\n    createdAt: string;\n    updatedAt: string;\n    createdBy: string;\n    signedAt?: string;\n    expiresAt?: string;\n    contractData?: {\n      tenBenA: string;\n      tenBenB: string;\n      ngayKy: string;\n      diaChiA: string;\n      dienThoaiA: string;\n      maSoThueA: string;\n      nguoiDaiDienA: string;\n      chucVuA: string;\n      giaTriHopDong: string;\n    };\n  };\n  onClose: () => void;\n  onDelete: (id: string) => void;\n  onEdit: (id: string) => void;\n}\n\nconst ContractDetail: React.FC<ContractDetailProps> = ({ \n  contract, \n  onClose, \n  onDelete,\n  onEdit\n}) => {\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = React.useState(false);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'signed': return 'success';\n      case 'pending': return 'warning';\n      case 'draft': return 'default';\n      case 'expired': return 'error';\n      case 'cancelled': return 'error';\n      default: return 'default';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return 'Chưa xác định';\n    return new Date(dateString).toLocaleDateString('vi-VN');\n  };\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 3, gap: 2 }}>\n        <IconButton onClick={onClose}>\n          <ArrowBack />\n        </IconButton>\n        <Typography variant=\"h5\">\n          Chi tiết hợp đồng: {contract.name}\n        </Typography>\n        <Chip \n          label={contract.status.toUpperCase()} \n          color={getStatusColor(contract.status) as any}\n          size=\"small\"\n          sx={{ ml: 2 }}\n        />\n      </Box>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 3, flexWrap: 'wrap', gap: 2 }}>\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>Thông tin chung</Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2 }}>\n              <Box sx={{ flex: '1 1 300px' }}>\n                <Typography><strong>Mã hợp đồng:</strong> {contract.id}</Typography>\n                <Typography><strong>Mẫu hợp đồng:</strong> {contract.templateName}</Typography>\n                <Typography><strong>Ngày tạo:</strong> {formatDate(contract.createdAt)}</Typography>\n              </Box>\n              <Box sx={{ flex: '1 1 300px' }}>\n                <Typography><strong>Người tạo:</strong> {contract.createdBy}</Typography>\n                <Typography><strong>Cập nhật lần cuối:</strong> {formatDate(contract.updatedAt)}</Typography>\n                {contract.signedAt && (\n                  <Typography><strong>Ngày ký:</strong> {formatDate(contract.signedAt)}</Typography>\n                )}\n                {contract.expiresAt && (\n                  <Typography><strong>Ngày hết hạn:</strong> {formatDate(contract.expiresAt)}</Typography>\n                )}\n              </Box>\n            </Box>\n          </Box>\n          \n          <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n            <Button variant=\"outlined\" startIcon={<Download />} size=\"small\">\n              Tải xuống\n            </Button>\n            <Button variant=\"outlined\" startIcon={<Print />} size=\"small\">\n              In\n            </Button>\n            <Button variant=\"outlined\" startIcon={<Share />} size=\"small\">\n              Chia sẻ\n            </Button>\n            <Button \n              variant=\"contained\" \n              color=\"primary\" \n              startIcon={<Edit />}\n              onClick={() => onEdit(contract.id)}\n              size=\"small\"\n            >\n              Chỉnh sửa\n            </Button>\n            <Button \n              variant=\"outlined\" \n              color=\"error\" \n              startIcon={<Delete />}\n              onClick={() => setDeleteConfirmOpen(true)}\n              size=\"small\"\n            >\n              Xóa\n            </Button>\n          </Box>\n        </Box>\n\n        <Divider sx={{ my: 3 }} />\n\n        <Box sx={{ mb: 4 }}>\n          <Typography variant=\"h6\" gutterBottom>Thông tin các bên</Typography>\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 4 }}>\n            <Box sx={{ flex: '1 1 300px' }}>\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\" gutterBottom>\n                  Bên A (Bên giao kết hợp đồng)\n                </Typography>\n                {contract.contractData ? (\n                  <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n                    <Typography><strong>Tên công ty:</strong> {contract.contractData.tenBenA}</Typography>\n                    <Typography><strong>Địa chỉ:</strong> {contract.contractData.diaChiA}</Typography>\n                    <Typography><strong>Điện thoại:</strong> {contract.contractData.dienThoaiA}</Typography>\n                    <Typography><strong>Mã số thuế:</strong> {contract.contractData.maSoThueA}</Typography>\n                    <Typography><strong>Người đại diện:</strong> {contract.contractData.nguoiDaiDienA}</Typography>\n                    <Typography><strong>Chức vụ:</strong> {contract.contractData.chucVuA}</Typography>\n                  </Box>\n                ) : (\n                  <Typography>Không có thông tin chi tiết</Typography>\n                )}\n              </Paper>\n            </Box>\n            <Box sx={{ flex: '1 1 300px' }}>\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\" gutterBottom>\n                  Bên B (Đối tác)\n                </Typography>\n                {contract.contractData ? (\n                  <Typography><strong>Tên công ty:</strong> {contract.contractData.tenBenB}</Typography>\n                ) : (\n                  <Typography>Không có thông tin chi tiết</Typography>\n                )}\n              </Paper>\n            </Box>\n          </Box>\n        </Box>\n\n        <Box>\n          <Typography variant=\"h6\" gutterBottom>Nội dung hợp đồng</Typography>\n          <Paper variant=\"outlined\" sx={{ p: 3 }}>\n            <Typography variant=\"h5\" align=\"center\" gutterBottom>\n              HỢP ĐỒNG DỊCH VỤ\n            </Typography>\n            <Typography paragraph align=\"center\">\n              Số: {contract.id}\n            </Typography>\n            \n            <Typography paragraph align=\"center\">\n              <em>Căn cứ Bộ luật Dân sự số 91/2015/QH13 ngày 24 tháng 11 năm 2015 của Quốc hội</em><br />\n              <em>Căn cứ Luật Thương mại số 36/2005/QH11 ngày 14 tháng 6 năm 2005 của Quốc hội</em>\n            </Typography>\n            \n            <Typography paragraph align=\"center\">\n              <strong>Hôm nay, ngày {contract.contractData?.ngayKy || formatDate(contract.createdAt)}</strong>\n            </Typography>\n            \n            <Typography paragraph>\n              <strong>BÊN A:</strong> {contract.contractData?.tenBenA || contract.partyA}\n            </Typography>\n            \n            <Typography paragraph>\n              <strong>BÊN B:</strong> {contract.contractData?.tenBenB || contract.partyB}\n            </Typography>\n            \n            <Typography paragraph>\n              Hai bên cùng thỏa thuận ký kết Hợp đồng dịch vụ với những nội dung và điều khoản sau đây:\n            </Typography>\n            \n            <Typography variant=\"h6\" gutterBottom>ĐIỀU 1: NỘI DUNG CÔNG VIỆC</Typography>\n            <Typography paragraph>\n              Bên B đồng ý cung cấp dịch vụ theo yêu cầu của Bên A với nội dung chi tiết như trong Phụ lục đính kèm.\n            </Typography>\n            \n            <Typography variant=\"h6\" gutterBottom>ĐIỀU 2: THỜI HẠN HỢP ĐỒNG</Typography>\n            <Typography paragraph>\n              Hợp đồng có hiệu lực từ ngày ký đến ngày {contract.expiresAt ? formatDate(contract.expiresAt) : 'khi hoàn thành nghĩa vụ hợp đồng'}.\n            </Typography>\n            \n            <Typography variant=\"h6\" gutterBottom>ĐIỀU 3: GIÁ TRỊ HỢP ĐỒNG</Typography>\n            <Typography paragraph>\n              Tổng giá trị hợp đồng: {contract.contractData?.giaTriHopDong || 'Theo thỏa thuận giữa hai bên'}\n            </Typography>\n            \n            <Box sx={{ mt: 6, display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap', gap: 2 }}>\n              <Box sx={{ textAlign: 'center', minWidth: 200, flex: 1 }}>\n                <Typography fontWeight=\"bold\">ĐẠI DIỆN BÊN A</Typography>\n                <Typography fontStyle=\"italic\">(Ký, ghi rõ họ tên)</Typography>\n                <Box sx={{ height: 80, mt: 2 }}></Box>\n                <Typography fontWeight=\"bold\">{contract.contractData?.nguoiDaiDienA || 'Người đại diện'}</Typography>\n                <Typography>{contract.contractData?.chucVuA || 'Chức vụ'}</Typography>\n              </Box>\n              \n              <Box sx={{ textAlign: 'center', minWidth: 200, flex: 1 }}>\n                <Typography fontWeight=\"bold\">ĐẠI DIỆN BÊN B</Typography>\n                <Typography fontStyle=\"italic\">(Ký, ghi rõ họ tên)</Typography>\n                <Box sx={{ height: 80, mt: 2 }}></Box>\n                <Typography fontWeight=\"bold\">Người đại diện</Typography>\n                <Typography>Chức vụ</Typography>\n              </Box>\n            </Box>\n          </Paper>\n        </Box>\n      </Paper>\n\n      {/* Delete confirmation dialog */}\n      <Dialog open={deleteConfirmOpen} onClose={() => setDeleteConfirmOpen(false)}>\n        <DialogTitle>Xác nhận xóa hợp đồng</DialogTitle>\n        <DialogContent>\n          <Typography>Bạn có chắc chắn muốn xóa hợp đồng này? Hành động này không thể hoàn tác.</Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDeleteConfirmOpen(false)}>Hủy</Button>\n          <Button \n            onClick={() => {\n              onDelete(contract.id);\n              setDeleteConfirmOpen(false);\n            }} \n            color=\"error\"\n            variant=\"contained\"\n          >\n            Xác nhận xóa\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default ContractDetail;\n","import React, { useState, useEffect } from 'react';\nimport { Box, Typography, Snackbar, Alert, Tabs, Tab, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip, Button, IconButton, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\nimport { Visibility, Delete, FileDownload, Add, Close, ArrowBack } from '@mui/icons-material';\nimport TemplateList from './components/TemplateList';\nimport UploadTemplate from './components/UploadTemplate';\nimport CreateContract from './components/CreateContract';\nimport ContractDetail from './components/ContractDetail';\nimport { UploadTemplateFormValues } from './components/UploadTemplate/types';\n\n// Import interface Template từ TemplateList/types.ts\nimport { Template as TemplateType } from './components/TemplateList/types';\n\n// Mở rộng interface Template để phù hợp với TemplateList/types.ts\ninterface Template extends TemplateType {\n  description?: string;\n  extractedFields?: any[];\n}\n\n// Interface cho hợp đồng\ninterface Contract {\n  id: string;\n  name: string;\n  templateId: string;\n  templateName: string;\n  status: 'draft' | 'pending' | 'signed' | 'expired' | 'cancelled';\n  partyA: string;\n  partyB: string;\n  createdAt: string;\n  updatedAt: string;\n  createdBy: string;\n  signedAt?: string;\n  expiresAt?: string;\n}\n\n// Tab value\ntype ContractTab = 'templates' | 'contracts';\n\nconst ContractManagement: React.FC = () => {\n  const [currentTab, setCurrentTab] = useState<ContractTab>('templates');\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\n  const [createContractOpen, setCreateContractOpen] = useState(false);\n  const [templates, setTemplates] = useState<Template[]>([]);\n  const [contracts, setContracts] = useState<Contract[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedContract, setSelectedContract] = useState<Contract | null>(null);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [contractToDelete, setContractToDelete] = useState<string | null>(null);\n  const [snackbar, setSnackbar] = useState<{\n    open: boolean;\n    message: string;\n    severity: 'success' | 'error' | 'info' | 'warning';\n  }>({ open: false, message: '', severity: 'success' });\n\n  const handleOpenUploadDialog = () => {\n    setUploadDialogOpen(true);\n  };\n\n  const handleCloseUploadDialog = () => {\n    setUploadDialogOpen(false);\n  };\n\n  // Tải dữ liệu khi component được mount\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        // TODO: Replace with actual API call\n        // Simulate API call\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        \n        // Mock data\n        const mockTemplates: Template[] = [\n          {\n            id: '1',\n            name: 'Hợp đồng mua bán',\n            description: 'Template hợp đồng mua bán hàng hóa',\n            type: 'customer',\n            status: 'active',\n            createdAt: '2025-06-30T10:00:00Z',\n            updatedAt: '2025-06-30T10:00:00Z',\n            createdBy: 'Nguyễn Văn A',\n            placeholderCount: 8,\n            isDefault: true,\n            extractedFields: []\n          },\n          {\n            id: '2',\n            name: 'Hợp đồng dịch vụ',\n            description: 'Template hợp đồng cung cấp dịch vụ',\n            type: 'internal',\n            status: 'active',\n            createdAt: '2025-06-29T15:30:00Z',\n            updatedAt: '2025-06-29T15:30:00Z',\n            createdBy: 'Trần Thị B',\n            placeholderCount: 5,\n            isDefault: false,\n            extractedFields: []\n          }\n        ];\n        \n        setTemplates(mockTemplates);\n      } catch (error) {\n        console.error('Error fetching templates:', error);\n        setSnackbar({\n          open: true,\n          message: 'Có lỗi xảy ra khi tải dữ liệu. Vui lòng thử lại.',\n          severity: 'error',\n        });\n      }\n      \n      // Tải dữ liệu hợp đồng mẫu\n      try {\n        const mockContracts: Contract[] = [\n          {\n            id: 'C001',\n            name: 'Hợp đồng mua bán số 2025/001',\n            templateId: '1',\n            templateName: 'Hợp đồng mua bán',\n            status: 'signed',\n            partyA: 'Công ty TNHH ABC',\n            partyB: 'Ông Nguyễn Văn A',\n            createdAt: '2025-07-01T09:00:00Z',\n            updatedAt: '2025-07-01T09:30:00Z',\n            createdBy: 'Nguyễn Văn B',\n            signedAt: '2025-07-01T10:00:00Z',\n            expiresAt: '2025-12-31T23:59:59Z'\n          },\n          {\n            id: 'C002',\n            name: 'Hợp đồng dịch vụ số 2025/002',\n            templateId: '2',\n            templateName: 'Hợp đồng dịch vụ',\n            status: 'pending',\n            partyA: 'Công ty TNHH ABC',\n            partyB: 'Công ty TNHH XYZ',\n            createdAt: '2025-07-02T14:00:00Z',\n            updatedAt: '2025-07-02T14:30:00Z',\n            createdBy: 'Trần Thị C'\n          },\n          {\n            id: 'C003',\n            name: 'Hợp đồng thuê nhà số 2025/003',\n            templateId: '3',\n            templateName: 'Hợp đồng thuê nhà',\n            status: 'draft',\n            partyA: 'Công ty TNHH ABC',\n            partyB: 'Bà Lê Thị D',\n            createdAt: '2025-07-03T10:00:00Z',\n            updatedAt: '2025-07-03T10:15:00Z',\n            createdBy: 'Nguyễn Văn B',\n            expiresAt: '2026-07-02T23:59:59Z'\n          }\n        ];\n        \n        setContracts(mockContracts);\n      } catch (error) {\n        console.error('Error loading contracts:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n  }, []);\n\n  const handleUploadTemplate = async (values: UploadTemplateFormValues): Promise<void> => {\n    try {\n      setLoading(true);\n      // TODO: Replace with actual API call\n      console.log('Uploading template:', values);\n      \n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      // Tạo template mới với ID ngẫu nhiên\n      const newTemplate: Template = {\n        id: Math.random().toString(36).substring(2, 9),\n        name: values.name,\n        description: values.description || '',\n        type: values.type,\n        status: 'active',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        createdBy: 'Người dùng hiện tại', // Trong thực tế sẽ lấy từ thông tin đăng nhập\n        placeholderCount: values.extractedFields.length,\n        isDefault: false,\n        extractedFields: values.extractedFields\n      };\n      \n      // Thêm template mới vào danh sách\n      setTemplates(prevTemplates => [newTemplate, ...prevTemplates]);\n      \n      setSnackbar({\n        open: true,\n        message: 'Tải lên template thành công!',\n        severity: 'success',\n      });\n    } catch (error) {\n      console.error('Error uploading template:', error);\n      setSnackbar({\n        open: true,\n        message: 'Có lỗi xảy ra khi tải lên template. Vui lòng thử lại.',\n        severity: 'error',\n      });\n      throw error; // Ném lỗi để component UploadTemplate xử lý\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCloseSnackbar = () => {\n    setSnackbar(prev => ({ ...prev, open: false }));\n  };\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: ContractTab) => {\n    setCurrentTab(newValue);\n  };\n  \n  const handleCreateContract = (newContract: any) => {\n    setContracts(prev => [newContract, ...prev]);\n    setCreateContractOpen(false);\n    setSelectedContract(newContract);\n    setSnackbar({\n      open: true,\n      message: 'Tạo hợp đồng mới thành công!',\n      severity: 'success',\n    });\n  };\n\n  const handleViewContract = (contract: Contract) => {\n    setSelectedContract(contract);\n  };\n\n  const handleCloseDetail = () => {\n    setSelectedContract(null);\n  };\n\n  const handleDeleteClick = (contractId: string) => {\n    setContractToDelete(contractId);\n    setDeleteConfirmOpen(true);\n  };\n\n  const handleConfirmDelete = () => {\n    if (contractToDelete) {\n      setContracts(prev => prev.filter(c => c.id !== contractToDelete));\n      setDeleteConfirmOpen(false);\n      setSelectedContract(null);\n      setSnackbar({\n        open: true,\n        message: 'Đã xóa hợp đồng thành công!',\n        severity: 'success',\n      });\n    }\n  };\n\n  const handleEditContract = (contractId: string) => {\n    // In a real app, this would navigate to an edit page or open an edit dialog\n    setSnackbar({\n      open: true,\n      message: 'Chức năng chỉnh sửa hợp đồng đang được phát triển',\n      severity: 'info' as const,\n    });\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Quản lý Hợp đồng\n        </Typography>\n      </Box>\n      \n      <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 3 }}>\n        <Tabs \n          value={currentTab} \n          onChange={handleTabChange}\n          aria-label=\"contract management tabs\"\n        >\n          <Tab label=\"Mẫu hợp đồng\" value=\"templates\" />\n          <Tab label=\"Hợp đồng\" value=\"contracts\" />\n        </Tabs>\n      </Box>\n      \n      {currentTab === 'templates' ? (\n        <>\n          <TemplateList \n            templates={templates}\n            loading={loading}\n            onUploadClick={handleOpenUploadDialog} \n          />\n          \n          <UploadTemplate \n            open={uploadDialogOpen}\n            onClose={handleCloseUploadDialog}\n            onSubmit={handleUploadTemplate}\n          />\n        </>\n      ) : (\n        <Paper sx={{ p: 3 }}>\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n            <Typography variant=\"h6\" gutterBottom>\n              Danh sách Hợp đồng\n            </Typography>\n            <Button \n              variant=\"contained\" \n              color=\"primary\"\n              startIcon={<Add />}\n              onClick={() => setCreateContractOpen(true)}\n            >\n              Tạo hợp đồng mới\n            </Button>\n          </Box>\n          \n          {loading ? (\n            <Typography color=\"textSecondary\" paragraph>\n              Đang tải danh sách hợp đồng...\n            </Typography>\n          ) : (\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Mã HĐ</TableCell>\n                    <TableCell>Tên hợp đồng</TableCell>\n                    <TableCell>Loại HĐ</TableCell>\n                    <TableCell>Bên A</TableCell>\n                    <TableCell>Bên B</TableCell>\n                    <TableCell>Ngày tạo</TableCell>\n                    <TableCell>Trạng thái</TableCell>\n                    <TableCell>Hành động</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {contracts.map((contract) => (\n                    <TableRow \n                      key={contract.id} \n                      hover \n                      onClick={() => handleViewContract(contract)}\n                      sx={{ cursor: 'pointer' }}\n                    >\n                      <TableCell>{contract.id}</TableCell>\n                      <TableCell>{contract.name}</TableCell>\n                      <TableCell>{contract.templateName}</TableCell>\n                      <TableCell>{contract.partyA}</TableCell>\n                      <TableCell>{contract.partyB}</TableCell>\n                      <TableCell>{new Date(contract.createdAt).toLocaleDateString()}</TableCell>\n                      <TableCell>\n                        <Chip \n                          label={\n                            contract.status === 'signed' ? 'Đã ký' :\n                            contract.status === 'pending' ? 'Chờ ký' :\n                            contract.status === 'draft' ? 'Nháp' :\n                            contract.status === 'expired' ? 'Hết hạn' : 'Đã hủy'\n                          }\n                          color={\n                            contract.status === 'signed' ? 'success' :\n                            contract.status === 'pending' ? 'warning' :\n                            contract.status === 'draft' ? 'default' : 'error'\n                          }\n                          size=\"small\"\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <IconButton \n                          size=\"small\" \n                          title=\"Xem chi tiết\"\n                          onClick={() => handleViewContract(contract)}\n                        >\n                          <Visibility fontSize=\"small\" />\n                        </IconButton>\n                        <IconButton size=\"small\" title=\"Tải về\">\n                          <FileDownload fontSize=\"small\" />\n                        </IconButton>\n                        <IconButton \n                          size=\"small\" \n                          title=\"Xóa\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteClick(contract.id);\n                          }}\n                        >\n                          <Delete fontSize=\"small\" color=\"error\" />\n                        </IconButton>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </Paper>\n      )}\n      \n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={handleCloseSnackbar}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      >\n        <Alert \n          onClose={handleCloseSnackbar} \n          severity={snackbar.severity}\n          sx={{ width: '100%' }}\n        >\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n\n      {/* Contract Detail Dialog */}\n      <Dialog \n        open={!!selectedContract} \n        onClose={handleCloseDetail}\n        fullWidth\n        maxWidth=\"md\"\n      >\n        <DialogTitle>\n          <Box display=\"flex\" alignItems=\"center\">\n            <IconButton onClick={handleCloseDetail} sx={{ mr: 1 }}>\n              <ArrowBack />\n            </IconButton>\n            <span>Chi tiết hợp đồng</span>\n          </Box>\n        </DialogTitle>\n        <DialogContent dividers>\n          {selectedContract && (\n            <ContractDetail\n              contract={{\n                ...selectedContract,\n                contractData: {\n                  tenBenA: selectedContract.partyA,\n                  tenBenB: selectedContract.partyB,\n                  ngayKy: new Date(selectedContract.createdAt).toLocaleDateString('vi-VN'),\n                  diaChiA: '123 Lê Lợi, Q.1, TP.HCM',\n                  dienThoaiA: '0901234567',\n                  maSoThueA: '0123456789',\n                  nguoiDaiDienA: 'Nguyễn Văn A',\n                  chucVuA: 'Giám đốc',\n                  giaTriHopDong: '50,000,000 VNĐ'\n                }\n              }}\n              onClose={handleCloseDetail}\n              onDelete={handleDeleteClick}\n              onEdit={handleEditContract}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog\n        open={deleteConfirmOpen}\n        onClose={() => setDeleteConfirmOpen(false)}\n      >\n        <DialogTitle>Xác nhận xóa</DialogTitle>\n        <DialogContent>\n          <Typography>Bạn có chắc chắn muốn xóa hợp đồng này? Hành động này không thể hoàn tác.</Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDeleteConfirmOpen(false)}>Hủy</Button>\n          <Button \n            onClick={handleConfirmDelete} \n            color=\"error\"\n            variant=\"contained\"\n          >\n            Xác nhận xóa\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Dialog tạo hợp đồng mới */}\n      <Dialog \n        open={createContractOpen} \n        onClose={() => setCreateContractOpen(false)}\n        maxWidth=\"lg\"\n        fullWidth\n        PaperProps={{\n          sx: { \n            height: '90vh',\n            maxHeight: '90vh',\n            width: '95%',\n            maxWidth: '1400px'\n          }\n        }}\n      >\n        <DialogTitle>\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n            <Typography variant=\"h6\">Tạo hợp đồng mới</Typography>\n            <IconButton onClick={() => setCreateContractOpen(false)}>\n              <Close />\n            </IconButton>\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <CreateContract \n            templates={templates} \n            onBack={() => setCreateContractOpen(false)}\n            onCreate={handleCreateContract}\n          />\n        </DialogContent>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default ContractManagement;\n"],"names":["_ref","filters","onFilterChange","onUploadClick","onCreateWithAIClick","console","log","_jsxs","Box","sx","mb","children","display","gridTemplateColumns","xs","md","gap","alignItems","_jsx","TextField","fullWidth","variant","placeholder","value","search","onChange","e","_objectSpread","target","InputProps","startAdornment","SearchIcon","color","mr","select","label","type","MenuItem","status","justifyContent","mt","Button","startIcon","AddIcon","onClick","width","maxWidth","SmartToyIcon","templates","page","rowsPerPage","totalRows","onPageChange","onRowsPerPageChange","onView","onEdit","onSetDefault","onDelete","Paper","overflow","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","length","map","template","hover","isDefault","StarIcon","fontSize","Typography","name","Chip","size","placeholderCount","Date","createdAt","toLocaleDateString","createdBy","Tooltip","title","IconButton","id","ViewIcon","EditIcon","disabled","StarBorderIcon","DeleteIcon","colSpan","py","TablePagination","rowsPerPageOptions","component","count","handleChangePage","event","newPage","parseInt","labelRowsPerPage","labelDisplayedRows","_ref2","from","to","concat","PROMPT_SUGGESTIONS","onSubmit","loading","chatHistory","prompt","setPrompt","useState","flexDirection","height","p","flexGrow","overflowY","textAlign","opacity","gutterBottom","mx","fontStyle","message","index","elevation","backgroundColor","role","borderRadius","alignSelf","PersonIcon","content","px","flexWrap","suggestion","newPrompt","handleSuggestionClick","clickable","Divider","preventDefault","trim","multiline","maxRows","endIcon","CircularProgress","SendIcon","onUpdate","onSaveTemplate","borderBottom","DownloadIcon","SaveIcon","handleSaveTemplate","Skeleton","my","style","padding","border","resize","fontFamily","lineHeight","extractCompanyNames","party1","includes","party2","companyMatch","match","toUpperCase","extractContractType","toLowerCase","extractContractValue","valueMatch","parseFloat","unit","toLocaleString","extractContractDuration","durationMatch","duration","calculatePercentage","percentage","numericMatch","result","replace","open","onClose","setLoading","contractContent","setContractContent","setChatHistory","saveDialogOpen","setSaveDialogOpen","templateName","setTemplateName","savingTemplate","setSavingTemplate","Dialog","PaperProps","maxHeight","m","DialogTitle","edge","CloseIcon","DialogContent","borderRight","AIPromptInput","async","prev","setTimeout","generatedContract","companyNames","contractType","contractValue","contractDuration","Math","floor","random","getDate","getMonth","getFullYear","mockGenerateContract","error","ContractPreview","newContent","firstLine","split","pt","autoFocus","margin","placeholderRegex","placeholders","newTemplate","toISOString","updatedAt","mockTemplates","propTemplates","propLoading","setFilters","setPage","setRowsPerPage","aiModalOpen","setAIModalOpen","lastAddedTemplateId","setLastAddedTemplateId","filteredTemplates","setFilteredTemplates","setTotalRows","useEffect","filtered","searchLower","filter","startIndex","paginated","slice","filterAndPaginateTemplates","TemplateFilters","newFilters","AIContractGeneration","templateData","newId","now","alert","TemplateTable","newRowsPerPage","window","confirm","schema","yup","required","description","optional","oneOf","file","test","extractedFields","of","originalText","default","_errors$name","analyzing","setAnalyzing","setExtractedFields","register","handleSubmit","reset","setValue","watch","formState","errors","useForm","resolver","yupResolver","defaultValues","undefined","selectedFile","handleUpdatePlaceholder","field","updatedFields","handleClose","data","dividers","helperText","rows","FormControl","InputLabel","Select","defaultValue","accept","_event$target$files","files","mockExtractedFields","htmlFor","UploadIcon","splice","DialogActions","borderTop","borderColor","payments","onPaymentsChange","onBack","onNext","paymentStatuses","handlePaymentChange","payment","ArrowBackIcon","paragraph","condition","amount","toString","handleAmountChange","numericValue","endAdornment","InputAdornment","position","LocalizationProvider","dateAdapter","AdapterDateFns","adapterLocale","vi","DatePicker","paymentDate","date","slotProps","textField","note","handleDeletePayment","handleAddPayment","newPayment","onCreate","activeStep","setActiveStep","selectedTemplate","setSelectedTemplate","formData","setFormData","setPayments","generateContractHTML","React","contractNumber","padStart","formatCurrency","Intl","NumberFormat","format","paymentScheduleHTML","join","reduce","sum","Object","entries","keys","values","some","handleCreateContract","newContract","templateId","partyA","partyB","contractData","toast","success","steps","renderTemplateSelection","marginBottom","cursor","TemplateIcon","fontWeight","formFields","forEach","renderContractForm","checkFormCompletion","fieldName","handleFieldChange","handleContinue","renderPaymentSchedule","PaymentScheduleStep","renderPreview","PdfPageEditor","initialContent","onSave","onExportPdf","Stepper","step","Step","completed","StepLabel","_contract$contractDat","_contract$contractDat2","_contract$contractDat3","_contract$contractDat4","_contract$contractDat5","_contract$contractDat6","contract","deleteConfirmOpen","setDeleteConfirmOpen","formatDate","dateString","ArrowBack","getStatusColor","ml","flex","signedAt","expiresAt","Download","Print","Share","Edit","Delete","tenBenA","diaChiA","dienThoaiA","maSoThueA","nguoiDaiDienA","chucVuA","tenBenB","ngayKy","giaTriHopDong","minWidth","ContractManagement","currentTab","setCurrentTab","uploadDialogOpen","setUploadDialogOpen","createContractOpen","setCreateContractOpen","setTemplates","contracts","setContracts","selectedContract","setSelectedContract","contractToDelete","setContractToDelete","snackbar","setSnackbar","severity","Promise","resolve","fetchData","handleCloseSnackbar","handleViewContract","handleCloseDetail","handleDeleteClick","contractId","Tabs","handleTabChange","newValue","Tab","_Fragment","TemplateList","handleOpenUploadDialog","UploadTemplate","handleCloseUploadDialog","substring","prevTemplates","Add","Visibility","FileDownload","stopPropagation","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","Alert","ContractDetail","handleConfirmDelete","c","Close","CreateContract"],"sourceRoot":""}